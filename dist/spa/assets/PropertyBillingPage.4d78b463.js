import{M as ul,a as dl,P as Jl,Q as Vl,b as et,c as $l,d as lt}from"./PropertyType.model.35c0ba5d.js";import{bK as Ae,c as V,h as U,bL as Ze,g as Je,r as P,w as de,aI as re,bY as xl,bT as Bl,cc as tt,bo as at,bZ as ot,d as M,i as ve,c0 as Nl,C as Se,o as ne,aQ as A,ae as q,f as l,bj as r,F as X,al as ee,O as S,bH as te,af as u,cj as O,c1 as cl,ck as wl,b$ as nt,X as Re,W as se,U as El,bl as Le,ac as j,bR as rt,cl as Rl,c2 as ql,aS as st,aW as Ie,aF as it,cm as ut,cn as dt,aX as ct,ad as ie,bG as pt,bF as We,bf as mt,aH as ft}from"./index.1a32d67c.js";import{V as vt,g as bt,a as gt,b as yt,c as _t,B as Ve,I as G,d as $e,E as k,Q as qe,e as H,u as ht,f as wt}from"./index.fe7b4b83.js";import{Q as ae}from"./QBadge.9f47bfcd.js";import{u as Ml,_ as xe,l as Me,a as ue,m as sl,y as St,C as Pt,L as Ne,b as Ke,Q as Qe,c as It}from"./ClosePopup.db527c42.js";import{b as F,Q as il}from"./QCard.47a63b11.js";import{u as Ct,a as Tt,v as Ol,b as At,c as Vt,d as $t,e as xt,f as Bt,g as Et,r as Ll,s as Ot,p as Dl,h as Lt,i as pe,P as J,Q as oe,j as Dt,I as kt,k as He}from"./PropertySubscription.handler.182c2434.js";import{Q as Nt}from"./QPage.e1176846.js";import{g as Rt}from"./get-css-var.23548d6a.js";import{u as Ul,a as Gl,b as qt,d as jl,c as kl,Q as Ce,h as Te}from"./format.9d4e2859.js";import{Q as Sl,u as Mt,a as Ut,b as Gt}from"./QCheckbox.466fe5b4.js";import{c as Y,i as Be}from"./utils.01331f21.js";import{api as Fl}from"./axios.1db4924b.js";import{U as we}from"./urlPaths.enum.9088486d.js";import{r as De}from"./default.request.fe169b46.js";import{u as jt}from"./billing-store.39856657.js";import{I as Ft}from"./IsEmail.f8d78649.js";import"./QResizeObserver.064d12f3.js";import"./touch.3df10340.js";import"./QList.38f1e513.js";import"./storeforage.28380509.js";var Ye=Ae({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:a}){const n=Je(),o=V(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return U("td",{class:o.value},Ze(a.default));const t=n.vnode.key,s=(e.props.colsMap!==void 0?e.props.colsMap[t]:null)||e.props.col;if(s===void 0)return;const{row:d}=e.props;return U("td",{class:o.value+s.__tdClass(d),style:s.__tdStyle(d)},Ze(a.default))}}}),ke=Ae({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:a}){const n=V(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>U("tr",{class:n.value},Ze(a.default))}}),Pl=Ae({name:"QTooltip",inheritAttrs:!1,props:{...Ct,...Ul,...Tt,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:Ol},self:{type:String,default:"top middle",validator:Ol},offset:{type:Array,default:()=>[14,14],validator:At},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...Gl],setup(e,{slots:a,emit:n,attrs:o}){let t,s;const d=Je(),{proxy:{$q:p}}=d,i=P(null),I=P(!1),x=V(()=>Dl(e.anchor,p.lang.rtl)),T=V(()=>Dl(e.self,p.lang.rtl)),E=V(()=>e.persistent!==!0),{registerTick:g,removeTick:R}=Vt(),{registerTimeout:y}=qt(),{transitionProps:b,transitionStyle:v}=$t(e),{localScrollTarget:D,changeScrollEvent:z,unconfigureScrollTarget:L}=xt(e,al),{anchorEl:m,canShow:c,anchorEvents:h}=Bt({showing:I,configureAnchorEl:gl}),{show:W,hide:B}=jl({showing:I,canShow:c,handleShow:ce,handleHide:Z,hideOnRouteChange:E,processOnMount:!0});Object.assign(h,{delayShow:vl,delayHide:bl});const{showPortal:$,hidePortal:C,renderPortal:N}=Et(d,i,_l,"tooltip");if(p.platform.is.mobile===!0){const K={anchorEl:m,innerRef:i,onClickOutside(fe){return B(fe),fe.target.classList.contains("q-dialog__backdrop")&&ot(fe),!0}},Ue=V(()=>e.modelValue===null&&e.persistent!==!0&&I.value===!0);de(Ue,fe=>{(fe===!0?Lt:Ll)(K)}),re(()=>{Ll(K)})}function ce(K){$(),g(()=>{s=new MutationObserver(()=>ye()),s.observe(i.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),ye(),al()}),t===void 0&&(t=de(()=>p.screen.width+"|"+p.screen.height+"|"+e.self+"|"+e.anchor+"|"+p.lang.rtl,ye)),y(()=>{$(!0),n("show",K)},e.transitionDuration)}function Z(K){R(),C(),ge(),y(()=>{C(!0),n("hide",K)},e.transitionDuration)}function ge(){s!==void 0&&(s.disconnect(),s=void 0),t!==void 0&&(t(),t=void 0),L(),xl(h,"tooltipTemp")}function ye(){Ot({targetEl:i.value,offset:e.offset,anchorEl:m.value,anchorOrigin:x.value,selfOrigin:T.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function vl(K){if(p.platform.is.mobile===!0){kl(),document.body.classList.add("non-selectable");const Ue=m.value,fe=["touchmove","touchcancel","touchend","click"].map(ol=>[Ue,ol,"delayHide","passiveCapture"]);Bl(h,"tooltipTemp",fe)}y(()=>{W(K)},e.delay)}function bl(K){p.platform.is.mobile===!0&&(xl(h,"tooltipTemp"),kl(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),y(()=>{B(K)},e.hideDelay)}function gl(){if(e.noParentEvent===!0||m.value===null)return;const K=p.platform.is.mobile===!0?[[m.value,"touchstart","delayShow","passive"]]:[[m.value,"mouseenter","delayShow","passive"],[m.value,"mouseleave","delayHide","passive"]];Bl(h,"anchor",K)}function al(){if(m.value!==null||e.scrollTarget!==void 0){D.value=tt(m.value,e.scrollTarget);const K=e.noParentEvent===!0?ye:B;z(D.value,K)}}function yl(){return I.value===!0?U("div",{...o,ref:i,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",o.class],style:[o.style,v.value],role:"tooltip"},Ze(a.default)):null}function _l(){return U(at,b.value,yl)}return re(ge),Object.assign(d.proxy,{updatePosition:ye}),N}});function el(e){return function(a,n){var o={type:vt.CONDITIONAL_VALIDATION,target:a.constructor,propertyName:n,constraints:[function(t,s){return t[n]!==null&&t[n]!==void 0}],validationOptions:e};bt().addValidationMetadata(new gt(o))}}var Wt="isBoolean";function Qt(e){return e instanceof Boolean||typeof e=="boolean"}function Ht(e){return yt({name:Wt,validator:{validate:function(a,n){return Qt(a)},defaultMessage:_t(function(a){return a+"$property must be a boolean value"},e)}},e)}var Yt=Object.defineProperty,zt=Object.getOwnPropertyDescriptor,be=(e,a,n,o)=>{for(var t=o>1?void 0:o?zt(a,n):a,s=e.length-1,d;s>=0;s--)(d=e[s])&&(t=(o?d(a,n,t):d(t))||t);return o&&t&&Yt(a,n,t),t};class me extends Ve{id;propertyName;propertyUnit;expectedMonthlyCost;propertyTypeId;streetId;streetNumber;oldCode;propertySubscriberProfileId;isOwner=!1}be([G({message:"Please, enter the property name"})],me.prototype,"propertyName",2);be([G({message:"Please, enter the property unit"})],me.prototype,"propertyUnit",2);be([el()],me.prototype,"expectedMonthlyCost",2);be([G({message:"Please, select the property type"})],me.prototype,"propertyTypeId",2);be([G({message:"Please, select the street"})],me.prototype,"streetId",2);be([G({message:"Please, enter the street number"})],me.prototype,"streetNumber",2);be([el()],me.prototype,"oldCode",2);be([G({message:"Please, select a custiodian"})],me.prototype,"propertySubscriberProfileId",2);be([Ht()],me.prototype,"isOwner",2);const Kt={class:"row justify-between"},Xt={class:"q-gutter-xl"},Zt={class:"q-gutter-xl"},Jt={style:{width:"20rem"}},ea={class:"row justify-center q-mt-xl",style:{width:"100%"}},la=M({__name:"NewPropertySubscription",emits:["addSubscriber","addPropertyType","addStreet"],setup(e,{emit:a}){M({name:"new-property-subscription"});const n=a,o=ve("eventBus"),t={width:"35rem"},s={width:"30rem"},d=pe();J.handlePostSubscription(o,{onSuccess:D,onError:z});const p=Ml();let i;const I=P(),x=P([]),T=P([]),{streets:E}=Nl(p),g=Se(new me),R=V(()=>x.value.map(m=>({label:m.firstName+" "+m.lastName,value:m.id}))),y=V(()=>T.value.map(m=>({label:`${m.name} - ${m.unitPrice}`,value:m.id}))),b=V(()=>{var m;return(m=E==null?void 0:E.value)==null?void 0:m.map(c=>({label:c.name,value:c.id}))});$e(async()=>{g.validate()});async function v(){var m;if(g.validate(),!Be(g)){console.log("the following errors exist",g.errors),await((m=I.value)==null?void 0:m.validate());return}d.loading.show({message:"Submitting ..."}),o.emit(k.NEW_PROPERTY_SUBSCRIPTION,g),i=setTimeout(()=>{d.loading.hide()},Me)}function D(){g.clearValues(),Y({loader:d.loading,timer:i})}function z(){Y({loader:d.loading,timer:i})}function L(m){n(m)}return de([()=>g.propertyTypeId,()=>g.propertyUnit],([m,c])=>{if(m&&c){const h=T.value.find(W=>W.id===m);return g.expectedMonthlyCost=String(Number(h==null?void 0:h.unitPrice)*c),g.expectedMonthlyCost}}),ne(async()=>{try{E!=null&&E.value||p.fetchServerData({type:"street"}),T.value=await J.getPropertyTypes(),x.value=await J.getSubscriberUsers()}catch(m){console.log(m)}}),re(()=>{o.off(k.NEW_PROPERTY_SUBSCRIPTION)}),(m,c)=>(A(),q(X,null,[l(F,{class:"text-center"},{default:r(()=>[l(xe,null,{default:r(()=>[ee("New Property Subscription")]),_:1})]),_:1}),l(F,null,{default:r(()=>[l(S(qe),{class:"q-pa-md",style:{height:"100%"},onSubmit:c[15]||(c[15]=te(()=>{},["prevent"])),ref_key:"propertySubscriptionForm",ref:I},{default:r(()=>[u("div",Kt,[u("div",Xt,[l(H,{style:s,label:"Property Name",type:"text",modelValue:g.propertyName,"onUpdate:modelValue":c[0]||(c[0]=h=>g.propertyName=h),filled:"",outlined:"",color:"secondary","label-color":"dark",rules:[()=>m.$validateField(g,"propertyName")]},null,8,["modelValue","rules"]),l(H,{style:s,label:"Property Unit",type:"text",modelValue:g.propertyUnit,"onUpdate:modelValue":c[1]||(c[1]=h=>g.propertyUnit=h),filled:"",outlined:"",color:"secondary","label-color":"dark",rules:[()=>m.$validateField(g,"propertyUnit")]},null,8,["modelValue","rules"]),l(H,{style:s,label:"Expected Monthly Cost",type:"text",modelValue:g.expectedMonthlyCost,"onUpdate:modelValue":c[2]||(c[2]=h=>g.expectedMonthlyCost=h),filled:"",outlined:"",color:"secondary","label-color":"dark"},{default:r(()=>[l(Pl,null,{default:r(()=>[ee("Expected Monthly Cost")]),_:1})]),_:1},8,["modelValue"]),l(H,{style:s,label:"Old Code",type:"text",modelValue:g.oldCode,"onUpdate:modelValue":c[3]||(c[3]=h=>g.oldCode=h),filled:"",outlined:"",color:"secondary","label-color":"dark"},null,8,["modelValue"])]),u("div",Zt,[u("div",{class:"row",style:t},[l(S(oe),{style:{width:"70%"},label:"Street",filled:"",outlined:"",modelValue:g.streetId,"onUpdate:modelValue":c[6]||(c[6]=h=>g.streetId=h),color:"secondary","label-color":"dark",options:b.value,rules:[()=>m.$validateField(g,"streetId")],clearable:"","emit-value":"","map-options":""},{append:r(()=>[l(S(O),{round:"",flat:"",dense:"",icon:"add",onClick:c[4]||(c[4]=te(h=>L("addStreet"),["prevent","stop"]))})]),"no-option":r(()=>[l(Ce,null,{default:r(()=>[l(Te,{class:"text-grey"},{default:r(()=>[l(S(O),{flat:"",dense:"",label:"Add Street",onClick:c[5]||(c[5]=h=>L("addStreet"))})]),_:1})]),_:1})]),_:1},8,["modelValue","options","rules"]),l(H,{style:{width:"30%"},label:"Number",type:"text",modelValue:g.streetNumber,"onUpdate:modelValue":c[7]||(c[7]=h=>g.streetNumber=h),filled:"",outlined:"",color:"secondary","label-color":"dark"},{default:r(()=>[l(Pl,null,{default:r(()=>[ee("Street Number")]),_:1})]),_:1},8,["modelValue"])]),u("div",{style:t},[l(S(oe),{style:{width:"100%"},label:"Property Type",filled:"",outlined:"",modelValue:g.propertyTypeId,"onUpdate:modelValue":c[10]||(c[10]=h=>g.propertyTypeId=h),color:"secondary","label-color":"dark",options:y.value,clearable:"",rules:[()=>m.$validateField(g,"propertyTypeId")],"emit-value":"","map-options":""},{append:r(()=>[l(S(O),{round:"",dense:"",flat:"",icon:"add",onClick:c[8]||(c[8]=te(h=>L("addPropertyType"),["prevent","stop"]))})]),"no-option":r(()=>[l(Ce,null,{default:r(()=>[l(Te,{class:"text-grey"},{default:r(()=>[l(S(O),{dense:"",flat:"",label:"Add Property Type",onClick:c[9]||(c[9]=h=>L("addPropertyType"))})]),_:1})]),_:1})]),_:1},8,["modelValue","options","rules"])]),u("div",{style:t},[l(S(oe),{style:{width:"100%"},label:"Custodian",filled:"",outlined:"",modelValue:g.propertySubscriberProfileId,"onUpdate:modelValue":c[13]||(c[13]=h=>g.propertySubscriberProfileId=h),color:"secondary","label-color":"dark",clearable:"",options:R.value,rules:[()=>m.$validateField(g,"propertySubscriberProfileId")],"emit-value":"","map-options":""},{append:r(()=>[l(S(O),{round:"",dense:"",flat:"",icon:"add",onClick:c[11]||(c[11]=te(h=>L("addSubscriber"),["prevent","stop"]))})]),"no-option":r(()=>[l(Ce,null,{default:r(()=>[l(Te,{class:"text-grey"},{default:r(()=>[l(S(O),{dense:"",flat:"",label:"Add Subscriber",onClick:c[12]||(c[12]=h=>L("addSubscriber"))})]),_:1})]),_:1})]),_:1},8,["modelValue","options","rules"])]),u("div",Jt,[l(Sl,{label:"Is Owner",modelValue:g.isOwner,"onUpdate:modelValue":c[14]||(c[14]=h=>g.isOwner=h),color:"primary"},null,8,["modelValue"])])])]),u("div",ea,[l(S(O),{style:{width:"40%"},label:"Submit",rounded:"",color:"primary",type:"submit",onClick:te(v,["prevent"])})])]),_:1},512)]),_:1})],64))}});var ta=Ae({name:"QToggle",props:{...Mt,icon:String,iconColor:String},emits:Ut,setup(e){function a(n,o){const t=V(()=>(n.value===!0?e.checkedIcon:o.value===!0?e.indeterminateIcon:e.uncheckedIcon)||e.icon),s=V(()=>n.value===!0?e.iconColor:null);return()=>[U("div",{class:"q-toggle__track"}),U("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},t.value!==void 0?[U(cl,{name:t.value,color:s.value})]:void 0)]}return Gt("toggle",a)}}),aa=Object.defineProperty,oa=Object.getOwnPropertyDescriptor,pl=(e,a,n,o)=>{for(var t=o>1?void 0:o?oa(a,n):a,s=e.length-1,d;s>=0;s--)(d=e[s])&&(t=(o?d(a,n,t):d(t))||t);return o&&t&&aa(a,n,t),t};class ll extends Ve{streetId;propertySuscriptionId;month;year;type;forAllProperties;forPropertiesOnStreet}pl([el()],ll.prototype,"streetId",2);pl([G({message:"Please, select the property subscsription"})],ll.prototype,"propertySuscriptionId",2);pl([G({message:"Please, select the month"})],ll.prototype,"month",2);pl([G({message:"Please, select the year"})],ll.prototype,"year",2);async function na(e){const a=await Fl.post(we.BILLING,e);if(a.status===201)return a.data;throw new Error("Attempt to generate billing failed",{cause:a.data})}async function ra(e){const a=await Fl.get(we.BILLING,{params:e});if(a.status===200)return a.data;throw new Error("Could not fetch billings")}class Il{static async handGenerateBilling(a,{onSuccess:n,onError:o}={}){a.on(k.GENERATE_BILLING,async t=>{try{await na(t),n==null||n(),wl.create({message:"Process was successful",color:"positive"})}catch(s){o==null||o(),wl.create({message:s.message,color:"negative",icon:"warning",timeout:5e3})}})}static async getBilling(a){try{return await ra(a)}catch(n){wl.create({message:n.message,color:"negative",icon:"warning",timeout:5e3})}}static async deleteBilling(a){return await De(we.BILLING,"delete",{params:{billingId:a}})}static async updateArrears(a){await De(we.UPDATE_ARREARS,"put",{body:a})}}class ze{static async getBillingAccountArrears(a){try{const n=a.limit,o=a.page;return await De(we.BILLING_ACCOUNT_ARREARS,"get",{params:{limit:n,page:o,month:a.month}})}catch{ue({type:"negative"})}}static async handleViewBillingDetails(a,{onSuccess:n,onError:o}={}){a.on(k.VIEW_BILLING_DETAILS,async({streetId:t,billingMonth:s})=>{try{const d=await De(we.BILLING_ACCOUNT_DETAILS.replace(":streetId",t),"get",{params:{billingMonth:s}});n==null||n(d)}catch(d){o==null||o(d),ue({type:"negative"})}})}static async handleGetDefaulters(a,{onSuccess:n,onError:o}={}){a.on(k.GET_DEFAULTERS,async({streetId:t})=>{try{const s=await De(we.BILLING_ACCOUNT_DEFAULTER.replace(":streetId",t),"get");n==null||n(s)}catch(s){o==null||o(s),ue({type:"negative"})}})}static async getBillingsForPrinting(a,n,o){const t=await De(we.BILLING_ACCOUNT_DETAILS.replace(":streetId",a),"get",{params:{billingMonth:n,propertySubscriptionId:o}});return jt().updateBilling({type:"billingDetail",data:t}),t}}const sa={class:"row justify-between q-my-lg"},ia={class:"q-gutter-xl",style:{width:"40%"}},ua={class:"q-gutter-xl",style:{width:"50%"}},da={class:"row justify-between q-mt-md",style:{height:"7rem"}},ca={class:"column"},pa={class:"column justify-end",style:{height:"100%"}},ma=M({__name:"GenerateBill",setup(e){M({name:"generate-bill"});const a=Ml(),n=sl[new Date().getMonth()+1],o=ve("eventBus"),t=pe(),s=nt();let d;Il.handGenerateBilling(o,{onSuccess:z,onError:L});const p=P("generate"),{streets:i}=Nl(a),I=P(),x=P();P("");const T=V(()=>p.value==="print"?"Print Bill":"Generate Bill"),E=V(()=>St),g=V(()=>Object.values(sl).map(m=>m)),R=V(()=>p.value==="print"?"Print":"Generate"),y=V(()=>{var m;return(m=i==null?void 0:i.value)==null?void 0:m.map(c=>({label:c.name,value:c.id}))}),b=V(()=>{var m;return(m=I.value)==null?void 0:m.map(c=>({label:c.propertySubscriptionName,value:c.propertySubscriptionId}))}),v=Se(new ll);async function D(){if(t.loading.show({message:"Please, wait ..."}),v.type==="print"){await ze.getBillingsForPrinting(v.streetId,v.month,v.propertySuscriptionId),s.push("/print");return}else o.emit(k.GENERATE_BILLING,v);d=setTimeout(()=>{t.loading.show()},Me)}function z(){v.clearValues(),Y({loader:t.loading,timer:d})}function L(){Y({loader:t.loading,timer:d})}return de(p,m=>{m&&(v.type=m)}),de(()=>v.forAllProperties,m=>{m&&(v.forPropertiesOnStreet=!1)}),de(()=>v.streetId,async m=>{if(console.log("this is the new val from watch on streetId",m),m){v.propertySuscriptionId="";const c=await J.getSubscriptions({streetId:m});I.value=c==null?void 0:c.data}}),ne(()=>{v.month=n,v.year=String(new Date().getFullYear()),v.type=p.value}),ne(async()=>{i!=null&&i.value||await a.fetchServerData({type:"street"})}),ne(async()=>{const m=await J.getSubscriptions();I.value=m==null?void 0:m.data}),re(()=>{Y({loader:t.loading,timer:d})}),(m,c)=>(A(),q(X,null,[l(F,{class:"row justify-between"},{default:r(()=>[u("div",{style:se({color:`${m.$getColor("primary")}`})},[l(xe,{"header-text-size":"h5"},{default:r(()=>[ee(Re(T.value),1)]),_:1})],4),u("div",null,[u("span",{class:El([p.value==="print"?"text-primary":""])},"Print Bill",2),l(ta,{"toggle-indeterminate":!1,"toggle-order":"tf","true-value":"generate","false-value":"print",modelValue:p.value,"onUpdate:modelValue":c[0]||(c[0]=h=>p.value=h),"keep-color":""},null,8,["modelValue"]),u("span",{class:El([p.value!=="print"?"text-primary":""])},"Generate Bill",2)])]),_:1}),l(F,null,{default:r(()=>[u("form",{class:"q-pa-md",style:{height:"100%"},onSubmit:c[7]||(c[7]=te(()=>{},["prevent"])),ref_key:"billingModelForm",ref:x},[u("div",sa,[u("div",ia,[l(oe,{label:"Street",modelValue:v.streetId,"onUpdate:modelValue":c[1]||(c[1]=h=>v.streetId=h),filled:"",outlined:"",color:"secondary","label-color":"dark",options:y.value,"emit-value":"","map-options":""},null,8,["modelValue","options"]),l(oe,{modelValue:v.month,"onUpdate:modelValue":c[2]||(c[2]=h=>v.month=h),label:"Month",type:"text",filled:"",outlined:"",color:"secondary","label-color":"dark",options:g.value},null,8,["modelValue","options"])]),u("div",ua,[l(oe,{modelValue:v.propertySuscriptionId,"onUpdate:modelValue":c[3]||(c[3]=h=>v.propertySuscriptionId=h),label:"Property Subscription Id",type:"text",filled:"",outlined:"",color:"secondary","label-color":"dark",options:b.value,"emit-value":"","map-options":""},null,8,["modelValue","options"]),l(oe,{modelValue:v.year,"onUpdate:modelValue":c[4]||(c[4]=h=>v.year=h),label:"Year",type:"text",filled:"",outlined:"",options:E.value,color:"secondary","label-color":"dark","emit-value":"","map-options":""},null,8,["modelValue","options"])])]),u("div",da,[u("div",ca,[l(Sl,{label:`${R.value} for properties on street.`,modelValue:v.forPropertiesOnStreet,"onUpdate:modelValue":c[5]||(c[5]=h=>v.forPropertiesOnStreet=h),disable:v.forAllProperties},null,8,["label","modelValue","disable"]),l(Sl,{label:`${R.value} all bills.`,modelValue:v.forAllProperties,"onUpdate:modelValue":c[6]||(c[6]=h=>v.forAllProperties=h)},null,8,["label","modelValue"])]),u("div",pa,[l(O,{rounded:"",color:"primary",onClick:D},{default:r(()=>[ee(Re(p.value==="print"?"Print":"Generate"),1)]),_:1})])])],544)]),_:1})],64))}});var fa=Object.defineProperty,va=Object.getOwnPropertyDescriptor,Ee=(e,a,n,o)=>{for(var t=o>1?void 0:o?va(a,n):a,s=e.length-1,d;s>=0;s--)(d=e[s])&&(t=(o?d(a,n,t):d(t))||t);return o&&t&&fa(a,n,t),t};class Pe extends Ve{id;firstName;lastName;email;oldCode;phone;phoneCodeId;password}Ee([G({message:"First name is required"}),ul(2,{message:"First name must be at least 2 characters"}),dl(50,{message:"First name must be less than 50 characters"})],Pe.prototype,"firstName",2);Ee([G({message:"Last name is required"})],Pe.prototype,"lastName",2);Ee([G({message:"Email is required"}),Ft({},{message:"Email is invalid"})],Pe.prototype,"email",2);Ee([el()],Pe.prototype,"oldCode",2);Ee([G({message:"Phone number is required"})],Pe.prototype,"phone",2);Ee([G({message:"Phone code is required"})],Pe.prototype,"phoneCodeId",2);Ee([el()],Pe.prototype,"password",2);const tl=M({__name:"ModalPopupClose",setup(e){return M({name:"modal-popup-close"}),(a,n)=>Le((A(),j(O,{round:"",dense:"",icon:"close"},null,512)),[[Pt]])}}),ba={class:"row justify-between q-py-sm"},ga={class:"row justify-between"},ya={class:"q-gutter-xl"},_a={class:"q-gutter-xl"},ha={class:"flex row"},wa={class:"flex row justify-center"},Sa=M({__name:"AddSubscriber",setup(e){var g,R;M({name:"add-subscriber"});const a=ve("eventBus"),n=pe(),o=P(),t=P();(g=o.value)==null||g.focus(),(R=t.value)==null||R.focus();const s=P([]),d=P();J.handlePostSubscriberUser(a,{onSuccess:T,onError:E});let p;const i=Se(new Pe);$e(async()=>{await i.validate()});const I=V(()=>{var y;return(y=s.value)==null?void 0:y.map(b=>({label:b.name,value:b.id}))});function x(){var y;if(!Be(i)){(y=d.value)==null||y.validate();return}a.emit(k.POST_SUBSCRIBER,i),n.loading.show({message:"Submitting ..."}),p=setTimeout(()=>{n.loading.hide()},Me)}function T(){i.clearValues(),Y({loader:n.loading,timer:p})}function E(){Y({loader:n.loading,timer:p})}return ne(async()=>{var y,b;console.log((y=t.value)==null?void 0:y.focus),(b=o.value)==null||b.focus(),s.value=await J.getPhoneCodes()}),re(()=>{Y({loader:n.loading,timer:p}),a.off(k.POST_SUBSCRIBER)}),(y,b)=>(A(),q(X,null,[l(F,{class:"q-px-md"},{default:r(()=>[u("div",ba,[l(xe,null,{default:r(()=>[ee(" Add Subscriber ")]),_:1}),u("div",null,[l(tl)])])]),_:1}),l(F,{class:"q-px-md"},{default:r(()=>[l(S(qe),{onSubmit:b[6]||(b[6]=te(()=>{},["prevent"])),ref_key:"subscriberForm",ref:d},{default:r(()=>[u("div",ga,[u("div",ya,[l(S(H),{label:"First Name",filled:"",outlined:"",modelValue:i.firstName,"onUpdate:modelValue":b[0]||(b[0]=v=>i.firstName=v),"lazy-rules":"",rules:[()=>y.$validateField(i,"firstName")],ref_key:"inputRef",ref:t},null,8,["modelValue","rules"]),l(S(H),{label:"Email",filled:"",outlined:"",modelValue:i.email,"onUpdate:modelValue":b[1]||(b[1]=v=>i.email=v),"lazy-rules":"",rules:[()=>y.$validateField(i,"email")]},null,8,["modelValue","rules"]),l(S(H),{label:"Old Code",filled:"",outlined:"",modelValue:i.oldCode,"onUpdate:modelValue":b[2]||(b[2]=v=>i.oldCode=v),"lazy-rules":"",rules:[()=>y.$validateField(i,"oldCode")]},null,8,["modelValue","rules"])]),u("div",_a,[l(S(H),{label:"Last Name",filled:"",outlined:"",modelValue:i.lastName,"onUpdate:modelValue":b[3]||(b[3]=v=>i.lastName=v),"lazy-rules":"",rules:[()=>y.$validateField(i,"lastName")]},null,8,["modelValue","rules"]),u("div",ha,[l(oe,{label:"Country Phone Code",filled:"",outlined:"","label-color":"dark",modelValue:i.phoneCodeId,"onUpdate:modelValue":b[4]||(b[4]=v=>i.phoneCodeId=v),options:I.value,"emit-value":"","map-options":"",clearable:""},null,8,["modelValue","options"]),l(S(H),{label:"Phone",filled:"",outlined:"",modelValue:i.phone,"onUpdate:modelValue":b[5]||(b[5]=v=>i.phone=v),"lazy-rules":"",rules:[()=>y.$validateField(i,"phone")]},null,8,["modelValue","rules"])])])]),u("div",wa,[l(O,{style:{width:"40%"},label:"Submit",rounded:"",color:"primary",type:"submit",onClick:x})])]),_:1},512)]),_:1})],64))}});var Pa=Object.defineProperty,Ia=Object.getOwnPropertyDescriptor,Cl=(e,a,n,o)=>{for(var t=o>1?void 0:o?Ia(a,n):a,s=e.length-1,d;s>=0;s--)(d=e[s])&&(t=(o?d(a,n,t):d(t))||t);return o&&t&&Pa(a,n,t),t};class ml extends Ve{id;name;lgaId;lgaWardId}Cl([G({message:"Street name is required"}),ul(2,{message:"Street name cannot be less than 2 characters"}),dl(50,{message:"Street name cannot be more than 255 characters"})],ml.prototype,"name",2);Cl([G({message:"Select an Lga"})],ml.prototype,"lgaId",2);Cl([G({message:"Select an Lga ward"})],ml.prototype,"lgaWardId",2);const Ca={class:"flex row justify-between"},Ta={class:"q-gutter-xl"},Aa={class:"flex row justify-center q-mt-lg"},Va=M({__name:"AddStreet",emits:["addLga","addLgaWard"],setup(e){M({name:"add-street"});const a=P([]),n=P([]),o=ve("eventBus"),t=pe(),s=P(),d=P(!1);let p;const i=Se(new ml);Ne.handlePostStreet(o,{onSuccess:E,onError:g});const I=V(()=>a.value.map(y=>({label:y.name,value:y.id}))),x=V(()=>n.value.map(y=>({label:y.name,value:y.id})));$e(async()=>{await i.validate()});function T(){var y;if(!d.value){if(!Be(i)){(y=s.value)==null||y.validate();return}d.value=!0,t.loading.show({message:"Submitting ..."}),o.emit(k.POST_STREET,i),p=setTimeout(()=>{t.loading.hide()},Me)}}function E(){i.clearValues(),Y({loader:t.loading,timer:p})}function g(){Y({loader:t.loading,timer:p})}function R(y){o.emit(y)}return de(()=>i.lgaId,async y=>{n.value=await Ne.getLgaWards({lgaId:y})}),ne(async()=>{a.value=await Ne.getLgas()}),re(()=>{Y({loader:t.loading,timer:p})}),re(()=>{o.off(k.POST_STREET)}),(y,b)=>(A(),q(X,null,[l(F,null,{default:r(()=>[u("div",Ca,[l(xe,null,{default:r(()=>[ee("Add Street")]),_:1}),l(tl)])]),_:1}),l(F,null,{default:r(()=>[l(S(qe),{class:"q-px-lg",onSubmit:b[7]||(b[7]=te(()=>{},["prevent"])),ref_key:"addStreetForm",ref:s},{default:r(()=>[u("div",Ta,[l(H,{label:"Street Name",type:"text",modelValue:i.name,"onUpdate:modelValue":b[0]||(b[0]=v=>i.name=v),filled:"",outlined:"",color:"secondary","label-color":"dark",rules:[()=>y.$validateField(i,"name")]},null,8,["modelValue","rules"]),l(oe,{label:"Lga",filled:"",outlined:"",color:"secondary","label-color":"dark",options:I.value,rules:[()=>y.$validateField(i,"lgaId")],modelValue:i.lgaId,"onUpdate:modelValue":b[3]||(b[3]=v=>i.lgaId=v),"emit-value":"","map-options":"",clearable:""},{append:r(()=>[l(O,{round:"",flat:"",dense:"",icon:"add",onClick:b[1]||(b[1]=te(v=>R(S(k).TRIGGER_REMOTE_MODAL_LGA),["prevent","stop"]))})]),"no-option":r(()=>[l(Ce,null,{default:r(()=>[l(Te,{class:"text-grey"},{default:r(()=>[l(O,{label:"Add LGA",dense:"",flat:"",onClick:b[2]||(b[2]=v=>R(S(k).TRIGGER_REMOTE_MODAL_LGA))})]),_:1})]),_:1})]),_:1},8,["options","rules","modelValue"]),l(oe,{label:"LGA Ward",filled:"",outlined:"",color:"secondary","label-color":"dark",options:x.value,rules:[()=>y.$validateField(i,"lgaWardId")],modelValue:i.lgaWardId,"onUpdate:modelValue":b[6]||(b[6]=v=>i.lgaWardId=v),"emit-value":"","map-options":"",clearable:""},{append:r(()=>[l(O,{round:"",flat:"",dense:"",icon:"add",onClick:b[4]||(b[4]=te(v=>R(S(k).TRIGGER_REMOTE_MODAL_LGA_WARD),["prevent","stop"]))})]),"no-option":r(()=>[l(Ce,null,{default:r(()=>[l(Te,{class:"text-grey"},{default:r(()=>[l(O,{label:"Add LGA Ward",flat:"",dense:"",onClick:b[5]||(b[5]=v=>R(S(k).TRIGGER_REMOTE_MODAL_LGA_WARD))})]),_:1})]),_:1})]),_:1},8,["options","rules","modelValue"])]),u("div",Aa,[l(O,{style:{width:"40%"},label:"submit",type:"submit",color:"primary",rounded:"",onClick:T})])]),_:1},512)]),_:1})],64))}}),$a={class:"flex row justify-between"},xa={class:"q-gutter-md"},Ba={class:"flex row justify-center"},Ea=M({__name:"AddPropertyType",setup(e){const a=P(),n=ve("eventBus"),o=pe();let t;const s=Se(new Jl);$e(async()=>{await s.validate()});function d(){var I;Be(s)||(I=a.value)==null||I.validate(),o.loading.show({message:"Submitting ..."}),n.emit(k.POST_PROPERTY_TYPE,s),t=setTimeout(()=>{o.loading.hide()},2e3)}function p(){s.clearValues(),Y({loader:o.loading,timer:t})}function i(){Y({loader:o.loading,timer:t})}return ne(()=>{J.handlePostPropertyType(n,{onSuccess:p,onError:i})}),re(()=>{n.off(k.POST_PROPERTY_TYPE)}),(I,x)=>(A(),q(X,null,[l(F,null,{default:r(()=>[u("div",$a,[l(xe,null,{default:r(()=>[ee("Add Property Type")]),_:1}),l(tl)])]),_:1}),l(F,null,{default:r(()=>[l(S(qe),{class:"q-px-",onSubmit:x[2]||(x[2]=te(()=>{},["prevent"]))},{default:r(()=>[u("div",xa,[l(H,{label:"Name",type:"text",modelValue:s.name,"onUpdate:modelValue":x[0]||(x[0]=T=>s.name=T),filled:"",outlined:"",color:"secondary","label-color":"dark",rules:[()=>I.$validateField(s,"name")]},null,8,["modelValue","rules"]),l(H,{label:"Unit Price",type:"number",modelValue:s.unitPrice,"onUpdate:modelValue":x[1]||(x[1]=T=>s.unitPrice=T),filled:"",outlined:"",color:"secondary","label-color":"dark",rules:[()=>I.$validateField(s,"unitPrice")]},null,8,["modelValue","rules"])]),u("div",Ba,[l(O,{style:{width:"40%"},label:"submit",type:"submit",color:"primary",rounded:"",onClick:te(d,["prevent"])})])]),_:1})]),_:1})],64))}});var Oa=Object.defineProperty,La=Object.getOwnPropertyDescriptor,Da=(e,a,n,o)=>{for(var t=o>1?void 0:o?La(a,n):a,s=e.length-1,d;s>=0;s--)(d=e[s])&&(t=(o?d(a,n,t):d(t))||t);return o&&t&&Oa(a,n,t),t};class Wl extends Ve{id;name}Da([G({message:"LGA name is required"}),ul(2,{message:"LGA name must be at least 2 characters"}),dl(50,{message:"LGA name must be less than 50 characters"})],Wl.prototype,"name",2);const ka={class:"flex row justify-between"},Na={class:"flex row justify-center q-mt-lg"},Ra=M({__name:"AddLga",setup(e){M({name:"add-lga"});const a=ve("eventBus"),n=pe();let o;const t=Se(new Wl);Ne.handlePostLga(a,{onSuccess:d,onError:p}),$e(async()=>{await t.validate()});function s(){!Be(t)||(n.loading.show({message:"Submitting ..."}),a.emit(k.POST_LGA,t),o=setTimeout(()=>{n.loading.hide()},Me))}function d(){t.clearValues(),Y({loader:n.loading,timer:o})}function p(){Y({loader:n.loading,timer:o})}return re(()=>{Y({loader:n.loading,timer:o})}),re(()=>{a.off(k.POST_LGA)}),(i,I)=>(A(),q(X,null,[l(F,null,{default:r(()=>[u("div",ka,[l(xe,null,{default:r(()=>[ee("Add L.G.A.")]),_:1}),l(tl)])]),_:1}),l(F,null,{default:r(()=>[u("form",null,[u("div",null,[l(H,{label:"Name",filled:"",outlined:"","label-color":"dark",modelValue:t.name,"onUpdate:modelValue":I[0]||(I[0]=x=>t.name=x),rules:[()=>i.$validateField(t,"name")]},null,8,["modelValue","rules"])]),u("div",Na,[l(O,{style:{width:"40%"},label:"submit",type:"submit",color:"primary",rounded:"",onClick:te(s,["prevent"])})])])]),_:1})],64))}});var qa=Object.defineProperty,Ma=Object.getOwnPropertyDescriptor,Ql=(e,a,n,o)=>{for(var t=o>1?void 0:o?Ma(a,n):a,s=e.length-1,d;s>=0;s--)(d=e[s])&&(t=(o?d(a,n,t):d(t))||t);return o&&t&&qa(a,n,t),t};class Tl extends Ve{id;name;lgaId}Ql([G({message:"LGA ward name is required"}),ul(2,{message:"LGA ward name must be at least 2 characters"}),dl(50,{message:"LGA ward name must be less than 50 characters"})],Tl.prototype,"name",2);Ql([G({message:"Select an LGA"})],Tl.prototype,"lgaId",2);const Ua={class:"flex row justify-between"},Ga={class:"flex row justify-center q-mt-lg"},ja=M({__name:"AddLgaWard",setup(e){M({name:"add-lga-ward"});const a=P([]),n=P(),o=ve("eventBus"),t=pe();let s;const d=Se(new Tl);Ne.handlePostLgaWard(o,{onSuccess:I,onError:x}),$e(async()=>{console.log("this is the lgaWardId: ",d.lgaId),d.validate()});const p=V(()=>a.value.map(T=>({label:T.name,value:T.id})));function i(){if(!Be(d)){d.validate();return}t.loading.show({message:"Submitting ..."}),o.emit(k.POST_LGA_WARD,d),s=setTimeout(()=>{t.loading.hide()},Me)}function I(){d.clearValues(),Y({loader:t.loading,timer:s})}function x(){Y({loader:t.loading,timer:s})}return ne(async()=>{a.value=await Ne.getLgas()}),re(()=>{Y({loader:t.loading,timer:s})}),(T,E)=>(A(),q(X,null,[l(F,null,{default:r(()=>[u("div",Ua,[l(xe,null,{default:r(()=>[ee("Add L.G.A. Ward")]),_:1}),l(tl)])]),_:1}),l(F,null,{default:r(()=>[l(S(qe),{ref_key:"lgaWardForm",ref:n},{default:r(()=>[u("div",null,[l(H,{label:"Name",filled:"",outlined:"","label-color":"dark",modelValue:d.name,"onUpdate:modelValue":E[0]||(E[0]=g=>d.name=g),rules:[()=>T.$validateField(d,"name")]},null,8,["modelValue","rules"]),l(oe,{label:"Select L.G.A.",filled:"",outlined:"","label-color":"dark",modelValue:d.lgaId,"onUpdate:modelValue":E[1]||(E[1]=g=>d.lgaId=g),options:p.value,rules:[()=>T.$validateField(d,"lgaId")],"emit-value":"","map-options":"",clearable:""},{append:r(()=>[l(O,{flat:"",round:"",dense:"",icon:"add"})]),"no-option":r(()=>[l(Ce,null,{default:r(()=>[l(Te,null,{default:r(()=>[l(O,{label:"Create L.G.A.",flat:"",dense:""})]),_:1})]),_:1})]),_:1},8,["modelValue","options","rules"])]),u("div",Ga,[l(O,{style:{width:"40%"},label:"submit",type:"submit",color:"primary",rounded:"",onClick:te(i,["prevent"])})])]),_:1},512)]),_:1})],64))}});var le=(e=>(e.PROPERTIES="Properties",e.BILLINGS="Billings",e))(le||{}),he=(e=>(e[e.ADD_SUBSCRIBER=0]="ADD_SUBSCRIBER",e[e.ADD_STREET=1]="ADD_STREET",e[e.ADD_PROPERTY_TYPE=2]="ADD_PROPERTY_TYPE",e))(he||{}),Oe=(e=>(e[e.ADD_LGA=0]="ADD_LGA",e[e.ADD_LGA_WARD=1]="ADD_LGA_WARD",e))(Oe||{});const Fa=["top","right","bottom","left"],Hl={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>Fa.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function Yl(e,a){return{formClass:V(()=>`q-fab--form-${e.square===!0?"square":"rounded"}`),stacked:V(()=>e.externalLabel===!1&&["top","bottom"].includes(e.labelPosition)),labelProps:V(()=>{if(e.externalLabel===!0){const n=e.hideLabel===null?a.value===!1:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${e.labelPosition}`+(n===!0?" q-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${e.labelPosition}`+(e.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:e.labelStyle}}})}}const zl={start:"self-end",center:"self-center",end:"self-start"},Wa=Object.keys(zl);var Qa=Ae({name:"QFabAction",props:{...Hl,icon:{type:String,default:""},anchor:{type:String,validator:e=>Wa.includes(e)},to:[String,Object],replace:Boolean},emits:["click"],setup(e,{slots:a,emit:n}){const o=ve(Rl,()=>({showing:{value:!0},onChildClick:rt})),{formClass:t,labelProps:s}=Yl(e,o.showing),d=V(()=>{const T=zl[e.anchor];return t.value+(T!==void 0?` ${T}`:"")}),p=V(()=>e.disable===!0||o.showing.value!==!0);function i(T){o.onChildClick(T),n("click",T)}function I(){const T=[];return a.icon!==void 0?T.push(a.icon()):e.icon!==""&&T.push(U(cl,{name:e.icon})),(e.label!==""||a.label!==void 0)&&T[s.value.action](U("div",s.value.data,a.label!==void 0?a.label():[e.label])),ql(a.default,T)}const x=Je();return Object.assign(x.proxy,{click:i}),()=>U(O,{class:d.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:p.value,onClick:i},I)}});const Ha=["up","right","down","left"],Ya=["left","center","right"];var za=Ae({name:"QFab",props:{...Hl,...Ul,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{default:null},direction:{type:String,default:"right",validator:e=>Ha.includes(e)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>Ya.includes(e)}},emits:Gl,setup(e,{slots:a}){const n=P(null),o=P(e.modelValue===!0),t=ht(),{proxy:{$q:s}}=Je(),{formClass:d,labelProps:p}=Yl(e,o),i=V(()=>e.persistent!==!0),{hide:I,toggle:x}=jl({showing:o,hideOnRouteChange:i}),T=V(()=>({opened:o.value})),E=V(()=>`q-fab z-fab row inline justify-center q-fab--align-${e.verticalActionsAlign} ${d.value}`+(o.value===!0?" q-fab--opened":" q-fab--closed")),g=V(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${e.direction} q-fab__actions--${o.value===!0?"opened":"closed"}`),R=V(()=>{const D={id:t,role:"menu"};return o.value!==!0&&(D["aria-hidden"]="true"),D}),y=V(()=>`q-fab__icon-holder  q-fab__icon-holder--${o.value===!0?"opened":"closed"}`);function b(D,z){const L=a[D],m=`q-fab__${D} absolute-full`;return L===void 0?U(cl,{class:m,name:e[z]||s.iconSet.fab[z]}):U("div",{class:m},L(T.value))}function v(){const D=[];return e.hideIcon!==!0&&D.push(U("div",{class:y.value},[b("icon","icon"),b("active-icon","activeIcon")])),(e.label!==""||a.label!==void 0)&&D[p.value.action](U("div",p.value.data,a.label!==void 0?a.label(T.value):[e.label])),ql(a.tooltip,D)}return st(Rl,{showing:o,onChildClick(D){I(D),n.value!==null&&n.value.$el.focus()}}),()=>U("div",{class:E.value},[U(O,{ref:n,class:d.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":o.value===!0?"true":"false","aria-haspopup":"true","aria-controls":t,onClick:x},v),U("div",{class:g.value,...R.value},Ze(a.default))])}});const rl=M({__name:"AdvanceTableMenu",props:{menuItems:{default:()=>[]},padding:{default:"xs"}},emits:["menuItemClickHandler"],setup(e){return M({name:"advance-table-menu"}),(a,n)=>(A(),j(za,{color:"transparent","text-color":"black",icon:"keyboard_arrow_left",direction:"left",padding:"xs",margin:"xs"},{default:r(()=>[(A(!0),q(X,null,Ie(a.menuItems,o=>(A(),j(Qa,{key:o.label,icon:o.icon,color:o.color,"text-color":o.textColor,padding:"xs",onClick:t=>a.$emit("menuItemClickHandler",o)},{default:r(()=>[l(Pl,null,{default:r(()=>[ee(Re(o.label),1)]),_:2},1024)]),_:2},1032,["icon","color","text-color","onClick"]))),128))]),_:1}))}});function Xe(e,a=new WeakMap){if(Object(e)!==e)return e;if(a.has(e))return a.get(e);const n=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e instanceof Set?new Set:e instanceof Map?new Map:typeof e.constructor!="function"?Object.create(null):e.prototype!==void 0&&typeof e.prototype.constructor=="function"?e:new e.constructor;if(typeof e.constructor=="function"&&typeof e.valueOf=="function"){const o=e.valueOf();if(Object(o)!==o){const t=new e.constructor(o);return a.set(e,t),t}}return a.set(e,n),e instanceof Set?e.forEach(o=>{n.add(Xe(o,a))}):e instanceof Map&&e.forEach((o,t)=>{n.set(t,Xe(o,a))}),Object.assign(n,...Object.keys(e).map(o=>({[o]:Xe(e[o],a)})))}var Ka=Ae({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(e,{slots:a,emit:n}){const{proxy:o}=Je(),{$q:t}=o,s=P(null),d=P(""),p=P("");let i=!1;const I=V(()=>dt({initialValue:d.value,validate:e.validate,set:x,cancel:T,updatePosition:E},"value",()=>p.value,L=>{p.value=L}));function x(){e.validate(p.value)!==!1&&(g()===!0&&(n("save",p.value,d.value),n("update:modelValue",p.value)),R())}function T(){g()===!0&&n("cancel",p.value,d.value),R()}function E(){it(()=>{s.value.updatePosition()})}function g(){return ut(p.value,d.value)===!1}function R(){i=!0,s.value.hide()}function y(){i=!1,d.value=Xe(e.modelValue),p.value=Xe(e.modelValue),n("beforeShow")}function b(){n("show")}function v(){i===!1&&g()===!0&&(e.autoSave===!0&&e.validate(p.value)===!0?(n("save",p.value,d.value),n("update:modelValue",p.value)):n("cancel",p.value,d.value)),n("beforeHide")}function D(){n("hide")}function z(){const L=a.default!==void 0?[].concat(a.default(I.value)):[];return e.title&&L.unshift(U("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},e.title)),e.buttons===!0&&L.push(U("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[U(O,{flat:!0,color:e.color,label:e.labelCancel||t.lang.label.cancel,onClick:T}),U(O,{flat:!0,color:e.color,label:e.labelSet||t.lang.label.set,onClick:x})])),L}return Object.assign(o,{set:x,cancel:T,show(L){s.value!==null&&s.value.show(L)},hide(L){s.value!==null&&s.value.hide(L)},updatePosition:E}),()=>{if(e.disable!==!0)return U(Dt,{ref:s,class:"q-popup-edit",cover:e.cover,onBeforeShow:y,onShow:b,onBeforeHide:v,onHide:D,onEscapeKey:T},z)}}});async function Xa({process:e,onError:a,loader:n,useNotifer:o=!0,notifierType:t="positive",notifierMessage:s,loaderMessage:d="Please, wait!",showErrorNotifier:p=!0}){n&&n.show({message:d});try{await e(),o&&ue({type:t,...s?{message:s}:{}})}catch(i){const I=i;a==null||a(),p&&ue({type:"negative",...I.message?{message:I.message}:{}})}finally{n!=null&&n.isActive&&n.hide()}}var Za=Object.defineProperty,Ja=Object.getOwnPropertyDescriptor,Al=(e,a,n,o)=>{for(var t=o>1?void 0:o?Ja(a,n):a,s=e.length-1,d;s>=0;s--)(d=e[s])&&(t=(o?d(a,n,t):d(t))||t);return o&&t&&Za(a,n,t),t};class fl extends Ve{amount;propertySubscriptionId;reason}Al([G(),kt({},{message:"Please, enter a valid amount in numbers."})],fl.prototype,"amount",2);Al([G({message:"Property Subscription Reference not defined."})],fl.prototype,"propertySubscriptionId",2);Al([G()],fl.prototype,"reason",2);const eo=u("div",{class:"text-h4"},"Edit Arrears",-1),lo={class:"q-pa-md"},to=M({__name:"EditArrears",props:{amount:{},propertySubscriptionId:{}},emits:["updateAmount"],setup(e,{emit:a}){M({name:"edit-arrears"});const n=e,o=a,t=Se(new fl),s=pe();$e(()=>{t.validate()});async function d(){Xa({loader:s.loading,process:async()=>{if(t.validate(),!Be(t))throw console.log("Edit Areas model is invalid."),new Error("Edit Areas model is invalid.");await Il.updateArrears({arrears:t.amount,propertySubscriptionId:t.propertySubscriptionId,reason:t.reason})},onError:()=>{console.log("Error saving arrears!")},loaderMessage:"Saving ...",notifierType:"positive",notifierMessage:"Process successful",showErrorNotifier:!0})}function p(i){o("updateAmount",i),t.amount=i}return ne(()=>{t.amount=n.amount,t.propertySubscriptionId=n.propertySubscriptionId}),(i,I)=>(A(),q("div",null,[l(il,null,{default:r(()=>[l(F,null,{default:r(()=>[eo]),_:1}),l(F,null,{default:r(()=>[u("div",lo,[l(qe,null,{default:r(()=>[l(H,{"model-value":t.amount,"onUpdate:modelValue":p,label:"Amount",rules:[()=>i.$validateField(t,"amount")]},null,8,["model-value","rules"]),l(H,{modelValue:t.reason,"onUpdate:modelValue":I[0]||(I[0]=x=>t.reason=x),label:"Reason",rules:[()=>i.$validateField(t,"reason")]},null,8,["modelValue","rules"]),l(O,{label:"Save",onClick:d})]),_:1})])]),_:1})]),_:1})]))}}),Fe=M({__name:"BorderedCard",props:{bgColor:{default:"secondary"},borderColor:{default:"primary"},borderStyle:{default:"solid"},borderWidth:{default:"0.1rem"},height:{default:"100%"}},setup(e){return M({name:"bordered-card"}),(a,n)=>(A(),j(il,{style:se({borderColor:`${a.$getColor(a.borderColor)}`,borderStyle:`${a.borderStyle}`,borderWidth:`${a.borderWidth}`,backgroundColor:`${a.$getColor(a.bgColor)}`,height:a.height})},{default:r(()=>[l(F,null,{default:r(()=>[ct(a.$slots,"default")]),_:3})]),_:3},8,["style"]))}});const ao={class:"flex row justify-between q-mb-sm",style:{width:"100%",height:"12rem"}},oo={style:{width:"49.5%"}},no=u("div",{class:"text-center text-bolder text-h6"},[u("span",null,"Property")],-1),ro={class:"q-my-lg"},so=u("span",null,"Id",-1),io={class:"q-my-lg"},uo=u("span",null,"Name",-1),co={style:{width:"49.5%"}},po=u("div",{class:"text-center text-bolder text-h6"},[u("span",null,"Transaction")],-1),mo=u("span",null,"Arrears",-1),fo=u("span",null,"Last Payment",-1),vo=u("span",null,"Date of Payment",-1),bo={style:{width:"100%",height:"8rem"}},go=u("div",null,[u("p",null,[u("span",null,"Street")])],-1),yo={class:"flex row justify-evenly"},_o=u("span",null,"Number",-1),ho=u("span",null,"Name",-1),wo={style:{width:"100%",height:"8rem"}},So=u("div",null,[u("p",null,[u("span",null,"Custodian")])],-1),Po={class:"flex row justify-evenly q-mt-md"},Io=u("span",null,"Name",-1),Co=u("span",null,"Email",-1),To=u("span",null,"Phone",-1),Ao={style:{width:"100%",height:"auto"}},Vo={class:"flex row text-bolder text-h6 flex items-center"},$o=u("div",{class:"flex row justify-end",style:{width:"50%"}},[u("span",null,"Billing Details")],-1),xo={class:"flex row justify-end q-gutter-sm q-mb-sm",style:{width:"50%"}},Bo={key:0},Eo={key:1},Oo={key:2},Lo=u("div",null,null,-1),Do=M({__name:"ViewPropertyDetails",props:{dialogWidth:{default:30},propertySubscriptionId:{}},setup(e){const a=e;M({name:"view-property-details",components:{DialogCard:Ke}}),pe();const n=[{label:"Remove Row",icon:"remove",textColor:"black"}],o=[{field:"propertyTypeId",label:"Property Type Id",name:"propertyTypeId"},{field:"propertyType",label:"Property Type",name:"propertyType"},{field:"propertyUnit",label:"Property Units",name:"propertyUnit"},{field:"unitPrice",label:"Unit Price",name:"unitPrice"}],t=["propertyType","propertyUnit","unitPrice"],s=P([{propertyTypeId:"1",propertyType:"House",propertyUnit:"5",unitPrice:"N5000"}]),d=P([]),p=P(!1),i=P({}),I=P(-1),x=P(!1),T=P(""),E=P(!1),g=V(()=>d.value.map(B=>({label:`${B.name} - ${B.unitPrice}`,value:B.id})));V(()=>{if(i.value.billingAccount){const B=Number(S(i.value).billingAccount.totalBillings)-Number(S(i.value).billingAccount.totalPayments);return"N"+B}else return"N0"});const R=V(()=>{const B=i.value.payments;if(B&&B.length>0){const $=S(i.value).payments.sort((C,N)=>N.createdAt.getTime()-C.createdAt.getTime())[0];return console.log("This is the last payment --> ",$),{createdAt:$.createdAt.toDateString(),amount:$.amount}}else return{createdAt:"--/--/--",amount:"N0"}}),y=V(()=>{var C;let B={email:"",name:"",phone:""};const $=i.value.entitySubscriberProfile;return $&&(B={email:$.email,name:$.firstName+$.lastName,phone:(((C=$.phoneCode)==null?void 0:C.name)||"")+B.phone||""}),B}),b=V(()=>i.value.streetNumber?{num:S(i.value).streetNumber,name:S(i.value).street.name}:{});function v(B,$){console.log("the updated value is: -->",B);const C=d.value.find(N=>N.id===B.value);$.value=(C==null?void 0:C.name)||"",s.value[I.value].propertyTypeId=(C==null?void 0:C.id)||"",s.value[I.value].unitPrice=String((C==null?void 0:C.unitPrice)||"")}async function D(){d.value=await J.getPropertyTypes()}async function z(){x.value=!0;try{await J.savePropertyUnits({propertySubscriptionId:i.value.id,propertySubscriptionUnits:s.value}),ue({type:"positive"})}catch{ue({type:"negative"})}x.value=!1,p.value=!1}function L(){s.value.push({propertyTypeId:"",propertyType:"",propertyUnit:"",unitPrice:""})}function m(B){s.value.splice(B,1)}function c(B){I.value=B}async function h(){i.value=await J.getPropertySubscriptionDetails(a.propertySubscriptionId)}function W(){E.value=!E.value}return de(i,B=>{if(B){const $=Number(S(i.value).billingAccount.totalBillings)-Number(S(i.value).billingAccount.totalPayments);T.value=""+$}}),de(i,B=>{B&&(s.value=i.value.propertySubscriptionUnits.map($=>({propertyTypeId:$.entitySubscriberProperty.propertyType.id,propertyType:$.entitySubscriberProperty.propertyType.name,propertyUnit:$.propertyUnits,unitPrice:$.entitySubscriberProperty.propertyType.unitPrice})))}),ne(async()=>{await h()}),(B,$)=>(A(),j(Ke,{height:"auto",width:`${B.dialogWidth}rem`},{default:r(()=>[l(F,{class:"q-pa-lg flex column q-gutter-sm moderate-modal-font"},{default:r(()=>[u("div",ao,[u("div",oo,[l(Fe,null,{default:r(()=>[no,u("div",null,[u("p",ro,[so,l(ae,{class:"q-ml-sm q-pa-sm q-px-sm",label:i.value.id,rounded:""},null,8,["label"])]),u("p",io,[uo,l(ae,{class:"q-ml-sm q-pa-sm q-px-sm",label:i.value.propertySubscriptionName,rounded:""},null,8,["label"])])])]),_:1})]),u("div",co,[l(Fe,null,{default:r(()=>[po,u("div",null,[u("p",null,[mo,l(O,{flat:"",padding:"0",onClick:W},{default:r(()=>[l(wt,{class:"q-ml-sm q-pa-sm q-px-sm",label:"N"+T.value,rounded:"",color:"primary","text-color":"white","icon-right":"edit"},null,8,["label"])]),_:1}),l(He,{modelValue:E.value,"onUpdate:modelValue":$[1]||($[1]=C=>E.value=C)},{default:r(()=>[u("div",null,[l(to,{amount:T.value,"property-subscription-id":B.propertySubscriptionId,onUpdateAmount:$[0]||($[0]=C=>T.value=C)},null,8,["amount","property-subscription-id"])])]),_:1},8,["modelValue"])]),u("p",null,[fo,l(ae,{class:"q-ml-sm q-pa-sm q-px-sm",label:R.value.amount,rounded:""},null,8,["label"])]),u("p",null,[vo,l(ae,{class:"q-ml-sm q-pa-sm q-px-sm",label:R.value.createdAt,rounded:""},null,8,["label"])])])]),_:1})])]),u("div",bo,[l(Fe,null,{default:r(()=>[go,u("div",yo,[u("p",null,[_o,l(ae,{class:"q-ml-sm q-pa-sm q-px-sm",label:b.value.num,rounded:""},null,8,["label"])]),u("p",null,[ho,l(ae,{class:"q-ml-sm q-pa-sm q-px-sm",label:b.value.name,rounded:""},null,8,["label"])])])]),_:1})]),u("div",wo,[l(Fe,null,{default:r(()=>[So,u("div",Po,[u("p",null,[Io,l(ae,{class:"q-ml-sm q-pa-sm q-px-sm",label:y.value.name,rounded:""},null,8,["label"])]),u("p",null,[Co,l(ae,{class:"q-ml-sm q-pa-sm q-px-sm",label:y.value.email,rounded:""},null,8,["label"])]),u("p",null,[To,l(ae,{class:"q-ml-sm q-pa-sm q-px-sm",label:y.value.phone,rounded:""},null,8,["label"])])])]),_:1})]),u("div",Ao,[l(Fe,null,{default:r(()=>[u("div",Vo,[$o,u("div",xo,[p.value?ie("",!0):(A(),q("span",Bo,[l(O,{icon:"edit",round:"",onClick:$[2]||($[2]=C=>p.value=!0)})])),p.value?(A(),q("span",Eo,[l(O,{icon:"add",round:"",onClick:L})])):ie("",!0),p.value?(A(),q("span",Oo,[l(O,{icon:"save",round:"",onClick:z})])):ie("",!0)])]),u("div",null,[l(Qe,{bordered:"",column:o,rows:s.value,"visible-columns":t,"table-header-class":"text-bolder","table-header-style":{backgroundColor:`${B.$getColor("secondary")}`},loading:x.value,"sort-method":C=>C,onRowClick:$[4]||($[4]=C=>console.log("row with the following data was clicked: ",C))},{header:r(C=>[l(ke,{props:C},{default:r(()=>[(A(!0),q(X,null,Ie(C.cols,N=>(A(),j(It,{key:N.name,props:C,style:{textAlign:"left"}},{default:r(()=>[ee(Re(N.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:r(C=>[l(ke,{props:C,onMouseenter:N=>c(C.rowIndex)},{default:r(()=>[(A(!0),q(X,null,Ie(C.cols,(N,ce)=>(A(),j(Ye,{key:N.name,class:"text-left",style:{postion:"relative"}},{default:r(()=>[N.name==="propertyType"?(A(),q(X,{key:0},[ee(Re(C.row[N.name])+" ",1),l(Ka,{modelValue:C.row[N.name],"onUpdate:modelValue":Z=>C.row[N.name]=Z,title:"Edit the Property Type","auto-save":""},{default:r(Z=>[l(oe,{filled:"","model-value":Z.value,options:g.value,"use-input":"","input-debounce":"0",style:{width:"250px"},disable:!p.value,onKeyup:pt(Z.set,["enter"]),onPopupShow:D,"onUpdate:modelValue":ge=>v(ge,Z)},{"no-option":r(()=>[l(Ce,null,{default:r(()=>[l(Te,{class:"text-grey"},{default:r(()=>[ee(" No results ")]),_:1})]),_:1})]),_:2},1032,["model-value","options","disable","onKeyup","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])],64)):(A(),q(X,{key:1},[l(H,{modelValue:C.row[N.name],"onUpdate:modelValue":Z=>C.row[N.name]=Z,type:"text",dense:"",borderless:"",disable:!p.value},null,8,["modelValue","onUpdate:modelValue","disable"]),ce===C.cols.length-1?Le((A(),q("span",{key:0,style:se({position:"absolute",top:I.value===C.rowIndex?"0.5rem":"0",right:I.value===C.rowIndex?"0.5rem":"0",zIndex:I.value===C.rowIndex?"1":"0"})},[l(rl,{"menu-items":n,onMenuItemClickHandler:$[3]||($[3]=()=>m(I.value))})],4)),[[We,I.value===C.rowIndex]]):ie("",!0)],64))]),_:2},1024))),128))]),_:2},1032,["props","onMouseenter"])]),_:1},8,["rows","table-header-style","loading","sort-method"])]),Lo]),_:1})])]),_:1})]),_:1},8,["width"]))}});const ko={class:"row justify-between items-center"},No={class:"q-mt-xl"},Ro={class:"q-mt-lg",style:{height:"70vh"}},qo={class:"q-mb-lg",style:{width:"20rem"}},nl=80,sn=M({__name:"PropertyBillingPage",setup(e){const a=pe(),n=Rt("light-page")||"#ffffff",o=ve("eventBus"),t=[{label:"View Details",icon:"visibility",textColor:"black"},{label:"Get Defaulters",icon:"paid",textColor:"black"}],s=[{label:"View Details",icon:"visibility",textColor:"black"},{label:"View Payments",icon:"paid",textColor:"black"}],d=[{label:"Delete",icon:"remove",textColor:"black"}];J.handlePaginateSubscription(o,{onSuccess:yl,onError:_l});const p=sl[new Date().getMonth()+1],i=[{field:"propertySubscriptionId",label:"Property Subscription Id",name:"propertySubscriptionId",align:"left"},{field:"propertyName",label:"Property Name",name:"propertyName",align:"left"},{field:"oldCode",label:"Old Code",name:"oldCode",align:"left"},{field:"streetNumber",label:"Street Number",name:"streetNumber",align:"left"},{field:"streetName",label:"Street Name",name:"streetName",align:"left"},{field:"arrears",label:"Arrears",name:"arrears",align:"left"}],I=[{field:"streetId",name:"streetId",label:"streetId",align:"center"},{field:"streetName",label:"Street Name",name:"streetName",align:"center"},{field:"arrears",label:"Arrears",name:"arrears",align:"center"},{field:"totalBilling",label:"Total Billing",name:"totalBilling",align:"center"},{field:"actions",label:"Actions",name:"actions",align:"center"}],x=[{field:"streetName",label:"Street Name",name:"streetName",align:"center"},{field:"propertyName",label:"Property Name",name:"propertyName",align:"center"},{field:"currentBilling",label:"Current Billing",name:"currentBilling",align:"center"},{field:"currentBillingId",label:"Current Billing",name:"currentBillingId",align:"center"},{field:"arrears",label:"Arrears",name:"arrears",align:"center"}],T=[...x,{field:"totalBilling",label:"Total Billing",name:"totalBilling",align:"center"},{field:"lastPayment",label:"Last Payment",name:"lastPayment",align:"center"}],E=["streetName","arrears","totalBilling"],g=x.filter(w=>w.name!=="currentBillingId").map(w=>w.field),R=[...g,"totalBilling","lastPayment"],y={billing:"billing",billingDetails:"billingDetails",billingDefaulters:"defaulters"};ze.handleViewBillingDetails(o,{onSuccess:Kl}),ze.handleGetDefaulters(o,{onSuccess:Xl});const b=P(le.PROPERTIES),v=P(!1),D=P(p),z=P(!1),L=P(!1),m=P(he.ADD_SUBSCRIBER),c=P(Oe.ADD_LGA),h=P(),W=P(-1);let B=P([]);const $=P("billing"),C=P([]),N=P({page:1,rowsPerPage:3,rowsNumber:10}),ce=P(!0),Z=P(""),ge=P(!1);let ye=P();const vl=V(()=>Object.values(sl).map(w=>w)),bl=V(()=>({[le.PROPERTIES]:"Add New Property",[le.BILLINGS]:"Generate / Print Billing"})[b.value]),gl=V(()=>{var w;return(w=h.value)==null?void 0:w.map(f=>({propertySubscriptionId:f.propertySubscriptionId,propertyName:f.propertySubscriptionName,oldCode:f.oldCode,streetNumber:f.streetNumber,streetName:f.streetName,arrears:f.arrears}))}),al=V(()=>{var w;return(w=B.value)==null?void 0:w.map(f=>({streetName:f.streetName,arrears:f.arrears,streetId:f.streetId,totalBilling:f.totalBilling}))});function yl(w){ue({type:"positive"}),h.value=w==null?void 0:w.data,N.value=w==null?void 0:w.pagination}function _l(){ue({type:"negative",message:"Could not load more data!"})}async function K(w){ce.value=!0;const f=await J.getSubscriptionByPages(w);h.value=f==null?void 0:f.data,N.value=f==null?void 0:f.pagination,ce.value=!1}async function Ue(w,f){f==="View Details"?(ye.value=w,ge.value=!0):alert("This feature is under development.")}async function fe(w,f){try{w==="Delete"&&(a.loading.show({message:"Deleting ..."}),await Il.deleteBilling(f),ue({type:"positive",message:"Process successful!"}),a.loading.hide(),window.location.reload())}catch{ue({type:"negative"}),a.loading.hide()}}async function ol(w,f){f&&(console.log("payload",f),w==="View Details"?o.emit(k.VIEW_BILLING_DETAILS,{streetId:f,billingMonth:D.value}):w==="Get Defaulters"&&o.emit(k.GET_DEFAULTERS,{streetId:f}))}function Kl(w){$.value=y.billingDetails,C.value=w}function Xl(w){$.value=y.billingDefaulters,C.value=w}function _e(w){W.value=w}function Zl(){v.value=!v.value}function hl(w){z.value=!0,m.value=w}return o.on(k.TRIGGER_REMOTE_MODAL_LGA,()=>{c.value=Oe.ADD_LGA,L.value=!0}),o.on(k.TRIGGER_REMOTE_MODAL_LGA_WARD,()=>{c.value=Oe.ADD_LGA_WARD,L.value=!0}),de(Z,async w=>{if(w){ce.value=!0;const f=await J.getSubscriptionByPages({pagination:N.value,filter:Z.value});h.value=f==null?void 0:f.data,N.value=f==null?void 0:f.pagination,ce.value=!1}}),mt(async()=>{b.value===le.PROPERTIES&&(B.value=await ze.getBillingAccountArrears({page:1,limit:200}))}),de(D,async()=>{b.value===le.BILLINGS&&(B.value=await ze.getBillingAccountArrears({page:1,limit:200,month:D.value}))}),ft(()=>{a.loading.show({message:"Please, wait ..."})}),ne(()=>{a.loading.hide()}),ne(async()=>{const w=await J.getSubscriptions();h.value=w==null?void 0:w.data,N.value=w==null?void 0:w.pagination,ce.value=!1}),re(async()=>{o.off(k.VIEW_BILLING_DETAILS),o.off(k.GET_DEFAULTERS),o.off(k.PAGINATE_SUBSCRIPTION_TABLE)}),(w,f)=>(A(),j(Nt,null,{default:r(()=>[u("div",{style:se({backgroundColor:S(n),height:"100vh",padding:"0 1rem",width:"100%"})},[u("div",ko,[u("div",No,[l(et,{modelValue:b.value,"onUpdate:modelValue":f[0]||(f[0]=_=>b.value=_),dense:"","active-color":"dark","active-bg-color":"secondary"},{default:r(()=>[l(Vl,{name:S(le).PROPERTIES,icon:"house",label:S(le).PROPERTIES,style:{width:"15rem"}},null,8,["name","label"]),l(Vl,{name:S(le).BILLINGS,icon:"receipt",label:S(le).BILLINGS,style:{width:"15rem"}},null,8,["name","label"])]),_:1},8,["modelValue"])]),u("div",null,[l(O,{color:"primary",rounded:"",onClick:Zl},{default:r(()=>[ee(Re(bl.value),1)]),_:1})])]),u("div",Ro,[l(lt,{modelValue:b.value,"onUpdate:modelValue":f[9]||(f[9]=_=>b.value=_),style:{"background-color":"inherit",height:"100%"}},{default:r(()=>[l($l,{name:S(le).PROPERTIES},{default:r(()=>[u("div",null,[l(il,{rounded:"",class:"bg-accent"},{default:r(()=>[l(F,null,{default:r(()=>[l(Qe,{class:"header-sticky",rows:gl.value,bordered:"",columns:i,"table-header-style":{backgroundColor:`${w.$getColor("secondary")}`},onRequest:K,pagination:N.value,"onUpdate:pagination":f[3]||(f[3]=_=>N.value=_),loading:ce.value,filter:Z.value},{"top-right":r(()=>[l(H,{borderless:"",dense:"",debounce:"300",modelValue:Z.value,"onUpdate:modelValue":f[1]||(f[1]=_=>Z.value=_),placeholder:"Search"},{append:r(()=>[l(cl,{name:"search"})]),_:1},8,["modelValue"])]),body:r(_=>[l(ke,{props:_,onMouseenter:Q=>_e(_.rowIndex),onMouseleave:f[2]||(f[2]=Q=>_e(-1))},{default:r(()=>[(A(!0),q(X,null,Ie(_.cols,(Q,Ge)=>(A(),j(Ye,{key:Q.name},{default:r(()=>[l(ae,{label:Q.value,class:"text-bold",style:se({backgroundColor:"transparent",color:`${w.$getColor("dark")}`})},null,8,["label","style"]),Ge===_.cols.length-1?Le((A(),q("span",{key:0,style:se({position:"absolute",top:W.value===_.rowIndex?"0.5rem":"0",right:W.value===_.rowIndex?"0.5rem":"0",zIndex:W.value===_.rowIndex?"1":"0"})},[l(rl,{"menu-items":s,onMenuItemClickHandler:je=>Ue(_.row.propertySubscriptionId,je.label)},null,8,["onMenuItemClickHandler"])],4)),[[We,W.value===_.rowIndex]]):ie("",!0)]),_:2},1024))),128))]),_:2},1032,["props","onMouseenter"])]),_:1},8,["rows","table-header-style","pagination","loading","filter"])]),_:1})]),_:1})])]),_:1},8,["name"]),l($l,{name:S(le).BILLINGS},{default:r(()=>[u("div",qo,[l(oe,{style:{width:"100%"},modelValue:D.value,"onUpdate:modelValue":f[4]||(f[4]=_=>D.value=_),label:"Month",filled:"",outlined:"","label-color":"dark",options:vl.value,clearable:"","map-options":"","emit-value":""},null,8,["modelValue","options"])]),u("div",null,[l(il,{rounded:"",class:"bg-accent"},{default:r(()=>[Le(l(F,null,{default:r(()=>[l(O,{icon:"arrow_back",flat:"",onClick:f[5]||(f[5]=_=>$.value=y.billing)})]),_:1},512),[[We,$.value!==y.billing]]),l(F,null,{default:r(()=>[$.value===y.billing?(A(),j(Qe,{key:0,bordered:"",columns:I,rows:al.value,"visible-columns":E,"table-header-class":"text-bolder","table-header-style":{backgroundColor:`${w.$getColor("secondary")}`}},{body:r(_=>[l(ke,{props:_,onMouseenter:Q=>_e(_.rowIndex),onMouseleave:f[6]||(f[6]=Q=>_e(-1))},{default:r(()=>[(A(!0),q(X,null,Ie(_.cols,(Q,Ge)=>(A(),j(Ye,{key:Q.name,class:"text-center",style:{postion:"relative"}},{default:r(()=>[l(ae,{label:Q.value,class:"text-bold",style:se({backgroundColor:"transparent",color:`${w.$getColor("dark")}`})},null,8,["label","style"]),Ge===_.cols.length-1?Le((A(),q("span",{key:0,style:se({position:"absolute",top:W.value===_.rowIndex?"0.5rem":"0",right:W.value===_.rowIndex?"0.5rem":"0",zIndex:W.value===_.rowIndex?"1":"0"})},[l(rl,{"menu-items":t,onMenuItemClickHandler:je=>ol(je.label,_.row.streetId)},null,8,["onMenuItemClickHandler"])],4)),[[We,W.value===_.rowIndex]]):ie("",!0)]),_:2},1024))),128))]),_:2},1032,["props","onMouseenter"])]),_:1},8,["rows","table-header-style"])):$.value===y.billingDefaulters?(A(),j(Qe,{key:1,bordered:"",columns:x,rows:C.value,"visible-columns":S(g),"table-header-class":"text-bolder","table-header-style":{backgroundColor:`${w.$getColor("secondary")}`},title:"Billings Payment Defaulters"},{body:r(_=>[l(ke,{props:_,onMouseenter:Q=>_e(_.rowIndex),onMouseleave:f[7]||(f[7]=Q=>_e(-1))},{default:r(()=>[(A(!0),q(X,null,Ie(_.cols,Q=>(A(),j(Ye,{key:Q.name,class:"text-center",style:{postion:"relative"}},{default:r(()=>[l(ae,{label:Q.value,class:"text-bold",style:se({backgroundColor:"transparent",color:`${w.$getColor("dark")}`})},null,8,["label","style"])]),_:2},1024))),128))]),_:2},1032,["props","onMouseenter"])]),_:1},8,["rows","visible-columns","table-header-style"])):$.value===y.billingDetails?(A(),j(Qe,{key:2,bordered:"",columns:T,rows:C.value,"visible-columns":R,"table-header-class":"text-bolder","table-header-style":{backgroundColor:`${w.$getColor("secondary")}`},title:"Billing Details"},{body:r(_=>[l(ke,{props:_,onMouseenter:Q=>_e(_.rowIndex),onMouseleave:f[8]||(f[8]=Q=>_e(-1))},{default:r(()=>[(A(!0),q(X,null,Ie(_.cols,(Q,Ge)=>(A(),j(Ye,{key:Q.name,class:"text-center",style:{postion:"relative"}},{default:r(()=>[l(ae,{label:Q.value,class:"text-bold",style:se({backgroundColor:"transparent",color:`${w.$getColor("dark")}`})},null,8,["label","style"]),Ge===_.cols.length-1?Le((A(),q("span",{key:0,style:se({position:"absolute",top:W.value===_.rowIndex?"0.5rem":"0",right:W.value===_.rowIndex?"0.5rem":"0",zIndex:W.value===_.rowIndex?"1":"0"})},[l(rl,{"menu-items":d,onMenuItemClickHandler:je=>fe(je.label,_.row.currentBillingId)},null,8,["onMenuItemClickHandler"])],4)),[[We,W.value===_.rowIndex]]):ie("",!0)]),_:2},1024))),128))]),_:2},1032,["props","onMouseenter"])]),_:1},8,["rows","table-header-style"])):ie("",!0)]),_:1})]),_:1})])]),_:1},8,["name"])]),_:1},8,["modelValue"])]),l(He,{modelValue:v.value,"onUpdate:modelValue":f[13]||(f[13]=_=>v.value=_)},{default:r(()=>[l(Ke,{height:"auto",width:`${nl}rem`},{default:r(()=>[b.value===S(le).PROPERTIES?(A(),j(la,{key:0,onAddSubscriber:f[10]||(f[10]=_=>hl(S(he).ADD_SUBSCRIBER)),onAddStreet:f[11]||(f[11]=_=>hl(S(he).ADD_STREET)),onAddPropertyType:f[12]||(f[12]=_=>hl(S(he).ADD_PROPERTY_TYPE))})):b.value===S(le).BILLINGS?(A(),j(ma,{key:1})):ie("",!0)]),_:1},8,["width"])]),_:1},8,["modelValue"]),l(He,{modelValue:z.value,"onUpdate:modelValue":f[14]||(f[14]=_=>z.value=_),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:r(()=>[l(Ke,{height:"auto",width:`${nl-30}rem`},{default:r(()=>[m.value===S(he).ADD_SUBSCRIBER?(A(),j(Sa,{key:0})):m.value===S(he).ADD_STREET?(A(),j(Va,{key:1})):m.value===S(he).ADD_PROPERTY_TYPE?(A(),j(Ea,{key:2})):ie("",!0)]),_:1},8,["width"])]),_:1},8,["modelValue"]),l(He,{modelValue:L.value,"onUpdate:modelValue":f[15]||(f[15]=_=>L.value=_),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:r(()=>[l(Ke,{height:"auto",width:`${nl}rem`},{default:r(()=>[c.value===S(Oe).ADD_LGA?(A(),j(Ra,{key:0})):c.value===S(Oe).ADD_LGA_WARD?(A(),j(ja,{key:1})):ie("",!0)]),_:1},8,["width"])]),_:1},8,["modelValue"]),l(He,{modelValue:ge.value,"onUpdate:modelValue":f[16]||(f[16]=_=>ge.value=_)},{default:r(()=>[l(Do,{dialogWidth:nl,"property-subscription-id":S(ye)},null,8,["property-subscription-id"])]),_:1},8,["modelValue"])],4)]),_:1}))}});export{sn as default};
