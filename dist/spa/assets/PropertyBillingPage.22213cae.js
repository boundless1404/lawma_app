import{M as il,a as ul,P as Zl,Q as Tl,b as et,c as Vl,d as lt}from"./PropertyType.model.452cab07.js";import{bV as Te,c as $,h as M,bY as Ke,g as Xe,r as C,w as ne,aI as re,bT as Al,bO as $l,cc as tt,bo as at,bU as ot,d as G,i as fe,b$ as Nl,C as Ve,o as de,aQ as V,ae as q,f as l,bj as r,F as X,al as ee,O as I,bH as te,af as i,cj as k,c0 as dl,ck as hl,b_ as nt,X as Le,W as se,U as xl,bl as Be,ac as U,bM as rt,cl as Rl,c1 as ql,aS as st,aW as Pe,aF as it,cm as ut,cn as dt,aX as ct,bG as Bl,ad as ie,bF as Fe,bf as pt,aH as mt}from"./index.6e5bb15d.js";import{V as ft,g as vt,a as bt,b as gt,c as yt,B as De,I as F,d as Ne,E as N,Q as Je,e as Y,u as ht,f as _t}from"./index.bb0861fb.js";import{Q as ae}from"./QBadge.12c89d31.js";import{u as Ml,_ as Ae,l as Re,a as ue,m as sl,y as wt,C as St,L as ke,b as Ye,Q as We,c as Pt}from"./ClosePopup.62f520c9.js";import{b as Q,Q as _l}from"./QCard.7900170c.js";import{u as It,a as Ct,v as Ol,b as Tt,c as Vt,d as At,e as $t,f as xt,g as Bt,r as El,s as Ot,p as kl,h as Et,i as ve,P as Z,Q as oe,j as kt,k as ol}from"./PropertySubscription.handler.8656928c.js";import{Q as Lt}from"./QPage.a9bdcaad.js";import{g as Dt}from"./get-css-var.23548d6a.js";import{u as Ul,a as Gl,b as Nt,d as jl,c as Ll,Q as Ie,h as Ce}from"./format.9709b4ed.js";import{Q as wl,u as Rt,a as qt,b as Mt}from"./QCheckbox.7f52c839.js";import{c as H,i as qe}from"./utils.01331f21.js";import{api as Fl}from"./axios.a29f2008.js";import{U as we}from"./urlPaths.enum.9088486d.js";import{r as Oe}from"./default.request.d85cb2a5.js";import{u as Ut}from"./billing-store.61550260.js";import{I as Gt}from"./IsEmail.47136ce0.js";import"./QResizeObserver.49d80734.js";import"./touch.3df10340.js";import"./QList.52b121aa.js";import"./storeforage.97ed9bd7.js";var Qe=Te({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:t}){const n=Xe(),a=$(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return M("td",{class:a.value},Ke(t.default));const o=n.vnode.key,s=(e.props.colsMap!==void 0?e.props.colsMap[o]:null)||e.props.col;if(s===void 0)return;const{row:u}=e.props;return M("td",{class:a.value+s.__tdClass(u),style:s.__tdStyle(u)},Ke(t.default))}}}),Ee=Te({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:t}){const n=$(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>M("tr",{class:n.value},Ke(t.default))}}),Sl=Te({name:"QTooltip",inheritAttrs:!1,props:{...It,...Ul,...Ct,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:Ol},self:{type:String,default:"top middle",validator:Ol},offset:{type:Array,default:()=>[14,14],validator:Tt},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...Gl],setup(e,{slots:t,emit:n,attrs:a}){let o,s;const u=Xe(),{proxy:{$q:f}}=u,d=C(null),w=C(!1),A=$(()=>kl(e.anchor,f.lang.rtl)),T=$(()=>kl(e.self,f.lang.rtl)),O=$(()=>e.persistent!==!0),{registerTick:g,removeTick:R}=Vt(),{registerTimeout:h}=Nt(),{transitionProps:b,transitionStyle:v}=At(e),{localScrollTarget:L,changeScrollEvent:z,unconfigureScrollTarget:E}=$t(e,tl),{anchorEl:p,canShow:c,anchorEvents:_}=xt({showing:w,configureAnchorEl:vl}),{show:j,hide:B}=jl({showing:w,canShow:c,handleShow:ce,handleHide:J,hideOnRouteChange:O,processOnMount:!0});Object.assign(_,{delayShow:ml,delayHide:fl});const{showPortal:x,hidePortal:P,renderPortal:D}=Bt(u,d,gl,"tooltip");if(f.platform.is.mobile===!0){const K={anchorEl:p,innerRef:d,onClickOutside(me){return B(me),me.target.classList.contains("q-dialog__backdrop")&&ot(me),!0}},Me=$(()=>e.modelValue===null&&e.persistent!==!0&&w.value===!0);ne(Me,me=>{(me===!0?Et:El)(K)}),re(()=>{El(K)})}function ce(K){x(),g(()=>{s=new MutationObserver(()=>ye()),s.observe(d.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),ye(),tl()}),o===void 0&&(o=ne(()=>f.screen.width+"|"+f.screen.height+"|"+e.self+"|"+e.anchor+"|"+f.lang.rtl,ye)),h(()=>{x(!0),n("show",K)},e.transitionDuration)}function J(K){R(),P(),ge(),h(()=>{P(!0),n("hide",K)},e.transitionDuration)}function ge(){s!==void 0&&(s.disconnect(),s=void 0),o!==void 0&&(o(),o=void 0),E(),Al(_,"tooltipTemp")}function ye(){Ot({targetEl:d.value,offset:e.offset,anchorEl:p.value,anchorOrigin:A.value,selfOrigin:T.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function ml(K){if(f.platform.is.mobile===!0){Ll(),document.body.classList.add("non-selectable");const Me=p.value,me=["touchmove","touchcancel","touchend","click"].map(al=>[Me,al,"delayHide","passiveCapture"]);$l(_,"tooltipTemp",me)}h(()=>{j(K)},e.delay)}function fl(K){f.platform.is.mobile===!0&&(Al(_,"tooltipTemp"),Ll(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),h(()=>{B(K)},e.hideDelay)}function vl(){if(e.noParentEvent===!0||p.value===null)return;const K=f.platform.is.mobile===!0?[[p.value,"touchstart","delayShow","passive"]]:[[p.value,"mouseenter","delayShow","passive"],[p.value,"mouseleave","delayHide","passive"]];$l(_,"anchor",K)}function tl(){if(p.value!==null||e.scrollTarget!==void 0){L.value=tt(p.value,e.scrollTarget);const K=e.noParentEvent===!0?ye:B;z(L.value,K)}}function bl(){return w.value===!0?M("div",{...a,ref:d,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",a.class],style:[a.style,v.value],role:"tooltip"},Ke(t.default)):null}function gl(){return M(at,b.value,bl)}return re(ge),Object.assign(u.proxy,{updatePosition:ye}),D}});function Ze(e){return function(t,n){var a={type:ft.CONDITIONAL_VALIDATION,target:t.constructor,propertyName:n,constraints:[function(o,s){return o[n]!==null&&o[n]!==void 0}],validationOptions:e};vt().addValidationMetadata(new bt(a))}}var jt="isBoolean";function Ft(e){return e instanceof Boolean||typeof e=="boolean"}function Wt(e){return gt({name:jt,validator:{validate:function(t,n){return Ft(t)},defaultMessage:yt(function(t){return t+"$property must be a boolean value"},e)}},e)}var Qt=Object.defineProperty,Ht=Object.getOwnPropertyDescriptor,be=(e,t,n,a)=>{for(var o=a>1?void 0:a?Ht(t,n):t,s=e.length-1,u;s>=0;s--)(u=e[s])&&(o=(a?u(t,n,o):u(o))||o);return a&&o&&Qt(t,n,o),o};class pe extends De{id;propertyName;propertyUnit;expectedMonthlyCost;propertyTypeId;streetId;streetNumber;oldCode;propertySubscriberProfileId;isOwner=!1}be([F({message:"Please, enter the property name"})],pe.prototype,"propertyName",2);be([F({message:"Please, enter the property unit"})],pe.prototype,"propertyUnit",2);be([Ze()],pe.prototype,"expectedMonthlyCost",2);be([F({message:"Please, select the property type"})],pe.prototype,"propertyTypeId",2);be([F({message:"Please, select the street"})],pe.prototype,"streetId",2);be([F({message:"Please, enter the street number"})],pe.prototype,"streetNumber",2);be([Ze()],pe.prototype,"oldCode",2);be([F({message:"Please, select a custiodian"})],pe.prototype,"propertySubscriberProfileId",2);be([Wt()],pe.prototype,"isOwner",2);const Yt={class:"row justify-between"},zt={class:"q-gutter-xl"},Kt={class:"q-gutter-xl"},Xt={style:{width:"20rem"}},Jt={class:"row justify-center q-mt-xl",style:{width:"100%"}},Zt=G({__name:"NewPropertySubscription",emits:["addSubscriber","addPropertyType","addStreet"],setup(e,{emit:t}){G({name:"new-property-subscription"});const n=t,a=fe("eventBus"),o={width:"35rem"},s={width:"30rem"},u=ve();Z.handlePostSubscription(a,{onSuccess:L,onError:z});const f=Ml();let d;const w=C(),A=C([]),T=C([]),{streets:O}=Nl(f),g=Ve(new pe),R=$(()=>A.value.map(p=>({label:p.firstName+" "+p.lastName,value:p.id}))),h=$(()=>T.value.map(p=>({label:`${p.name} - ${p.unitPrice}`,value:p.id}))),b=$(()=>{var p;return(p=O==null?void 0:O.value)==null?void 0:p.map(c=>({label:c.name,value:c.id}))});Ne(async()=>{g.validate()});async function v(){var p;if(g.validate(),!qe(g)){console.log("the following errors exist",g.errors),await((p=w.value)==null?void 0:p.validate());return}u.loading.show({message:"Submitting ..."}),a.emit(N.NEW_PROPERTY_SUBSCRIPTION,g),d=setTimeout(()=>{u.loading.hide()},Re)}function L(){g.clearValues(),H({loader:u.loading,timer:d})}function z(){H({loader:u.loading,timer:d})}function E(p){n(p)}return ne([()=>g.propertyTypeId,()=>g.propertyUnit],([p,c])=>{if(p&&c){const _=T.value.find(j=>j.id===p);return g.expectedMonthlyCost=String(Number(_==null?void 0:_.unitPrice)*c),g.expectedMonthlyCost}}),de(async()=>{try{O!=null&&O.value||f.fetchServerData({type:"street"}),T.value=await Z.getPropertyTypes(),A.value=await Z.getSubscriberUsers()}catch(p){console.log(p)}}),re(()=>{a.off(N.NEW_PROPERTY_SUBSCRIPTION)}),(p,c)=>(V(),q(X,null,[l(Q,{class:"text-center"},{default:r(()=>[l(Ae,null,{default:r(()=>[ee("New Property Subscription")]),_:1})]),_:1}),l(Q,null,{default:r(()=>[l(I(Je),{class:"q-pa-md",style:{height:"100%"},onSubmit:c[15]||(c[15]=te(()=>{},["prevent"])),ref_key:"propertySubscriptionForm",ref:w},{default:r(()=>[i("div",Yt,[i("div",zt,[l(Y,{style:s,label:"Property Name",type:"text",modelValue:g.propertyName,"onUpdate:modelValue":c[0]||(c[0]=_=>g.propertyName=_),filled:"",outlined:"",color:"secondary","label-color":"dark",rules:[()=>p.$validateField(g,"propertyName")]},null,8,["modelValue","rules"]),l(Y,{style:s,label:"Property Unit",type:"text",modelValue:g.propertyUnit,"onUpdate:modelValue":c[1]||(c[1]=_=>g.propertyUnit=_),filled:"",outlined:"",color:"secondary","label-color":"dark",rules:[()=>p.$validateField(g,"propertyUnit")]},null,8,["modelValue","rules"]),l(Y,{style:s,label:"Expected Monthly Cost",type:"text",modelValue:g.expectedMonthlyCost,"onUpdate:modelValue":c[2]||(c[2]=_=>g.expectedMonthlyCost=_),filled:"",outlined:"",color:"secondary","label-color":"dark"},{default:r(()=>[l(Sl,null,{default:r(()=>[ee("Expected Monthly Cost")]),_:1})]),_:1},8,["modelValue"]),l(Y,{style:s,label:"Old Code",type:"text",modelValue:g.oldCode,"onUpdate:modelValue":c[3]||(c[3]=_=>g.oldCode=_),filled:"",outlined:"",color:"secondary","label-color":"dark"},null,8,["modelValue"])]),i("div",Kt,[i("div",{class:"row",style:o},[l(I(oe),{style:{width:"70%"},label:"Street",filled:"",outlined:"",modelValue:g.streetId,"onUpdate:modelValue":c[6]||(c[6]=_=>g.streetId=_),color:"secondary","label-color":"dark",options:b.value,rules:[()=>p.$validateField(g,"streetId")],clearable:"","emit-value":"","map-options":""},{append:r(()=>[l(I(k),{round:"",flat:"",dense:"",icon:"add",onClick:c[4]||(c[4]=te(_=>E("addStreet"),["prevent","stop"]))})]),"no-option":r(()=>[l(Ie,null,{default:r(()=>[l(Ce,{class:"text-grey"},{default:r(()=>[l(I(k),{flat:"",dense:"",label:"Add Street",onClick:c[5]||(c[5]=_=>E("addStreet"))})]),_:1})]),_:1})]),_:1},8,["modelValue","options","rules"]),l(Y,{style:{width:"30%"},label:"Number",type:"text",modelValue:g.streetNumber,"onUpdate:modelValue":c[7]||(c[7]=_=>g.streetNumber=_),filled:"",outlined:"",color:"secondary","label-color":"dark"},{default:r(()=>[l(Sl,null,{default:r(()=>[ee("Street Number")]),_:1})]),_:1},8,["modelValue"])]),i("div",{style:o},[l(I(oe),{style:{width:"100%"},label:"Property Type",filled:"",outlined:"",modelValue:g.propertyTypeId,"onUpdate:modelValue":c[10]||(c[10]=_=>g.propertyTypeId=_),color:"secondary","label-color":"dark",options:h.value,clearable:"",rules:[()=>p.$validateField(g,"propertyTypeId")],"emit-value":"","map-options":""},{append:r(()=>[l(I(k),{round:"",dense:"",flat:"",icon:"add",onClick:c[8]||(c[8]=te(_=>E("addPropertyType"),["prevent","stop"]))})]),"no-option":r(()=>[l(Ie,null,{default:r(()=>[l(Ce,{class:"text-grey"},{default:r(()=>[l(I(k),{dense:"",flat:"",label:"Add Property Type",onClick:c[9]||(c[9]=_=>E("addPropertyType"))})]),_:1})]),_:1})]),_:1},8,["modelValue","options","rules"])]),i("div",{style:o},[l(I(oe),{style:{width:"100%"},label:"Custodian",filled:"",outlined:"",modelValue:g.propertySubscriberProfileId,"onUpdate:modelValue":c[13]||(c[13]=_=>g.propertySubscriberProfileId=_),color:"secondary","label-color":"dark",clearable:"",options:R.value,rules:[()=>p.$validateField(g,"propertySubscriberProfileId")],"emit-value":"","map-options":""},{append:r(()=>[l(I(k),{round:"",dense:"",flat:"",icon:"add",onClick:c[11]||(c[11]=te(_=>E("addSubscriber"),["prevent","stop"]))})]),"no-option":r(()=>[l(Ie,null,{default:r(()=>[l(Ce,{class:"text-grey"},{default:r(()=>[l(I(k),{dense:"",flat:"",label:"Add Subscriber",onClick:c[12]||(c[12]=_=>E("addSubscriber"))})]),_:1})]),_:1})]),_:1},8,["modelValue","options","rules"])]),i("div",Xt,[l(wl,{label:"Is Owner",modelValue:g.isOwner,"onUpdate:modelValue":c[14]||(c[14]=_=>g.isOwner=_),color:"primary"},null,8,["modelValue"])])])]),i("div",Jt,[l(I(k),{style:{width:"40%"},label:"Submit",rounded:"",color:"primary",type:"submit",onClick:te(v,["prevent"])})])]),_:1},512)]),_:1})],64))}});var ea=Te({name:"QToggle",props:{...Rt,icon:String,iconColor:String},emits:qt,setup(e){function t(n,a){const o=$(()=>(n.value===!0?e.checkedIcon:a.value===!0?e.indeterminateIcon:e.uncheckedIcon)||e.icon),s=$(()=>n.value===!0?e.iconColor:null);return()=>[M("div",{class:"q-toggle__track"}),M("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},o.value!==void 0?[M(dl,{name:o.value,color:s.value})]:void 0)]}return Mt("toggle",t)}}),la=Object.defineProperty,ta=Object.getOwnPropertyDescriptor,cl=(e,t,n,a)=>{for(var o=a>1?void 0:a?ta(t,n):t,s=e.length-1,u;s>=0;s--)(u=e[s])&&(o=(a?u(t,n,o):u(o))||o);return a&&o&&la(t,n,o),o};class el extends De{streetId;propertySuscriptionId;month;year;type;forAllProperties;forPropertiesOnStreet}cl([Ze()],el.prototype,"streetId",2);cl([F({message:"Please, select the property subscsription"})],el.prototype,"propertySuscriptionId",2);cl([F({message:"Please, select the month"})],el.prototype,"month",2);cl([F({message:"Please, select the year"})],el.prototype,"year",2);async function aa(e){const t=await Fl.post(we.BILLING,e);if(t.status===201)return t.data;throw new Error("Attempt to generate billing failed",{cause:t.data})}async function oa(e){const t=await Fl.get(we.BILLING,{params:e});if(t.status===200)return t.data;throw new Error("Could not fetch billings")}class Pl{static async handGenerateBilling(t,{onSuccess:n,onError:a}={}){t.on(N.GENERATE_BILLING,async o=>{try{await aa(o),n==null||n(),hl.create({message:"Process was successful",color:"positive"})}catch(s){a==null||a(),hl.create({message:s.message,color:"negative",icon:"warning",timeout:5e3})}})}static async getBilling(t){try{return await oa(t)}catch(n){hl.create({message:n.message,color:"negative",icon:"warning",timeout:5e3})}}static async deleteBilling(t){return await Oe(we.BILLING,"delete",{params:{billingId:t}})}static async updateArrears(t){await Oe(we.UPDATE_ARREARS,"put",{body:t})}}class He{static async getBillingAccountArrears(t){try{const n=t.limit,a=t.page;return await Oe(we.BILLING_ACCOUNT_ARREARS,"get",{params:{limit:n,page:a,month:t.month}})}catch{ue({type:"negative"})}}static async handleViewBillingDetails(t,{onSuccess:n,onError:a}={}){t.on(N.VIEW_BILLING_DETAILS,async({streetId:o,billingMonth:s})=>{try{const u=await Oe(we.BILLING_ACCOUNT_DETAILS.replace(":streetId",o),"get",{params:{billingMonth:s}});n==null||n(u)}catch(u){a==null||a(u),ue({type:"negative"})}})}static async handleGetDefaulters(t,{onSuccess:n,onError:a}={}){t.on(N.GET_DEFAULTERS,async({streetId:o})=>{try{const s=await Oe(we.BILLING_ACCOUNT_DEFAULTER.replace(":streetId",o),"get");n==null||n(s)}catch(s){a==null||a(s),ue({type:"negative"})}})}static async getBillingsForPrinting(t,n){const a=await Oe(we.BILLING_ACCOUNT_DETAILS.replace(":streetId",t),"get",{params:{billingMonth:n}});return Ut().updateBilling({type:"billingDetail",data:a}),a}}const na={class:"row justify-between q-my-lg"},ra={class:"q-gutter-xl",style:{width:"40%"}},sa={class:"q-gutter-xl",style:{width:"50%"}},ia={class:"row justify-between q-mt-md",style:{height:"7rem"}},ua={class:"column"},da={class:"column justify-end",style:{height:"100%"}},ca=G({__name:"GenerateBill",setup(e){G({name:"generate-bill"});const t=Ml(),n=sl[new Date().getMonth()+1],a=fe("eventBus"),o=ve(),s=nt();let u;Pl.handGenerateBilling(a,{onSuccess:z,onError:E});const f=C("generate"),{streets:d}=Nl(t),w=C(),A=C(),T=$(()=>f.value==="print"?"Print Bill":"Generate Bill"),O=$(()=>wt),g=$(()=>Object.values(sl).map(p=>p)),R=$(()=>f.value==="print"?"Print":"Generate"),h=$(()=>{var p;return(p=d==null?void 0:d.value)==null?void 0:p.map(c=>({label:c.name,value:c.id}))}),b=$(()=>{var p;return(p=w.value)==null?void 0:p.map(c=>({label:c.propertySubscriptionName,value:c.propertySubscriptionId}))}),v=Ve(new el);async function L(){if(o.loading.show({message:"Please, wait ..."}),v.type==="print"){await He.getBillingsForPrinting(v.streetId,v.month),s.push("/print");return}else a.emit(N.GENERATE_BILLING,v);u=setTimeout(()=>{o.loading.show()},Re)}function z(){v.clearValues(),H({loader:o.loading,timer:u})}function E(){H({loader:o.loading,timer:u})}return ne(f,p=>{p&&(v.type=p)}),ne(()=>v.forAllProperties,p=>{p&&(v.forPropertiesOnStreet=!1)}),ne(()=>v.streetId,async p=>{if(console.log("this is the new val from watch on streetId",p),p){v.propertySuscriptionId="";const c=await Z.getSubscriptions({streetId:p});w.value=c==null?void 0:c.data}}),de(()=>{v.month=n,v.year=String(new Date().getFullYear()),v.type=f.value}),de(async()=>{d!=null&&d.value||await t.fetchServerData({type:"street"})}),de(async()=>{const p=await Z.getSubscriptions();w.value=p==null?void 0:p.data}),re(()=>{H({loader:o.loading,timer:u})}),(p,c)=>(V(),q(X,null,[l(Q,{class:"row justify-between"},{default:r(()=>[i("div",{style:se({color:`${p.$getColor("primary")}`})},[l(Ae,{"header-text-size":"h5"},{default:r(()=>[ee(Le(T.value),1)]),_:1})],4),i("div",null,[i("span",{class:xl([f.value==="print"?"text-primary":""])},"Print Bill",2),l(ea,{"toggle-indeterminate":!1,"toggle-order":"tf","true-value":"generate","false-value":"print",modelValue:f.value,"onUpdate:modelValue":c[0]||(c[0]=_=>f.value=_),"keep-color":""},null,8,["modelValue"]),i("span",{class:xl([f.value!=="print"?"text-primary":""])},"Generate Bill",2)])]),_:1}),l(Q,null,{default:r(()=>[i("form",{class:"q-pa-md",style:{height:"100%"},onSubmit:c[7]||(c[7]=te(()=>{},["prevent"])),ref_key:"billingModelForm",ref:A},[i("div",na,[i("div",ra,[l(oe,{label:"Street",modelValue:v.streetId,"onUpdate:modelValue":c[1]||(c[1]=_=>v.streetId=_),filled:"",outlined:"",color:"secondary","label-color":"dark",options:h.value,"emit-value":"","map-options":""},null,8,["modelValue","options"]),l(oe,{modelValue:v.month,"onUpdate:modelValue":c[2]||(c[2]=_=>v.month=_),label:"Month",type:"text",filled:"",outlined:"",color:"secondary","label-color":"dark",options:g.value},null,8,["modelValue","options"])]),i("div",sa,[l(oe,{modelValue:v.propertySuscriptionId,"onUpdate:modelValue":c[3]||(c[3]=_=>v.propertySuscriptionId=_),label:"Property Subscription Id",type:"text",filled:"",outlined:"",color:"secondary","label-color":"dark",options:b.value,"emit-value":"","map-options":""},null,8,["modelValue","options"]),l(oe,{modelValue:v.year,"onUpdate:modelValue":c[4]||(c[4]=_=>v.year=_),label:"Year",type:"text",filled:"",outlined:"",options:O.value,color:"secondary","label-color":"dark","emit-value":"","map-options":""},null,8,["modelValue","options"])])]),i("div",ia,[i("div",ua,[l(wl,{label:`${R.value} for properties on street.`,modelValue:v.forPropertiesOnStreet,"onUpdate:modelValue":c[5]||(c[5]=_=>v.forPropertiesOnStreet=_),disable:v.forAllProperties},null,8,["label","modelValue","disable"]),l(wl,{label:`${R.value} all bills.`,modelValue:v.forAllProperties,"onUpdate:modelValue":c[6]||(c[6]=_=>v.forAllProperties=_)},null,8,["label","modelValue"])]),i("div",da,[l(k,{rounded:"",color:"primary",onClick:L},{default:r(()=>[ee(Le(f.value==="print"?"Print":"Generate"),1)]),_:1})])])],544)]),_:1})],64))}});var pa=Object.defineProperty,ma=Object.getOwnPropertyDescriptor,$e=(e,t,n,a)=>{for(var o=a>1?void 0:a?ma(t,n):t,s=e.length-1,u;s>=0;s--)(u=e[s])&&(o=(a?u(t,n,o):u(o))||o);return a&&o&&pa(t,n,o),o};class Se extends De{id;firstName;lastName;email;oldCode;phone;phoneCodeId;password}$e([F({message:"First name is required"}),il(2,{message:"First name must be at least 2 characters"}),ul(50,{message:"First name must be less than 50 characters"})],Se.prototype,"firstName",2);$e([F({message:"Last name is required"})],Se.prototype,"lastName",2);$e([F({message:"Email is required"}),Gt({},{message:"Email is invalid"})],Se.prototype,"email",2);$e([Ze()],Se.prototype,"oldCode",2);$e([F({message:"Phone number is required"})],Se.prototype,"phone",2);$e([F({message:"Phone code is required"})],Se.prototype,"phoneCodeId",2);$e([Ze()],Se.prototype,"password",2);const ll=G({__name:"ModalPopupClose",setup(e){return G({name:"modal-popup-close"}),(t,n)=>Be((V(),U(k,{round:"",dense:"",icon:"close"},null,512)),[[St]])}}),fa={class:"row justify-between q-py-sm"},va={class:"row justify-between"},ba={class:"q-gutter-xl"},ga={class:"q-gutter-xl"},ya={class:"flex row"},ha={class:"flex row justify-center"},_a=G({__name:"AddSubscriber",setup(e){var g,R;G({name:"add-subscriber"});const t=fe("eventBus"),n=ve(),a=C(),o=C();(g=a.value)==null||g.focus(),(R=o.value)==null||R.focus();const s=C([]),u=C();Z.handlePostSubscriberUser(t,{onSuccess:T,onError:O});let f;const d=Ve(new Se);Ne(async()=>{await d.validate()});const w=$(()=>{var h;return(h=s.value)==null?void 0:h.map(b=>({label:b.name,value:b.id}))});function A(){var h;if(!qe(d)){(h=u.value)==null||h.validate();return}t.emit(N.POST_SUBSCRIBER,d),n.loading.show({message:"Submitting ..."}),f=setTimeout(()=>{n.loading.hide()},Re)}function T(){d.clearValues(),H({loader:n.loading,timer:f})}function O(){H({loader:n.loading,timer:f})}return de(async()=>{var h,b;console.log((h=o.value)==null?void 0:h.focus),(b=a.value)==null||b.focus(),s.value=await Z.getPhoneCodes()}),re(()=>{H({loader:n.loading,timer:f}),t.off(N.POST_SUBSCRIBER)}),(h,b)=>(V(),q(X,null,[l(Q,{class:"q-px-md"},{default:r(()=>[i("div",fa,[l(Ae,null,{default:r(()=>[ee(" Add Subscriber ")]),_:1}),i("div",null,[l(ll)])])]),_:1}),l(Q,{class:"q-px-md"},{default:r(()=>[l(I(Je),{onSubmit:b[6]||(b[6]=te(()=>{},["prevent"])),ref_key:"subscriberForm",ref:u},{default:r(()=>[i("div",va,[i("div",ba,[l(I(Y),{label:"First Name",filled:"",outlined:"",modelValue:d.firstName,"onUpdate:modelValue":b[0]||(b[0]=v=>d.firstName=v),"lazy-rules":"",rules:[()=>h.$validateField(d,"firstName")],ref_key:"inputRef",ref:o},null,8,["modelValue","rules"]),l(I(Y),{label:"Email",filled:"",outlined:"",modelValue:d.email,"onUpdate:modelValue":b[1]||(b[1]=v=>d.email=v),"lazy-rules":"",rules:[()=>h.$validateField(d,"email")]},null,8,["modelValue","rules"]),l(I(Y),{label:"Old Code",filled:"",outlined:"",modelValue:d.oldCode,"onUpdate:modelValue":b[2]||(b[2]=v=>d.oldCode=v),"lazy-rules":"",rules:[()=>h.$validateField(d,"oldCode")]},null,8,["modelValue","rules"])]),i("div",ga,[l(I(Y),{label:"Last Name",filled:"",outlined:"",modelValue:d.lastName,"onUpdate:modelValue":b[3]||(b[3]=v=>d.lastName=v),"lazy-rules":"",rules:[()=>h.$validateField(d,"lastName")]},null,8,["modelValue","rules"]),i("div",ya,[l(oe,{label:"Country Phone Code",filled:"",outlined:"","label-color":"dark",modelValue:d.phoneCodeId,"onUpdate:modelValue":b[4]||(b[4]=v=>d.phoneCodeId=v),options:w.value,"emit-value":"","map-options":"",clearable:""},null,8,["modelValue","options"]),l(I(Y),{label:"Phone",filled:"",outlined:"",modelValue:d.phone,"onUpdate:modelValue":b[5]||(b[5]=v=>d.phone=v),"lazy-rules":"",rules:[()=>h.$validateField(d,"phone")]},null,8,["modelValue","rules"])])])]),i("div",ha,[l(k,{style:{width:"40%"},label:"Submit",rounded:"",color:"primary",type:"submit",onClick:A})])]),_:1},512)]),_:1})],64))}});var wa=Object.defineProperty,Sa=Object.getOwnPropertyDescriptor,Il=(e,t,n,a)=>{for(var o=a>1?void 0:a?Sa(t,n):t,s=e.length-1,u;s>=0;s--)(u=e[s])&&(o=(a?u(t,n,o):u(o))||o);return a&&o&&wa(t,n,o),o};class pl extends De{id;name;lgaId;lgaWardId}Il([F({message:"Street name is required"}),il(2,{message:"Street name cannot be less than 2 characters"}),ul(50,{message:"Street name cannot be more than 255 characters"})],pl.prototype,"name",2);Il([F({message:"Select an Lga"})],pl.prototype,"lgaId",2);Il([F({message:"Select an Lga ward"})],pl.prototype,"lgaWardId",2);const Pa={class:"flex row justify-between"},Ia={class:"q-gutter-xl"},Ca={class:"flex row justify-center q-mt-lg"},Ta=G({__name:"AddStreet",emits:["addLga","addLgaWard"],setup(e){G({name:"add-street"});const t=C([]),n=C([]),a=fe("eventBus"),o=ve(),s=C(),u=C(!1);let f;const d=Ve(new pl);ke.handlePostStreet(a,{onSuccess:O,onError:g});const w=$(()=>t.value.map(h=>({label:h.name,value:h.id}))),A=$(()=>n.value.map(h=>({label:h.name,value:h.id})));Ne(async()=>{await d.validate()});function T(){var h;if(!u.value){if(!qe(d)){(h=s.value)==null||h.validate();return}u.value=!0,o.loading.show({message:"Submitting ..."}),a.emit(N.POST_STREET,d),f=setTimeout(()=>{o.loading.hide()},Re)}}function O(){d.clearValues(),H({loader:o.loading,timer:f})}function g(){H({loader:o.loading,timer:f})}function R(h){a.emit(h)}return ne(()=>d.lgaId,async h=>{n.value=await ke.getLgaWards({lgaId:h})}),de(async()=>{t.value=await ke.getLgas()}),re(()=>{H({loader:o.loading,timer:f})}),re(()=>{a.off(N.POST_STREET)}),(h,b)=>(V(),q(X,null,[l(Q,null,{default:r(()=>[i("div",Pa,[l(Ae,null,{default:r(()=>[ee("Add Street")]),_:1}),l(ll)])]),_:1}),l(Q,null,{default:r(()=>[l(I(Je),{class:"q-px-lg",onSubmit:b[7]||(b[7]=te(()=>{},["prevent"])),ref_key:"addStreetForm",ref:s},{default:r(()=>[i("div",Ia,[l(Y,{label:"Street Name",type:"text",modelValue:d.name,"onUpdate:modelValue":b[0]||(b[0]=v=>d.name=v),filled:"",outlined:"",color:"secondary","label-color":"dark",rules:[()=>h.$validateField(d,"name")]},null,8,["modelValue","rules"]),l(oe,{label:"Lga",filled:"",outlined:"",color:"secondary","label-color":"dark",options:w.value,rules:[()=>h.$validateField(d,"lgaId")],modelValue:d.lgaId,"onUpdate:modelValue":b[3]||(b[3]=v=>d.lgaId=v),"emit-value":"","map-options":"",clearable:""},{append:r(()=>[l(k,{round:"",flat:"",dense:"",icon:"add",onClick:b[1]||(b[1]=te(v=>R(I(N).TRIGGER_REMOTE_MODAL_LGA),["prevent","stop"]))})]),"no-option":r(()=>[l(Ie,null,{default:r(()=>[l(Ce,{class:"text-grey"},{default:r(()=>[l(k,{label:"Add LGA",dense:"",flat:"",onClick:b[2]||(b[2]=v=>R(I(N).TRIGGER_REMOTE_MODAL_LGA))})]),_:1})]),_:1})]),_:1},8,["options","rules","modelValue"]),l(oe,{label:"LGA Ward",filled:"",outlined:"",color:"secondary","label-color":"dark",options:A.value,rules:[()=>h.$validateField(d,"lgaWardId")],modelValue:d.lgaWardId,"onUpdate:modelValue":b[6]||(b[6]=v=>d.lgaWardId=v),"emit-value":"","map-options":"",clearable:""},{append:r(()=>[l(k,{round:"",flat:"",dense:"",icon:"add",onClick:b[4]||(b[4]=te(v=>R(I(N).TRIGGER_REMOTE_MODAL_LGA_WARD),["prevent","stop"]))})]),"no-option":r(()=>[l(Ie,null,{default:r(()=>[l(Ce,{class:"text-grey"},{default:r(()=>[l(k,{label:"Add LGA Ward",flat:"",dense:"",onClick:b[5]||(b[5]=v=>R(I(N).TRIGGER_REMOTE_MODAL_LGA_WARD))})]),_:1})]),_:1})]),_:1},8,["options","rules","modelValue"])]),i("div",Ca,[l(k,{style:{width:"40%"},label:"submit",type:"submit",color:"primary",rounded:"",onClick:T})])]),_:1},512)]),_:1})],64))}}),Va={class:"flex row justify-between"},Aa={class:"q-gutter-md"},$a={class:"flex row justify-center"},xa=G({__name:"AddPropertyType",setup(e){const t=C(),n=fe("eventBus"),a=ve();let o;const s=Ve(new Zl);Ne(async()=>{await s.validate()});function u(){var w;qe(s)||(w=t.value)==null||w.validate(),a.loading.show({message:"Submitting ..."}),n.emit(N.POST_PROPERTY_TYPE,s),o=setTimeout(()=>{a.loading.hide()},2e3)}function f(){s.clearValues(),H({loader:a.loading,timer:o})}function d(){H({loader:a.loading,timer:o})}return de(()=>{Z.handlePostPropertyType(n,{onSuccess:f,onError:d})}),re(()=>{n.off(N.POST_PROPERTY_TYPE)}),(w,A)=>(V(),q(X,null,[l(Q,null,{default:r(()=>[i("div",Va,[l(Ae,null,{default:r(()=>[ee("Add Property Type")]),_:1}),l(ll)])]),_:1}),l(Q,null,{default:r(()=>[l(I(Je),{class:"q-px-",onSubmit:A[2]||(A[2]=te(()=>{},["prevent"]))},{default:r(()=>[i("div",Aa,[l(Y,{label:"Name",type:"text",modelValue:s.name,"onUpdate:modelValue":A[0]||(A[0]=T=>s.name=T),filled:"",outlined:"",color:"secondary","label-color":"dark",rules:[()=>w.$validateField(s,"name")]},null,8,["modelValue","rules"]),l(Y,{label:"Unit Price",type:"number",modelValue:s.unitPrice,"onUpdate:modelValue":A[1]||(A[1]=T=>s.unitPrice=T),filled:"",outlined:"",color:"secondary","label-color":"dark",rules:[()=>w.$validateField(s,"unitPrice")]},null,8,["modelValue","rules"])]),i("div",$a,[l(k,{style:{width:"40%"},label:"submit",type:"submit",color:"primary",rounded:"",onClick:te(u,["prevent"])})])]),_:1})]),_:1})],64))}});var Ba=Object.defineProperty,Oa=Object.getOwnPropertyDescriptor,Ea=(e,t,n,a)=>{for(var o=a>1?void 0:a?Oa(t,n):t,s=e.length-1,u;s>=0;s--)(u=e[s])&&(o=(a?u(t,n,o):u(o))||o);return a&&o&&Ba(t,n,o),o};class Wl extends De{id;name}Ea([F({message:"LGA name is required"}),il(2,{message:"LGA name must be at least 2 characters"}),ul(50,{message:"LGA name must be less than 50 characters"})],Wl.prototype,"name",2);const ka={class:"flex row justify-between"},La={class:"flex row justify-center q-mt-lg"},Da=G({__name:"AddLga",setup(e){G({name:"add-lga"});const t=fe("eventBus"),n=ve();let a;const o=Ve(new Wl);ke.handlePostLga(t,{onSuccess:u,onError:f}),Ne(async()=>{await o.validate()});function s(){!qe(o)||(n.loading.show({message:"Submitting ..."}),t.emit(N.POST_LGA,o),a=setTimeout(()=>{n.loading.hide()},Re))}function u(){o.clearValues(),H({loader:n.loading,timer:a})}function f(){H({loader:n.loading,timer:a})}return re(()=>{H({loader:n.loading,timer:a})}),re(()=>{t.off(N.POST_LGA)}),(d,w)=>(V(),q(X,null,[l(Q,null,{default:r(()=>[i("div",ka,[l(Ae,null,{default:r(()=>[ee("Add L.G.A.")]),_:1}),l(ll)])]),_:1}),l(Q,null,{default:r(()=>[i("form",null,[i("div",null,[l(Y,{label:"Name",filled:"",outlined:"","label-color":"dark",modelValue:o.name,"onUpdate:modelValue":w[0]||(w[0]=A=>o.name=A),rules:[()=>d.$validateField(o,"name")]},null,8,["modelValue","rules"])]),i("div",La,[l(k,{style:{width:"40%"},label:"submit",type:"submit",color:"primary",rounded:"",onClick:te(s,["prevent"])})])])]),_:1})],64))}});var Na=Object.defineProperty,Ra=Object.getOwnPropertyDescriptor,Ql=(e,t,n,a)=>{for(var o=a>1?void 0:a?Ra(t,n):t,s=e.length-1,u;s>=0;s--)(u=e[s])&&(o=(a?u(t,n,o):u(o))||o);return a&&o&&Na(t,n,o),o};class Cl extends De{id;name;lgaId}Ql([F({message:"LGA ward name is required"}),il(2,{message:"LGA ward name must be at least 2 characters"}),ul(50,{message:"LGA ward name must be less than 50 characters"})],Cl.prototype,"name",2);Ql([F({message:"Select an LGA"})],Cl.prototype,"lgaId",2);const qa={class:"flex row justify-between"},Ma={class:"flex row justify-center q-mt-lg"},Ua=G({__name:"AddLgaWard",setup(e){G({name:"add-lga-ward"});const t=C([]),n=C(),a=fe("eventBus"),o=ve();let s;const u=Ve(new Cl);ke.handlePostLgaWard(a,{onSuccess:w,onError:A}),Ne(async()=>{console.log("this is the lgaWardId: ",u.lgaId),u.validate()});const f=$(()=>t.value.map(T=>({label:T.name,value:T.id})));function d(){if(!qe(u)){u.validate();return}o.loading.show({message:"Submitting ..."}),a.emit(N.POST_LGA_WARD,u),s=setTimeout(()=>{o.loading.hide()},Re)}function w(){u.clearValues(),H({loader:o.loading,timer:s})}function A(){H({loader:o.loading,timer:s})}return de(async()=>{t.value=await ke.getLgas()}),re(()=>{H({loader:o.loading,timer:s})}),(T,O)=>(V(),q(X,null,[l(Q,null,{default:r(()=>[i("div",qa,[l(Ae,null,{default:r(()=>[ee("Add L.G.A. Ward")]),_:1}),l(ll)])]),_:1}),l(Q,null,{default:r(()=>[l(I(Je),{ref_key:"lgaWardForm",ref:n},{default:r(()=>[i("div",null,[l(Y,{label:"Name",filled:"",outlined:"","label-color":"dark",modelValue:u.name,"onUpdate:modelValue":O[0]||(O[0]=g=>u.name=g),rules:[()=>T.$validateField(u,"name")]},null,8,["modelValue","rules"]),l(oe,{label:"Select L.G.A.",filled:"",outlined:"","label-color":"dark",modelValue:u.lgaId,"onUpdate:modelValue":O[1]||(O[1]=g=>u.lgaId=g),options:f.value,rules:[()=>T.$validateField(u,"lgaId")],"emit-value":"","map-options":"",clearable:""},{append:r(()=>[l(k,{flat:"",round:"",dense:"",icon:"add"})]),"no-option":r(()=>[l(Ie,null,{default:r(()=>[l(Ce,null,{default:r(()=>[l(k,{label:"Create L.G.A.",flat:"",dense:""})]),_:1})]),_:1})]),_:1},8,["modelValue","options","rules"])]),i("div",Ma,[l(k,{style:{width:"40%"},label:"submit",type:"submit",color:"primary",rounded:"",onClick:te(d,["prevent"])})])]),_:1},512)]),_:1})],64))}});var le=(e=>(e.PROPERTIES="Properties",e.BILLINGS="Billings",e))(le||{}),_e=(e=>(e[e.ADD_SUBSCRIBER=0]="ADD_SUBSCRIBER",e[e.ADD_STREET=1]="ADD_STREET",e[e.ADD_PROPERTY_TYPE=2]="ADD_PROPERTY_TYPE",e))(_e||{}),xe=(e=>(e[e.ADD_LGA=0]="ADD_LGA",e[e.ADD_LGA_WARD=1]="ADD_LGA_WARD",e))(xe||{});const Ga=["top","right","bottom","left"],Hl={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>Ga.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function Yl(e,t){return{formClass:$(()=>`q-fab--form-${e.square===!0?"square":"rounded"}`),stacked:$(()=>e.externalLabel===!1&&["top","bottom"].includes(e.labelPosition)),labelProps:$(()=>{if(e.externalLabel===!0){const n=e.hideLabel===null?t.value===!1:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${e.labelPosition}`+(n===!0?" q-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${e.labelPosition}`+(e.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:e.labelStyle}}})}}const zl={start:"self-end",center:"self-center",end:"self-start"},ja=Object.keys(zl);var Fa=Te({name:"QFabAction",props:{...Hl,icon:{type:String,default:""},anchor:{type:String,validator:e=>ja.includes(e)},to:[String,Object],replace:Boolean},emits:["click"],setup(e,{slots:t,emit:n}){const a=fe(Rl,()=>({showing:{value:!0},onChildClick:rt})),{formClass:o,labelProps:s}=Yl(e,a.showing),u=$(()=>{const T=zl[e.anchor];return o.value+(T!==void 0?` ${T}`:"")}),f=$(()=>e.disable===!0||a.showing.value!==!0);function d(T){a.onChildClick(T),n("click",T)}function w(){const T=[];return t.icon!==void 0?T.push(t.icon()):e.icon!==""&&T.push(M(dl,{name:e.icon})),(e.label!==""||t.label!==void 0)&&T[s.value.action](M("div",s.value.data,t.label!==void 0?t.label():[e.label])),ql(t.default,T)}const A=Xe();return Object.assign(A.proxy,{click:d}),()=>M(k,{class:u.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:f.value,onClick:d},w)}});const Wa=["up","right","down","left"],Qa=["left","center","right"];var Ha=Te({name:"QFab",props:{...Hl,...Ul,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{default:null},direction:{type:String,default:"right",validator:e=>Wa.includes(e)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>Qa.includes(e)}},emits:Gl,setup(e,{slots:t}){const n=C(null),a=C(e.modelValue===!0),o=ht(),{proxy:{$q:s}}=Xe(),{formClass:u,labelProps:f}=Yl(e,a),d=$(()=>e.persistent!==!0),{hide:w,toggle:A}=jl({showing:a,hideOnRouteChange:d}),T=$(()=>({opened:a.value})),O=$(()=>`q-fab z-fab row inline justify-center q-fab--align-${e.verticalActionsAlign} ${u.value}`+(a.value===!0?" q-fab--opened":" q-fab--closed")),g=$(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${e.direction} q-fab__actions--${a.value===!0?"opened":"closed"}`),R=$(()=>{const L={id:o,role:"menu"};return a.value!==!0&&(L["aria-hidden"]="true"),L}),h=$(()=>`q-fab__icon-holder  q-fab__icon-holder--${a.value===!0?"opened":"closed"}`);function b(L,z){const E=t[L],p=`q-fab__${L} absolute-full`;return E===void 0?M(dl,{class:p,name:e[z]||s.iconSet.fab[z]}):M("div",{class:p},E(T.value))}function v(){const L=[];return e.hideIcon!==!0&&L.push(M("div",{class:h.value},[b("icon","icon"),b("active-icon","activeIcon")])),(e.label!==""||t.label!==void 0)&&L[f.value.action](M("div",f.value.data,t.label!==void 0?t.label(T.value):[e.label])),ql(t.tooltip,L)}return st(Rl,{showing:a,onChildClick(L){w(L),n.value!==null&&n.value.$el.focus()}}),()=>M("div",{class:O.value},[M(k,{ref:n,class:u.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":a.value===!0?"true":"false","aria-haspopup":"true","aria-controls":o,onClick:A},v),M("div",{class:g.value,...R.value},Ke(t.default))])}});const rl=G({__name:"AdvanceTableMenu",props:{menuItems:{default:()=>[]},padding:{default:"xs"}},emits:["menuItemClickHandler"],setup(e){return G({name:"advance-table-menu"}),(t,n)=>(V(),U(Ha,{color:"transparent","text-color":"black",icon:"keyboard_arrow_left",direction:"left",padding:"xs",margin:"xs"},{default:r(()=>[(V(!0),q(X,null,Pe(t.menuItems,a=>(V(),U(Fa,{key:a.label,icon:a.icon,color:a.color,"text-color":a.textColor,padding:"xs",onClick:o=>t.$emit("menuItemClickHandler",a)},{default:r(()=>[l(Sl,null,{default:r(()=>[ee(Le(a.label),1)]),_:2},1024)]),_:2},1032,["icon","color","text-color","onClick"]))),128))]),_:1}))}});function ze(e,t=new WeakMap){if(Object(e)!==e)return e;if(t.has(e))return t.get(e);const n=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e instanceof Set?new Set:e instanceof Map?new Map:typeof e.constructor!="function"?Object.create(null):e.prototype!==void 0&&typeof e.prototype.constructor=="function"?e:new e.constructor;if(typeof e.constructor=="function"&&typeof e.valueOf=="function"){const a=e.valueOf();if(Object(a)!==a){const o=new e.constructor(a);return t.set(e,o),o}}return t.set(e,n),e instanceof Set?e.forEach(a=>{n.add(ze(a,t))}):e instanceof Map&&e.forEach((a,o)=>{n.set(o,ze(a,t))}),Object.assign(n,...Object.keys(e).map(a=>({[a]:ze(e[a],t)})))}var Dl=Te({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:n}){const{proxy:a}=Xe(),{$q:o}=a,s=C(null),u=C(""),f=C("");let d=!1;const w=$(()=>dt({initialValue:u.value,validate:e.validate,set:A,cancel:T,updatePosition:O},"value",()=>f.value,E=>{f.value=E}));function A(){e.validate(f.value)!==!1&&(g()===!0&&(n("save",f.value,u.value),n("update:modelValue",f.value)),R())}function T(){g()===!0&&n("cancel",f.value,u.value),R()}function O(){it(()=>{s.value.updatePosition()})}function g(){return ut(f.value,u.value)===!1}function R(){d=!0,s.value.hide()}function h(){d=!1,u.value=ze(e.modelValue),f.value=ze(e.modelValue),n("beforeShow")}function b(){n("show")}function v(){d===!1&&g()===!0&&(e.autoSave===!0&&e.validate(f.value)===!0?(n("save",f.value,u.value),n("update:modelValue",f.value)):n("cancel",f.value,u.value)),n("beforeHide")}function L(){n("hide")}function z(){const E=t.default!==void 0?[].concat(t.default(w.value)):[];return e.title&&E.unshift(M("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},e.title)),e.buttons===!0&&E.push(M("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[M(k,{flat:!0,color:e.color,label:e.labelCancel||o.lang.label.cancel,onClick:T}),M(k,{flat:!0,color:e.color,label:e.labelSet||o.lang.label.set,onClick:A})])),E}return Object.assign(a,{set:A,cancel:T,show(E){s.value!==null&&s.value.show(E)},hide(E){s.value!==null&&s.value.hide(E)},updatePosition:O}),()=>{if(e.disable!==!0)return M(kt,{ref:s,class:"q-popup-edit",cover:e.cover,onBeforeShow:h,onShow:b,onBeforeHide:v,onHide:L,onEscapeKey:T},z)}}});const je=G({__name:"BorderedCard",props:{bgColor:{default:"secondary"},borderColor:{default:"primary"},borderStyle:{default:"solid"},borderWidth:{default:"0.1rem"},height:{default:"100%"}},setup(e){return G({name:"bordered-card"}),(t,n)=>(V(),U(_l,{style:se({borderColor:`${t.$getColor(t.borderColor)}`,borderStyle:`${t.borderStyle}`,borderWidth:`${t.borderWidth}`,backgroundColor:`${t.$getColor(t.bgColor)}`,height:t.height})},{default:r(()=>[l(Q,null,{default:r(()=>[ct(t.$slots,"default")]),_:3})]),_:3},8,["style"]))}});async function Ya({process:e,onError:t,loader:n,useNotifer:a=!0,notifierType:o="positive",notifierMessage:s,loaderMessage:u="Please, wait!",showErrorNotifier:f=!0,errorMesssage:d}){n&&n.show({message:u});try{await e(),a&&ue({type:o,...s?{message:s}:{}})}catch{t==null||t(),f&&ue({type:"negative",...d?{message:d}:{}})}finally{n&&n.isActive&&n.hide()}}const za={class:"flex row justify-between q-mb-sm",style:{width:"100%",height:"12rem"}},Ka={style:{width:"49.5%"}},Xa=i("div",{class:"text-center text-bolder text-h6"},[i("span",null,"Property")],-1),Ja={class:"q-my-lg"},Za=i("span",null,"Id",-1),eo={class:"q-my-lg"},lo=i("span",null,"Name",-1),to={style:{width:"49.5%"}},ao=i("div",{class:"text-center text-bolder text-h6"},[i("span",null,"Transaction")],-1),oo={class:"cursor-pointer"},no=i("span",null,"Arrears",-1),ro=i("span",null,"Last Payment",-1),so=i("span",null,"Date of Payment",-1),io={style:{width:"100%",height:"8rem"}},uo=i("div",null,[i("p",null,[i("span",null,"Street")])],-1),co={class:"flex row justify-evenly"},po=i("span",null,"Number",-1),mo=i("span",null,"Name",-1),fo={style:{width:"100%",height:"8rem"}},vo=i("div",null,[i("p",null,[i("span",null,"Custodian")])],-1),bo={class:"flex row justify-evenly q-mt-md"},go=i("span",null,"Name",-1),yo=i("span",null,"Email",-1),ho=i("span",null,"Phone",-1),_o={style:{width:"100%",height:"auto"}},wo={class:"flex row text-bolder text-h6 flex items-center"},So=i("div",{class:"flex row justify-end",style:{width:"50%"}},[i("span",null,"Billing Details")],-1),Po={class:"flex row justify-end q-gutter-sm q-mb-sm",style:{width:"50%"}},Io={key:0},Co={key:1},To={key:2},Vo=i("div",null,null,-1),Ao=G({__name:"ViewPropertyDetails",props:{dialogWidth:{default:30},propertySubscriptionId:{}},setup(e){const t=e;G({name:"view-property-details",components:{DialogCard:Ye}});const n=ve(),a=[{label:"Remove Row",icon:"remove",textColor:"black"}],o=[{field:"propertyTypeId",label:"Property Type Id",name:"propertyTypeId"},{field:"propertyType",label:"Property Type",name:"propertyType"},{field:"propertyUnit",label:"Property Units",name:"propertyUnit"},{field:"unitPrice",label:"Unit Price",name:"unitPrice"}],s=["propertyType","propertyUnit","unitPrice"],u=C([{propertyTypeId:"1",propertyType:"House",propertyUnit:"5",unitPrice:"N5000"}]),f=C([]),d=C(!1),w=C({}),A=C(-1),T=C(!1),O=C(""),g=$(()=>f.value.map(B=>({label:`${B.name} - ${B.unitPrice}`,value:B.id}))),R=$(()=>{if(w.value.billingAccount){const B=Number(I(w.value).billingAccount.totalBillings)-Number(I(w.value).billingAccount.totalPayments);return"N"+B}else return"N0"}),h=$(()=>{const B=w.value.payments;if(B&&B.length>0){const x=I(w.value).payments.sort((P,D)=>D.createdAt.getTime()-P.createdAt.getTime())[0];return console.log("This is the last payment --> ",x),{createdAt:x.createdAt.toDateString(),amount:x.amount}}else return{createdAt:"--/--/--",amount:"N0"}}),b=$(()=>{var P;let B={email:"",name:"",phone:""};const x=w.value.entitySubscriberProfile;return x&&(B={email:x.email,name:x.firstName+x.lastName,phone:(((P=x.phoneCode)==null?void 0:P.name)||"")+B.phone||""}),B}),v=$(()=>w.value.streetNumber?{num:I(w.value).streetNumber,name:I(w.value).street.name}:{});function L(B,x){console.log("the updated value is: -->",B);const P=f.value.find(D=>D.id===B.value);x.value=(P==null?void 0:P.name)||"",u.value[A.value].propertyTypeId=(P==null?void 0:P.id)||"",u.value[A.value].unitPrice=String((P==null?void 0:P.unitPrice)||"")}async function z(){f.value=await Z.getPropertyTypes()}async function E(){T.value=!0;try{await Z.savePropertyUnits({propertySubscriptionId:w.value.id,propertySubscriptionUnits:u.value}),ue({type:"positive"})}catch{ue({type:"negative"})}T.value=!1,d.value=!1}function p(){u.value.push({propertyTypeId:"",propertyType:"",propertyUnit:"",unitPrice:""})}function c(B){u.value.splice(B,1)}function _(B){A.value=B}async function j(){w.value=await Z.getPropertySubscriptionDetails(t.propertySubscriptionId)}return ne(O,async B=>{B!==R.value&&(await Ya({loader:n.loading,process:async()=>{await Pl.updateArrears({arrears:B.substring(1),propertySubscriptionId:t.propertySubscriptionId})},loaderMessage:"Please, wait ..."}),await j())}),ne(w,B=>{if(B){const x=Number(I(w.value).billingAccount.totalBillings)-Number(I(w.value).billingAccount.totalPayments);O.value="N"+x}}),ne(w,B=>{B&&(u.value=w.value.propertySubscriptionUnits.map(x=>({propertyTypeId:x.entitySubscriberProperty.propertyType.id,propertyType:x.entitySubscriberProperty.propertyType.name,propertyUnit:x.propertyUnits,unitPrice:x.entitySubscriberProperty.propertyType.unitPrice})))}),de(async()=>{await j()}),(B,x)=>(V(),U(Ye,{height:"auto",width:`${B.dialogWidth}rem`},{default:r(()=>[l(Q,{class:"q-pa-lg flex column q-gutter-sm moderate-modal-font"},{default:r(()=>[i("div",za,[i("div",Ka,[l(je,null,{default:r(()=>[Xa,i("div",null,[i("p",Ja,[Za,l(ae,{class:"q-ml-sm q-pa-sm q-px-sm",label:w.value.id,rounded:""},null,8,["label"])]),i("p",eo,[lo,l(ae,{class:"q-ml-sm q-pa-sm q-px-sm",label:w.value.propertySubscriptionName,rounded:""},null,8,["label"])])])]),_:1})]),i("div",to,[l(je,null,{default:r(()=>[ao,i("div",null,[i("p",oo,[no,l(_t,{class:"q-ml-sm q-pa-sm q-px-sm",label:O.value,rounded:"",color:"primary","text-color":"white","icon-right":"edit"},null,8,["label"]),l(Dl,{modelValue:O.value,"onUpdate:modelValue":x[0]||(x[0]=P=>O.value=P),"auto-save":""},{default:r(P=>[l(Y,{modelValue:P.value,"onUpdate:modelValue":D=>P.value=D,dense:"",autofocus:"",counter:"",onKeyup:Bl(P.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:1},8,["modelValue"])]),i("p",null,[ro,l(ae,{class:"q-ml-sm q-pa-sm q-px-sm",label:h.value.amount,rounded:""},null,8,["label"])]),i("p",null,[so,l(ae,{class:"q-ml-sm q-pa-sm q-px-sm",label:h.value.createdAt,rounded:""},null,8,["label"])])])]),_:1})])]),i("div",io,[l(je,null,{default:r(()=>[uo,i("div",co,[i("p",null,[po,l(ae,{class:"q-ml-sm q-pa-sm q-px-sm",label:v.value.num,rounded:""},null,8,["label"])]),i("p",null,[mo,l(ae,{class:"q-ml-sm q-pa-sm q-px-sm",label:v.value.name,rounded:""},null,8,["label"])])])]),_:1})]),i("div",fo,[l(je,null,{default:r(()=>[vo,i("div",bo,[i("p",null,[go,l(ae,{class:"q-ml-sm q-pa-sm q-px-sm",label:b.value.name,rounded:""},null,8,["label"])]),i("p",null,[yo,l(ae,{class:"q-ml-sm q-pa-sm q-px-sm",label:b.value.email,rounded:""},null,8,["label"])]),i("p",null,[ho,l(ae,{class:"q-ml-sm q-pa-sm q-px-sm",label:b.value.phone,rounded:""},null,8,["label"])])])]),_:1})]),i("div",_o,[l(je,null,{default:r(()=>[i("div",wo,[So,i("div",Po,[d.value?ie("",!0):(V(),q("span",Io,[l(k,{icon:"edit",round:"",onClick:x[1]||(x[1]=P=>d.value=!0)})])),d.value?(V(),q("span",Co,[l(k,{icon:"add",round:"",onClick:p})])):ie("",!0),d.value?(V(),q("span",To,[l(k,{icon:"save",round:"",onClick:E})])):ie("",!0)])]),i("div",null,[l(We,{bordered:"",column:o,rows:u.value,"visible-columns":s,"table-header-class":"text-bolder","table-header-style":{backgroundColor:`${B.$getColor("secondary")}`},loading:T.value,"sort-method":P=>P,onRowClick:x[3]||(x[3]=P=>console.log("row with the following data was clicked: ",P))},{header:r(P=>[l(Ee,{props:P},{default:r(()=>[(V(!0),q(X,null,Pe(P.cols,D=>(V(),U(Pt,{key:D.name,props:P,style:{textAlign:"left"}},{default:r(()=>[ee(Le(D.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:r(P=>[l(Ee,{props:P,onMouseenter:D=>_(P.rowIndex)},{default:r(()=>[(V(!0),q(X,null,Pe(P.cols,(D,ce)=>(V(),U(Qe,{key:D.name,class:"text-left",style:{postion:"relative"}},{default:r(()=>[D.name==="propertyType"?(V(),q(X,{key:0},[ee(Le(P.row[D.name])+" ",1),l(Dl,{modelValue:P.row[D.name],"onUpdate:modelValue":J=>P.row[D.name]=J,title:"Edit the Property Type","auto-save":""},{default:r(J=>[l(oe,{filled:"","model-value":J.value,options:g.value,"use-input":"","input-debounce":"0",style:{width:"250px"},disable:!d.value,onKeyup:Bl(J.set,["enter"]),onPopupShow:z,"onUpdate:modelValue":ge=>L(ge,J)},{"no-option":r(()=>[l(Ie,null,{default:r(()=>[l(Ce,{class:"text-grey"},{default:r(()=>[ee(" No results ")]),_:1})]),_:1})]),_:2},1032,["model-value","options","disable","onKeyup","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])],64)):(V(),q(X,{key:1},[l(Y,{modelValue:P.row[D.name],"onUpdate:modelValue":J=>P.row[D.name]=J,type:"text",dense:"",borderless:"",disable:!d.value},null,8,["modelValue","onUpdate:modelValue","disable"]),ce===P.cols.length-1?Be((V(),q("span",{key:0,style:se({position:"absolute",top:A.value===P.rowIndex?"0.5rem":"0",right:A.value===P.rowIndex?"0.5rem":"0",zIndex:A.value===P.rowIndex?"1":"0"})},[l(rl,{"menu-items":a,onMenuItemClickHandler:x[2]||(x[2]=()=>c(A.value))})],4)),[[Fe,A.value===P.rowIndex]]):ie("",!0)],64))]),_:2},1024))),128))]),_:2},1032,["props","onMouseenter"])]),_:1},8,["rows","table-header-style","loading","sort-method"])]),Vo]),_:1})])]),_:1})]),_:1},8,["width"]))}});const $o={class:"row justify-between items-center"},xo={class:"q-mt-xl"},Bo={class:"q-mt-lg",style:{height:"70vh"}},Oo={class:"q-mb-lg",style:{width:"20rem"}},nl=80,en=G({__name:"PropertyBillingPage",setup(e){const t=ve(),n=Dt("light-page")||"#ffffff",a=fe("eventBus"),o=[{label:"View Details",icon:"visibility",textColor:"black"},{label:"Get Defaulters",icon:"paid",textColor:"black"}],s=[{label:"View Details",icon:"visibility",textColor:"black"},{label:"View Payments",icon:"paid",textColor:"black"}],u=[{label:"Delete",icon:"remove",textColor:"black"}];Z.handlePaginateSubscription(a,{onSuccess:bl,onError:gl});const f=sl[new Date().getMonth()+1],d=[{field:"propertySubscriptionId",label:"Property Subscription Id",name:"propertySubscriptionId",align:"left"},{field:"propertyName",label:"Property Name",name:"propertyName",align:"left"},{field:"oldCode",label:"Old Code",name:"oldCode",align:"left"},{field:"streetNumber",label:"Street Number",name:"streetNumber",align:"left"},{field:"streetName",label:"Street Name",name:"streetName",align:"left"},{field:"arrears",label:"Arrears",name:"arrears",align:"left"}],w=[{field:"streetId",name:"streetId",label:"streetId",align:"center"},{field:"streetName",label:"Street Name",name:"streetName",align:"center"},{field:"arrears",label:"Arrears",name:"arrears",align:"center"},{field:"totalBilling",label:"Total Billing",name:"totalBilling",align:"center"},{field:"actions",label:"Actions",name:"actions",align:"center"}],A=[{field:"streetName",label:"Street Name",name:"streetName",align:"center"},{field:"propertyName",label:"Property Name",name:"propertyName",align:"center"},{field:"currentBilling",label:"Current Billing",name:"currentBilling",align:"center"},{field:"currentBillingId",label:"Current Billing",name:"currentBillingId",align:"center"},{field:"arrears",label:"Arrears",name:"arrears",align:"center"}],T=[...A,{field:"totalBilling",label:"Total Billing",name:"totalBilling",align:"center"},{field:"lastPayment",label:"Last Payment",name:"lastPayment",align:"center"}],O=["streetName","arrears","totalBilling"],g=A.filter(S=>S.name!=="currentBillingId").map(S=>S.field),R=[...g,"totalBilling","lastPayment"],h={billing:"billing",billingDetails:"billingDetails",billingDefaulters:"defaulters"};He.handleViewBillingDetails(a,{onSuccess:Kl}),He.handleGetDefaulters(a,{onSuccess:Xl});const b=C(le.PROPERTIES),v=C(!1),L=C(f),z=C(!1),E=C(!1),p=C(_e.ADD_SUBSCRIBER),c=C(xe.ADD_LGA),_=C(),j=C(-1);let B=C([]);const x=C("billing"),P=C([]),D=C({page:1,rowsPerPage:3,rowsNumber:10}),ce=C(!0),J=C(""),ge=C(!1);let ye=C();const ml=$(()=>Object.values(sl).map(S=>S)),fl=$(()=>({[le.PROPERTIES]:"Add New Property",[le.BILLINGS]:"Generate / Print Billing"})[b.value]),vl=$(()=>{var S;return(S=_.value)==null?void 0:S.map(m=>({propertySubscriptionId:m.propertySubscriptionId,propertyName:m.propertySubscriptionName,oldCode:m.oldCode,streetNumber:m.streetNumber,streetName:m.streetName,arrears:m.arrears}))}),tl=$(()=>{var S;return(S=B.value)==null?void 0:S.map(m=>({streetName:m.streetName,arrears:m.arrears,streetId:m.streetId,totalBilling:m.totalBilling}))});function bl(S){ue({type:"positive"}),_.value=S==null?void 0:S.data,D.value=S==null?void 0:S.pagination}function gl(){ue({type:"negative",message:"Could not load more data!"})}async function K(S){ce.value=!0;const m=await Z.getSubscriptionByPages(S);_.value=m==null?void 0:m.data,D.value=m==null?void 0:m.pagination,ce.value=!1}async function Me(S,m){m==="View Details"?(ye.value=S,ge.value=!0):alert("This feature is under development.")}async function me(S,m){try{S==="Delete"&&(t.loading.show({message:"Deleting ..."}),await Pl.deleteBilling(m),ue({type:"positive",message:"Process successful!"}),t.loading.hide(),window.location.reload())}catch{ue({type:"negative"}),t.loading.hide()}}async function al(S,m){m&&(console.log("payload",m),S==="View Details"?a.emit(N.VIEW_BILLING_DETAILS,{streetId:m,billingMonth:L.value}):S==="Get Defaulters"&&a.emit(N.GET_DEFAULTERS,{streetId:m}))}function Kl(S){x.value=h.billingDetails,P.value=S}function Xl(S){x.value=h.billingDefaulters,P.value=S}function he(S){j.value=S}function Jl(){v.value=!v.value}function yl(S){z.value=!0,p.value=S}return a.on(N.TRIGGER_REMOTE_MODAL_LGA,()=>{c.value=xe.ADD_LGA,E.value=!0}),a.on(N.TRIGGER_REMOTE_MODAL_LGA_WARD,()=>{c.value=xe.ADD_LGA_WARD,E.value=!0}),ne(J,async S=>{if(S){ce.value=!0;const m=await Z.getSubscriptionByPages({pagination:D.value,filter:J.value});_.value=m==null?void 0:m.data,D.value=m==null?void 0:m.pagination,ce.value=!1}}),pt(async()=>{b.value===le.PROPERTIES&&(B.value=await He.getBillingAccountArrears({page:1,limit:200}))}),ne(L,async()=>{b.value===le.BILLINGS&&(B.value=await He.getBillingAccountArrears({page:1,limit:200,month:L.value}))}),mt(()=>{t.loading.show({message:"Please, wait ..."})}),de(()=>{t.loading.hide()}),de(async()=>{const S=await Z.getSubscriptions();_.value=S==null?void 0:S.data,D.value=S==null?void 0:S.pagination,ce.value=!1}),re(async()=>{a.off(N.VIEW_BILLING_DETAILS),a.off(N.GET_DEFAULTERS),a.off(N.PAGINATE_SUBSCRIPTION_TABLE)}),(S,m)=>(V(),U(Lt,null,{default:r(()=>[i("div",{style:se({backgroundColor:I(n),height:"100vh",padding:"0 1rem",width:"100%"})},[i("div",$o,[i("div",xo,[l(et,{modelValue:b.value,"onUpdate:modelValue":m[0]||(m[0]=y=>b.value=y),dense:"","active-color":"dark","active-bg-color":"secondary"},{default:r(()=>[l(Tl,{name:I(le).PROPERTIES,icon:"house",label:I(le).PROPERTIES,style:{width:"15rem"}},null,8,["name","label"]),l(Tl,{name:I(le).BILLINGS,icon:"receipt",label:I(le).BILLINGS,style:{width:"15rem"}},null,8,["name","label"])]),_:1},8,["modelValue"])]),i("div",null,[l(k,{color:"primary",rounded:"",onClick:Jl},{default:r(()=>[ee(Le(fl.value),1)]),_:1})])]),i("div",Bo,[l(lt,{modelValue:b.value,"onUpdate:modelValue":m[9]||(m[9]=y=>b.value=y),style:{"background-color":"inherit",height:"100%"}},{default:r(()=>[l(Vl,{name:I(le).PROPERTIES},{default:r(()=>[i("div",null,[l(_l,{rounded:"",class:"bg-accent"},{default:r(()=>[l(Q,null,{default:r(()=>[l(We,{class:"header-sticky",rows:vl.value,bordered:"",columns:d,"table-header-style":{backgroundColor:`${S.$getColor("secondary")}`},onRequest:K,pagination:D.value,"onUpdate:pagination":m[3]||(m[3]=y=>D.value=y),loading:ce.value,filter:J.value},{"top-right":r(()=>[l(Y,{borderless:"",dense:"",debounce:"300",modelValue:J.value,"onUpdate:modelValue":m[1]||(m[1]=y=>J.value=y),placeholder:"Search"},{append:r(()=>[l(dl,{name:"search"})]),_:1},8,["modelValue"])]),body:r(y=>[l(Ee,{props:y,onMouseenter:W=>he(y.rowIndex),onMouseleave:m[2]||(m[2]=W=>he(-1))},{default:r(()=>[(V(!0),q(X,null,Pe(y.cols,(W,Ue)=>(V(),U(Qe,{key:W.name},{default:r(()=>[l(ae,{label:W.value,class:"text-bold",style:se({backgroundColor:"transparent",color:`${S.$getColor("dark")}`})},null,8,["label","style"]),Ue===y.cols.length-1?Be((V(),q("span",{key:0,style:se({position:"absolute",top:j.value===y.rowIndex?"0.5rem":"0",right:j.value===y.rowIndex?"0.5rem":"0",zIndex:j.value===y.rowIndex?"1":"0"})},[l(rl,{"menu-items":s,onMenuItemClickHandler:Ge=>Me(y.row.propertySubscriptionId,Ge.label)},null,8,["onMenuItemClickHandler"])],4)),[[Fe,j.value===y.rowIndex]]):ie("",!0)]),_:2},1024))),128))]),_:2},1032,["props","onMouseenter"])]),_:1},8,["rows","table-header-style","pagination","loading","filter"])]),_:1})]),_:1})])]),_:1},8,["name"]),l(Vl,{name:I(le).BILLINGS},{default:r(()=>[i("div",Oo,[l(oe,{style:{width:"100%"},modelValue:L.value,"onUpdate:modelValue":m[4]||(m[4]=y=>L.value=y),label:"Month",filled:"",outlined:"","label-color":"dark",options:ml.value,clearable:"","map-options":"","emit-value":""},null,8,["modelValue","options"])]),i("div",null,[l(_l,{rounded:"",class:"bg-accent"},{default:r(()=>[Be(l(Q,null,{default:r(()=>[l(k,{icon:"arrow_back",flat:"",onClick:m[5]||(m[5]=y=>x.value=h.billing)})]),_:1},512),[[Fe,x.value!==h.billing]]),l(Q,null,{default:r(()=>[x.value===h.billing?(V(),U(We,{key:0,bordered:"",columns:w,rows:tl.value,"visible-columns":O,"table-header-class":"text-bolder","table-header-style":{backgroundColor:`${S.$getColor("secondary")}`}},{body:r(y=>[l(Ee,{props:y,onMouseenter:W=>he(y.rowIndex),onMouseleave:m[6]||(m[6]=W=>he(-1))},{default:r(()=>[(V(!0),q(X,null,Pe(y.cols,(W,Ue)=>(V(),U(Qe,{key:W.name,class:"text-center",style:{postion:"relative"}},{default:r(()=>[l(ae,{label:W.value,class:"text-bold",style:se({backgroundColor:"transparent",color:`${S.$getColor("dark")}`})},null,8,["label","style"]),Ue===y.cols.length-1?Be((V(),q("span",{key:0,style:se({position:"absolute",top:j.value===y.rowIndex?"0.5rem":"0",right:j.value===y.rowIndex?"0.5rem":"0",zIndex:j.value===y.rowIndex?"1":"0"})},[l(rl,{"menu-items":o,onMenuItemClickHandler:Ge=>al(Ge.label,y.row.streetId)},null,8,["onMenuItemClickHandler"])],4)),[[Fe,j.value===y.rowIndex]]):ie("",!0)]),_:2},1024))),128))]),_:2},1032,["props","onMouseenter"])]),_:1},8,["rows","table-header-style"])):x.value===h.billingDefaulters?(V(),U(We,{key:1,bordered:"",columns:A,rows:P.value,"visible-columns":I(g),"table-header-class":"text-bolder","table-header-style":{backgroundColor:`${S.$getColor("secondary")}`},title:"Billings Payment Defaulters"},{body:r(y=>[l(Ee,{props:y,onMouseenter:W=>he(y.rowIndex),onMouseleave:m[7]||(m[7]=W=>he(-1))},{default:r(()=>[(V(!0),q(X,null,Pe(y.cols,W=>(V(),U(Qe,{key:W.name,class:"text-center",style:{postion:"relative"}},{default:r(()=>[l(ae,{label:W.value,class:"text-bold",style:se({backgroundColor:"transparent",color:`${S.$getColor("dark")}`})},null,8,["label","style"])]),_:2},1024))),128))]),_:2},1032,["props","onMouseenter"])]),_:1},8,["rows","visible-columns","table-header-style"])):x.value===h.billingDetails?(V(),U(We,{key:2,bordered:"",columns:T,rows:P.value,"visible-columns":R,"table-header-class":"text-bolder","table-header-style":{backgroundColor:`${S.$getColor("secondary")}`},title:"Billing Details"},{body:r(y=>[l(Ee,{props:y,onMouseenter:W=>he(y.rowIndex),onMouseleave:m[8]||(m[8]=W=>he(-1))},{default:r(()=>[(V(!0),q(X,null,Pe(y.cols,(W,Ue)=>(V(),U(Qe,{key:W.name,class:"text-center",style:{postion:"relative"}},{default:r(()=>[l(ae,{label:W.value,class:"text-bold",style:se({backgroundColor:"transparent",color:`${S.$getColor("dark")}`})},null,8,["label","style"]),Ue===y.cols.length-1?Be((V(),q("span",{key:0,style:se({position:"absolute",top:j.value===y.rowIndex?"0.5rem":"0",right:j.value===y.rowIndex?"0.5rem":"0",zIndex:j.value===y.rowIndex?"1":"0"})},[l(rl,{"menu-items":u,onMenuItemClickHandler:Ge=>me(Ge.label,y.row.currentBillingId)},null,8,["onMenuItemClickHandler"])],4)),[[Fe,j.value===y.rowIndex]]):ie("",!0)]),_:2},1024))),128))]),_:2},1032,["props","onMouseenter"])]),_:1},8,["rows","table-header-style"])):ie("",!0)]),_:1})]),_:1})])]),_:1},8,["name"])]),_:1},8,["modelValue"])]),l(ol,{modelValue:v.value,"onUpdate:modelValue":m[13]||(m[13]=y=>v.value=y)},{default:r(()=>[l(Ye,{height:"auto",width:`${nl}rem`},{default:r(()=>[b.value===I(le).PROPERTIES?(V(),U(Zt,{key:0,onAddSubscriber:m[10]||(m[10]=y=>yl(I(_e).ADD_SUBSCRIBER)),onAddStreet:m[11]||(m[11]=y=>yl(I(_e).ADD_STREET)),onAddPropertyType:m[12]||(m[12]=y=>yl(I(_e).ADD_PROPERTY_TYPE))})):b.value===I(le).BILLINGS?(V(),U(ca,{key:1})):ie("",!0)]),_:1},8,["width"])]),_:1},8,["modelValue"]),l(ol,{modelValue:z.value,"onUpdate:modelValue":m[14]||(m[14]=y=>z.value=y),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:r(()=>[l(Ye,{height:"auto",width:`${nl-30}rem`},{default:r(()=>[p.value===I(_e).ADD_SUBSCRIBER?(V(),U(_a,{key:0})):p.value===I(_e).ADD_STREET?(V(),U(Ta,{key:1})):p.value===I(_e).ADD_PROPERTY_TYPE?(V(),U(xa,{key:2})):ie("",!0)]),_:1},8,["width"])]),_:1},8,["modelValue"]),l(ol,{modelValue:E.value,"onUpdate:modelValue":m[15]||(m[15]=y=>E.value=y),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:r(()=>[l(Ye,{height:"auto",width:`${nl}rem`},{default:r(()=>[c.value===I(xe).ADD_LGA?(V(),U(Da,{key:0})):c.value===I(xe).ADD_LGA_WARD?(V(),U(Ua,{key:1})):ie("",!0)]),_:1},8,["width"])]),_:1},8,["modelValue"]),l(ol,{modelValue:ge.value,"onUpdate:modelValue":m[16]||(m[16]=y=>ge.value=y)},{default:r(()=>[l(Ao,{dialogWidth:nl,"property-subscription-id":I(ye)},null,8,["property-subscription-id"])]),_:1},8,["modelValue"])],4)]),_:1}))}});export{en as default};
