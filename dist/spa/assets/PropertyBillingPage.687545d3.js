import{M as ul,a as dl,P as Jl,Q as Vl,b as et,c as $l,d as lt}from"./PropertyType.model.ff96e84a.js";import{bK as Ae,c as V,h as G,bL as Ze,g as Je,r as S,w as de,aI as re,bY as xl,bT as Bl,cc as tt,bo as at,bZ as ot,d as U,i as ve,c0 as Nl,C as Se,o as ne,aQ as A,ae as M,f as l,bj as r,F as X,al as ee,O as w,bH as te,af as u,cj as D,c1 as cl,ck as wl,b$ as nt,X as Re,W as se,U as El,bl as Le,ac as F,bR as rt,cl as Rl,c2 as ql,aS as st,aW as Ie,aF as it,cm as ut,cn as dt,aX as ct,ad as ie,bG as pt,bF as We,bf as mt,aH as ft}from"./index.040371c6.js";import{V as vt,g as bt,a as gt,b as yt,c as _t,B as Ve,I as j,d as $e,E as N,Q as qe,e as H,u as ht,f as wt}from"./index.3815e8eb.js";import{Q as ae}from"./QBadge.d784e411.js";import{u as Ml,_ as xe,l as Me,a as ue,m as sl,y as St,C as Pt,L as Ne,b as Ke,Q as Qe,c as It}from"./ClosePopup.812aa31d.js";import{b as W,Q as il}from"./QCard.5096ab51.js";import{u as Ct,a as Tt,v as Ol,b as At,c as Vt,d as $t,e as xt,f as Bt,g as Et,r as Ll,s as Ot,p as Dl,h as Lt,i as pe,P as J,Q as oe,j as Dt,I as kt,k as He}from"./PropertySubscription.handler.e11ea38d.js";import{Q as Nt}from"./QPage.d3df7215.js";import{g as Rt}from"./get-css-var.23548d6a.js";import{u as Ul,a as Gl,b as qt,d as jl,c as kl,Q as Ce,h as Te}from"./format.6cf6d742.js";import{Q as Sl,u as Mt,a as Ut,b as Gt}from"./QCheckbox.efe4dba9.js";import{c as Y,i as Be}from"./utils.01331f21.js";import{api as Fl}from"./axios.176a46be.js";import{U as we}from"./urlPaths.enum.9088486d.js";import{r as De}from"./default.request.cd3fc72f.js";import{u as jt}from"./billing-store.885615d7.js";import{I as Ft}from"./IsEmail.9a3030c7.js";import"./QResizeObserver.7d66a875.js";import"./touch.3df10340.js";import"./QList.bc099127.js";import"./storeforage.d82bd14e.js";var Ye=Ae({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:a}){const n=Je(),o=V(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return G("td",{class:o.value},Ze(a.default));const t=n.vnode.key,s=(e.props.colsMap!==void 0?e.props.colsMap[t]:null)||e.props.col;if(s===void 0)return;const{row:d}=e.props;return G("td",{class:o.value+s.__tdClass(d),style:s.__tdStyle(d)},Ze(a.default))}}}),ke=Ae({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:a}){const n=V(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>G("tr",{class:n.value},Ze(a.default))}}),Pl=Ae({name:"QTooltip",inheritAttrs:!1,props:{...Ct,...Ul,...Tt,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:Ol},self:{type:String,default:"top middle",validator:Ol},offset:{type:Array,default:()=>[14,14],validator:At},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...Gl],setup(e,{slots:a,emit:n,attrs:o}){let t,s;const d=Je(),{proxy:{$q:c}}=d,i=S(null),P=S(!1),x=V(()=>Dl(e.anchor,c.lang.rtl)),T=V(()=>Dl(e.self,c.lang.rtl)),L=V(()=>e.persistent!==!0),{registerTick:b,removeTick:q}=Vt(),{registerTimeout:g}=qt(),{transitionProps:v,transitionStyle:B}=$t(e),{localScrollTarget:y,changeScrollEvent:z,unconfigureScrollTarget:k}=xt(e,al),{anchorEl:C,canShow:p,anchorEvents:f}=Bt({showing:P,configureAnchorEl:gl}),{show:O,hide:E}=jl({showing:P,canShow:p,handleShow:ce,handleHide:Z,hideOnRouteChange:L,processOnMount:!0});Object.assign(f,{delayShow:vl,delayHide:bl});const{showPortal:$,hidePortal:I,renderPortal:R}=Et(d,i,_l,"tooltip");if(c.platform.is.mobile===!0){const K={anchorEl:C,innerRef:i,onClickOutside(fe){return E(fe),fe.target.classList.contains("q-dialog__backdrop")&&ot(fe),!0}},Ue=V(()=>e.modelValue===null&&e.persistent!==!0&&P.value===!0);de(Ue,fe=>{(fe===!0?Lt:Ll)(K)}),re(()=>{Ll(K)})}function ce(K){$(),b(()=>{s=new MutationObserver(()=>ye()),s.observe(i.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),ye(),al()}),t===void 0&&(t=de(()=>c.screen.width+"|"+c.screen.height+"|"+e.self+"|"+e.anchor+"|"+c.lang.rtl,ye)),g(()=>{$(!0),n("show",K)},e.transitionDuration)}function Z(K){q(),I(),ge(),g(()=>{I(!0),n("hide",K)},e.transitionDuration)}function ge(){s!==void 0&&(s.disconnect(),s=void 0),t!==void 0&&(t(),t=void 0),k(),xl(f,"tooltipTemp")}function ye(){Ot({targetEl:i.value,offset:e.offset,anchorEl:C.value,anchorOrigin:x.value,selfOrigin:T.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function vl(K){if(c.platform.is.mobile===!0){kl(),document.body.classList.add("non-selectable");const Ue=C.value,fe=["touchmove","touchcancel","touchend","click"].map(ol=>[Ue,ol,"delayHide","passiveCapture"]);Bl(f,"tooltipTemp",fe)}g(()=>{O(K)},e.delay)}function bl(K){c.platform.is.mobile===!0&&(xl(f,"tooltipTemp"),kl(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),g(()=>{E(K)},e.hideDelay)}function gl(){if(e.noParentEvent===!0||C.value===null)return;const K=c.platform.is.mobile===!0?[[C.value,"touchstart","delayShow","passive"]]:[[C.value,"mouseenter","delayShow","passive"],[C.value,"mouseleave","delayHide","passive"]];Bl(f,"anchor",K)}function al(){if(C.value!==null||e.scrollTarget!==void 0){y.value=tt(C.value,e.scrollTarget);const K=e.noParentEvent===!0?ye:E;z(y.value,K)}}function yl(){return P.value===!0?G("div",{...o,ref:i,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",o.class],style:[o.style,B.value],role:"tooltip"},Ze(a.default)):null}function _l(){return G(at,v.value,yl)}return re(ge),Object.assign(d.proxy,{updatePosition:ye}),R}});function el(e){return function(a,n){var o={type:vt.CONDITIONAL_VALIDATION,target:a.constructor,propertyName:n,constraints:[function(t,s){return t[n]!==null&&t[n]!==void 0}],validationOptions:e};bt().addValidationMetadata(new gt(o))}}var Wt="isBoolean";function Qt(e){return e instanceof Boolean||typeof e=="boolean"}function Ht(e){return yt({name:Wt,validator:{validate:function(a,n){return Qt(a)},defaultMessage:_t(function(a){return a+"$property must be a boolean value"},e)}},e)}var Yt=Object.defineProperty,zt=Object.getOwnPropertyDescriptor,be=(e,a,n,o)=>{for(var t=o>1?void 0:o?zt(a,n):a,s=e.length-1,d;s>=0;s--)(d=e[s])&&(t=(o?d(a,n,t):d(t))||t);return o&&t&&Yt(a,n,t),t};class me extends Ve{id;propertyName;propertyUnit;expectedMonthlyCost;propertyTypeId;streetId;streetNumber;oldCode;propertySubscriberProfileId;isOwner=!1}be([j({message:"Please, enter the property name"})],me.prototype,"propertyName",2);be([j({message:"Please, enter the property unit"})],me.prototype,"propertyUnit",2);be([el()],me.prototype,"expectedMonthlyCost",2);be([j({message:"Please, select the property type"})],me.prototype,"propertyTypeId",2);be([j({message:"Please, select the street"})],me.prototype,"streetId",2);be([j({message:"Please, enter the street number"})],me.prototype,"streetNumber",2);be([el()],me.prototype,"oldCode",2);be([j({message:"Please, select a custiodian"})],me.prototype,"propertySubscriberProfileId",2);be([Ht()],me.prototype,"isOwner",2);const Kt={class:"row justify-between"},Xt={class:"q-gutter-xl"},Zt={class:"q-gutter-xl"},Jt={style:{width:"20rem"}},ea={class:"row justify-center q-mt-xl",style:{width:"100%"}},la=U({__name:"NewPropertySubscription",emits:["addSubscriber","addPropertyType","addStreet"],setup(e,{emit:a}){U({name:"new-property-subscription"});const n=a,o=ve("eventBus"),t={width:"35rem"},s={width:"30rem"},d=pe();J.handlePostSubscription(o,{onSuccess:y,onError:z});const c=Ml();let i;const P=S(),x=S([]),T=S([]),{streets:L}=Nl(c),b=Se(new me),q=V(()=>x.value.map(C=>({label:C.firstName+" "+C.lastName,value:C.id}))),g=V(()=>T.value.map(C=>({label:`${C.name} - ${C.unitPrice}`,value:C.id}))),v=V(()=>{var C;return(C=L==null?void 0:L.value)==null?void 0:C.map(p=>({label:p.name,value:p.id}))});$e(async()=>{b.validate()});async function B(){var C;if(b.validate(),!Be(b)){console.log("the following errors exist",b.errors),await((C=P.value)==null?void 0:C.validate());return}d.loading.show({message:"Submitting ..."}),o.emit(N.NEW_PROPERTY_SUBSCRIPTION,b),i=setTimeout(()=>{d.loading.hide()},Me)}function y(){b.clearValues(),Y({loader:d.loading,timer:i})}function z(){Y({loader:d.loading,timer:i})}function k(C){n(C)}return de([()=>b.propertyTypeId,()=>b.propertyUnit],([C,p])=>{if(C&&p){const f=T.value.find(O=>O.id===C);return b.expectedMonthlyCost=String(Number(f==null?void 0:f.unitPrice)*p),b.expectedMonthlyCost}}),ne(async()=>{try{L!=null&&L.value||c.fetchServerData({type:"street"}),T.value=await J.getPropertyTypes(),x.value=await J.getSubscriberUsers()}catch(C){console.log(C)}}),re(()=>{o.off(N.NEW_PROPERTY_SUBSCRIPTION)}),(C,p)=>(A(),M(X,null,[l(W,{class:"text-center"},{default:r(()=>[l(xe,null,{default:r(()=>[ee("New Property Subscription")]),_:1})]),_:1}),l(W,null,{default:r(()=>[l(w(qe),{class:"q-pa-md",style:{height:"100%"},onSubmit:p[15]||(p[15]=te(()=>{},["prevent"])),ref_key:"propertySubscriptionForm",ref:P},{default:r(()=>[u("div",Kt,[u("div",Xt,[l(H,{style:s,label:"Property Name",type:"text",modelValue:b.propertyName,"onUpdate:modelValue":p[0]||(p[0]=f=>b.propertyName=f),filled:"",outlined:"",color:"secondary","label-color":"dark",rules:[()=>C.$validateField(b,"propertyName")]},null,8,["modelValue","rules"]),l(H,{style:s,label:"Property Unit",type:"text",modelValue:b.propertyUnit,"onUpdate:modelValue":p[1]||(p[1]=f=>b.propertyUnit=f),filled:"",outlined:"",color:"secondary","label-color":"dark",rules:[()=>C.$validateField(b,"propertyUnit")]},null,8,["modelValue","rules"]),l(H,{style:s,label:"Expected Monthly Cost",type:"text",modelValue:b.expectedMonthlyCost,"onUpdate:modelValue":p[2]||(p[2]=f=>b.expectedMonthlyCost=f),filled:"",outlined:"",color:"secondary","label-color":"dark"},{default:r(()=>[l(Pl,null,{default:r(()=>[ee("Expected Monthly Cost")]),_:1})]),_:1},8,["modelValue"]),l(H,{style:s,label:"Old Code",type:"text",modelValue:b.oldCode,"onUpdate:modelValue":p[3]||(p[3]=f=>b.oldCode=f),filled:"",outlined:"",color:"secondary","label-color":"dark"},null,8,["modelValue"])]),u("div",Zt,[u("div",{class:"row",style:t},[l(w(oe),{style:{width:"70%"},label:"Street",filled:"",outlined:"",modelValue:b.streetId,"onUpdate:modelValue":p[6]||(p[6]=f=>b.streetId=f),color:"secondary","label-color":"dark",options:v.value,rules:[()=>C.$validateField(b,"streetId")],clearable:"","emit-value":"","map-options":""},{append:r(()=>[l(w(D),{round:"",flat:"",dense:"",icon:"add",onClick:p[4]||(p[4]=te(f=>k("addStreet"),["prevent","stop"]))})]),"no-option":r(()=>[l(Ce,null,{default:r(()=>[l(Te,{class:"text-grey"},{default:r(()=>[l(w(D),{flat:"",dense:"",label:"Add Street",onClick:p[5]||(p[5]=f=>k("addStreet"))})]),_:1})]),_:1})]),_:1},8,["modelValue","options","rules"]),l(H,{style:{width:"30%"},label:"Number",type:"text",modelValue:b.streetNumber,"onUpdate:modelValue":p[7]||(p[7]=f=>b.streetNumber=f),filled:"",outlined:"",color:"secondary","label-color":"dark"},{default:r(()=>[l(Pl,null,{default:r(()=>[ee("Street Number")]),_:1})]),_:1},8,["modelValue"])]),u("div",{style:t},[l(w(oe),{style:{width:"100%"},label:"Property Type",filled:"",outlined:"",modelValue:b.propertyTypeId,"onUpdate:modelValue":p[10]||(p[10]=f=>b.propertyTypeId=f),color:"secondary","label-color":"dark",options:g.value,clearable:"",rules:[()=>C.$validateField(b,"propertyTypeId")],"emit-value":"","map-options":""},{append:r(()=>[l(w(D),{round:"",dense:"",flat:"",icon:"add",onClick:p[8]||(p[8]=te(f=>k("addPropertyType"),["prevent","stop"]))})]),"no-option":r(()=>[l(Ce,null,{default:r(()=>[l(Te,{class:"text-grey"},{default:r(()=>[l(w(D),{dense:"",flat:"",label:"Add Property Type",onClick:p[9]||(p[9]=f=>k("addPropertyType"))})]),_:1})]),_:1})]),_:1},8,["modelValue","options","rules"])]),u("div",{style:t},[l(w(oe),{style:{width:"100%"},label:"Custodian",filled:"",outlined:"",modelValue:b.propertySubscriberProfileId,"onUpdate:modelValue":p[13]||(p[13]=f=>b.propertySubscriberProfileId=f),color:"secondary","label-color":"dark",clearable:"",options:q.value,rules:[()=>C.$validateField(b,"propertySubscriberProfileId")],"emit-value":"","map-options":""},{append:r(()=>[l(w(D),{round:"",dense:"",flat:"",icon:"add",onClick:p[11]||(p[11]=te(f=>k("addSubscriber"),["prevent","stop"]))})]),"no-option":r(()=>[l(Ce,null,{default:r(()=>[l(Te,{class:"text-grey"},{default:r(()=>[l(w(D),{dense:"",flat:"",label:"Add Subscriber",onClick:p[12]||(p[12]=f=>k("addSubscriber"))})]),_:1})]),_:1})]),_:1},8,["modelValue","options","rules"])]),u("div",Jt,[l(Sl,{label:"Is Owner",modelValue:b.isOwner,"onUpdate:modelValue":p[14]||(p[14]=f=>b.isOwner=f),color:"primary"},null,8,["modelValue"])])])]),u("div",ea,[l(w(D),{style:{width:"40%"},label:"Submit",rounded:"",color:"primary",type:"submit",onClick:te(B,["prevent"])})])]),_:1},512)]),_:1})],64))}});var ta=Ae({name:"QToggle",props:{...Mt,icon:String,iconColor:String},emits:Ut,setup(e){function a(n,o){const t=V(()=>(n.value===!0?e.checkedIcon:o.value===!0?e.indeterminateIcon:e.uncheckedIcon)||e.icon),s=V(()=>n.value===!0?e.iconColor:null);return()=>[G("div",{class:"q-toggle__track"}),G("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},t.value!==void 0?[G(cl,{name:t.value,color:s.value})]:void 0)]}return Gt("toggle",a)}}),aa=Object.defineProperty,oa=Object.getOwnPropertyDescriptor,pl=(e,a,n,o)=>{for(var t=o>1?void 0:o?oa(a,n):a,s=e.length-1,d;s>=0;s--)(d=e[s])&&(t=(o?d(a,n,t):d(t))||t);return o&&t&&aa(a,n,t),t};class ll extends Ve{streetId;propertySuscriptionId;month;year;type;forAllProperties;forPropertiesOnStreet}pl([el()],ll.prototype,"streetId",2);pl([j({message:"Please, select the property subscsription"})],ll.prototype,"propertySuscriptionId",2);pl([j({message:"Please, select the month"})],ll.prototype,"month",2);pl([j({message:"Please, select the year"})],ll.prototype,"year",2);async function na(e){const a=await Fl.post(we.BILLING,e);if(a.status===201)return a.data;throw new Error("Attempt to generate billing failed",{cause:a.data})}async function ra(e){const a=await Fl.get(we.BILLING,{params:e});if(a.status===200)return a.data;throw new Error("Could not fetch billings")}class Il{static async handGenerateBilling(a,{onSuccess:n,onError:o}={}){a.on(N.GENERATE_BILLING,async t=>{try{await na(t),n==null||n(),wl.create({message:"Process was successful",color:"positive"})}catch(s){o==null||o(),wl.create({message:s.message,color:"negative",icon:"warning",timeout:5e3})}})}static async getBilling(a){try{return await ra(a)}catch(n){wl.create({message:n.message,color:"negative",icon:"warning",timeout:5e3})}}static async deleteBilling(a){return await De(we.BILLING,"delete",{params:{billingId:a}})}static async updateArrears(a){await De(we.UPDATE_ARREARS,"put",{body:a})}}class ze{static async getBillingAccountArrears(a){try{const n=a.limit,o=a.page;return await De(we.BILLING_ACCOUNT_ARREARS,"get",{params:{limit:n,page:o,month:a.month}})}catch{ue({type:"negative"})}}static async handleViewBillingDetails(a,{onSuccess:n,onError:o}={}){a.on(N.VIEW_BILLING_DETAILS,async({streetId:t,billingMonth:s})=>{try{const d=await De(we.BILLING_ACCOUNT_DETAILS.replace(":streetId",t),"get",{params:{billingMonth:s}});n==null||n(d)}catch(d){o==null||o(d),ue({type:"negative"})}})}static async handleGetDefaulters(a,{onSuccess:n,onError:o}={}){a.on(N.GET_DEFAULTERS,async({streetId:t})=>{try{const s=await De(we.BILLING_ACCOUNT_DEFAULTER.replace(":streetId",t),"get");n==null||n(s)}catch(s){o==null||o(s),ue({type:"negative"})}})}static async getBillingsForPrinting(a,n,o){const t=await De(we.BILLING_ACCOUNT_DETAILS.replace(":streetId",a),"get",{params:{billingMonth:n,propertySubscriptionId:o}});return jt().updateBilling({type:"billingDetail",data:t}),t}}const sa={class:"row justify-between q-my-lg"},ia={class:"q-gutter-xl",style:{width:"40%"}},ua={class:"q-gutter-xl",style:{width:"50%"}},da={class:"row justify-between q-mt-md",style:{height:"7rem"}},ca={class:"column"},pa={class:"column justify-end",style:{height:"100%"}},ma=U({__name:"GenerateBill",setup(e){U({name:"generate-bill"});const a=Ml(),n=sl[new Date().getMonth()+1],o=ve("eventBus"),t=pe(),s=nt();let d;Il.handGenerateBilling(o,{onSuccess:k,onError:C});const c=S("generate"),{streets:i}=Nl(a),P=S(),x=S();S("");const T=V(()=>c.value==="print"?"Print Bill":"Generate Bill"),L=V(()=>St),b=V(()=>Object.values(sl).map(p=>p)),q=V(()=>c.value==="print"?"Print":"Generate"),g=V(()=>{var p;return(p=i==null?void 0:i.value)==null?void 0:p.map(f=>({label:f.name,value:f.id}))}),v=V(()=>{var p;return(p=P.value)==null?void 0:p.map(f=>({label:f.propertySubscriptionName,value:f.propertySubscriptionId}))}),B=V(()=>y.month+" "+y.year),y=Se(new ll);async function z(){if(t.loading.show({message:"Please, wait ..."}),y.type==="print"){await ze.getBillingsForPrinting(y.streetId,y.month,y.propertySuscriptionId),s.push(`/print/${B.value}`);return}else o.emit(N.GENERATE_BILLING,y);d=setTimeout(()=>{t.loading.show()},Me)}function k(){y.clearValues(),Y({loader:t.loading,timer:d})}function C(){Y({loader:t.loading,timer:d})}return de(c,p=>{p&&(y.type=p)}),de(()=>y.forAllProperties,p=>{p&&(y.forPropertiesOnStreet=!1)}),de(()=>y.streetId,async p=>{if(console.log("this is the new val from watch on streetId",p),p){y.propertySuscriptionId="";const f=await J.getSubscriptions({streetId:p});P.value=f==null?void 0:f.data}}),ne(()=>{y.month=n,y.year=String(new Date().getFullYear()),y.type=c.value}),ne(async()=>{i!=null&&i.value||await a.fetchServerData({type:"street"})}),ne(async()=>{const p=await J.getSubscriptions();P.value=p==null?void 0:p.data}),re(()=>{Y({loader:t.loading,timer:d})}),(p,f)=>(A(),M(X,null,[l(W,{class:"row justify-between"},{default:r(()=>[u("div",{style:se({color:`${p.$getColor("primary")}`})},[l(xe,{"header-text-size":"h5"},{default:r(()=>[ee(Re(T.value),1)]),_:1})],4),u("div",null,[u("span",{class:El([c.value==="print"?"text-primary":""])},"Print Bill",2),l(ta,{"toggle-indeterminate":!1,"toggle-order":"tf","true-value":"generate","false-value":"print",modelValue:c.value,"onUpdate:modelValue":f[0]||(f[0]=O=>c.value=O),"keep-color":""},null,8,["modelValue"]),u("span",{class:El([c.value!=="print"?"text-primary":""])},"Generate Bill",2)])]),_:1}),l(W,null,{default:r(()=>[u("form",{class:"q-pa-md",style:{height:"100%"},onSubmit:f[7]||(f[7]=te(()=>{},["prevent"])),ref_key:"billingModelForm",ref:x},[u("div",sa,[u("div",ia,[l(oe,{label:"Street",modelValue:y.streetId,"onUpdate:modelValue":f[1]||(f[1]=O=>y.streetId=O),filled:"",outlined:"",color:"secondary","label-color":"dark",options:g.value,"emit-value":"","map-options":""},null,8,["modelValue","options"]),l(oe,{modelValue:y.month,"onUpdate:modelValue":f[2]||(f[2]=O=>y.month=O),label:"Month",type:"text",filled:"",outlined:"",color:"secondary","label-color":"dark",options:b.value},null,8,["modelValue","options"])]),u("div",ua,[l(oe,{modelValue:y.propertySuscriptionId,"onUpdate:modelValue":f[3]||(f[3]=O=>y.propertySuscriptionId=O),label:"Property Subscription Id",type:"text",filled:"",outlined:"",color:"secondary","label-color":"dark",options:v.value,"emit-value":"","map-options":""},null,8,["modelValue","options"]),l(oe,{modelValue:y.year,"onUpdate:modelValue":f[4]||(f[4]=O=>y.year=O),label:"Year",type:"text",filled:"",outlined:"",options:L.value,color:"secondary","label-color":"dark","emit-value":"","map-options":""},null,8,["modelValue","options"])])]),u("div",da,[u("div",ca,[l(Sl,{label:`${q.value} for properties on street.`,modelValue:y.forPropertiesOnStreet,"onUpdate:modelValue":f[5]||(f[5]=O=>y.forPropertiesOnStreet=O),disable:y.forAllProperties},null,8,["label","modelValue","disable"]),l(Sl,{label:`${q.value} all bills.`,modelValue:y.forAllProperties,"onUpdate:modelValue":f[6]||(f[6]=O=>y.forAllProperties=O)},null,8,["label","modelValue"])]),u("div",pa,[l(D,{rounded:"",color:"primary",onClick:z},{default:r(()=>[ee(Re(c.value==="print"?"Print":"Generate"),1)]),_:1})])])],544)]),_:1})],64))}});var fa=Object.defineProperty,va=Object.getOwnPropertyDescriptor,Ee=(e,a,n,o)=>{for(var t=o>1?void 0:o?va(a,n):a,s=e.length-1,d;s>=0;s--)(d=e[s])&&(t=(o?d(a,n,t):d(t))||t);return o&&t&&fa(a,n,t),t};class Pe extends Ve{id;firstName;lastName;email;oldCode;phone;phoneCodeId;password}Ee([j({message:"First name is required"}),ul(2,{message:"First name must be at least 2 characters"}),dl(50,{message:"First name must be less than 50 characters"})],Pe.prototype,"firstName",2);Ee([j({message:"Last name is required"})],Pe.prototype,"lastName",2);Ee([j({message:"Email is required"}),Ft({},{message:"Email is invalid"})],Pe.prototype,"email",2);Ee([el()],Pe.prototype,"oldCode",2);Ee([j({message:"Phone number is required"})],Pe.prototype,"phone",2);Ee([j({message:"Phone code is required"})],Pe.prototype,"phoneCodeId",2);Ee([el()],Pe.prototype,"password",2);const tl=U({__name:"ModalPopupClose",setup(e){return U({name:"modal-popup-close"}),(a,n)=>Le((A(),F(D,{round:"",dense:"",icon:"close"},null,512)),[[Pt]])}}),ba={class:"row justify-between q-py-sm"},ga={class:"row justify-between"},ya={class:"q-gutter-xl"},_a={class:"q-gutter-xl"},ha={class:"flex row"},wa={class:"flex row justify-center"},Sa=U({__name:"AddSubscriber",setup(e){var b,q;U({name:"add-subscriber"});const a=ve("eventBus"),n=pe(),o=S(),t=S();(b=o.value)==null||b.focus(),(q=t.value)==null||q.focus();const s=S([]),d=S();J.handlePostSubscriberUser(a,{onSuccess:T,onError:L});let c;const i=Se(new Pe);$e(async()=>{await i.validate()});const P=V(()=>{var g;return(g=s.value)==null?void 0:g.map(v=>({label:v.name,value:v.id}))});function x(){var g;if(!Be(i)){(g=d.value)==null||g.validate();return}a.emit(N.POST_SUBSCRIBER,i),n.loading.show({message:"Submitting ..."}),c=setTimeout(()=>{n.loading.hide()},Me)}function T(){i.clearValues(),Y({loader:n.loading,timer:c})}function L(){Y({loader:n.loading,timer:c})}return ne(async()=>{var g,v;console.log((g=t.value)==null?void 0:g.focus),(v=o.value)==null||v.focus(),s.value=await J.getPhoneCodes()}),re(()=>{Y({loader:n.loading,timer:c}),a.off(N.POST_SUBSCRIBER)}),(g,v)=>(A(),M(X,null,[l(W,{class:"q-px-md"},{default:r(()=>[u("div",ba,[l(xe,null,{default:r(()=>[ee(" Add Subscriber ")]),_:1}),u("div",null,[l(tl)])])]),_:1}),l(W,{class:"q-px-md"},{default:r(()=>[l(w(qe),{onSubmit:v[6]||(v[6]=te(()=>{},["prevent"])),ref_key:"subscriberForm",ref:d},{default:r(()=>[u("div",ga,[u("div",ya,[l(w(H),{label:"First Name",filled:"",outlined:"",modelValue:i.firstName,"onUpdate:modelValue":v[0]||(v[0]=B=>i.firstName=B),"lazy-rules":"",rules:[()=>g.$validateField(i,"firstName")],ref_key:"inputRef",ref:t},null,8,["modelValue","rules"]),l(w(H),{label:"Email",filled:"",outlined:"",modelValue:i.email,"onUpdate:modelValue":v[1]||(v[1]=B=>i.email=B),"lazy-rules":"",rules:[()=>g.$validateField(i,"email")]},null,8,["modelValue","rules"]),l(w(H),{label:"Old Code",filled:"",outlined:"",modelValue:i.oldCode,"onUpdate:modelValue":v[2]||(v[2]=B=>i.oldCode=B),"lazy-rules":"",rules:[()=>g.$validateField(i,"oldCode")]},null,8,["modelValue","rules"])]),u("div",_a,[l(w(H),{label:"Last Name",filled:"",outlined:"",modelValue:i.lastName,"onUpdate:modelValue":v[3]||(v[3]=B=>i.lastName=B),"lazy-rules":"",rules:[()=>g.$validateField(i,"lastName")]},null,8,["modelValue","rules"]),u("div",ha,[l(oe,{label:"Country Phone Code",filled:"",outlined:"","label-color":"dark",modelValue:i.phoneCodeId,"onUpdate:modelValue":v[4]||(v[4]=B=>i.phoneCodeId=B),options:P.value,"emit-value":"","map-options":"",clearable:""},null,8,["modelValue","options"]),l(w(H),{label:"Phone",filled:"",outlined:"",modelValue:i.phone,"onUpdate:modelValue":v[5]||(v[5]=B=>i.phone=B),"lazy-rules":"",rules:[()=>g.$validateField(i,"phone")]},null,8,["modelValue","rules"])])])]),u("div",wa,[l(D,{style:{width:"40%"},label:"Submit",rounded:"",color:"primary",type:"submit",onClick:x})])]),_:1},512)]),_:1})],64))}});var Pa=Object.defineProperty,Ia=Object.getOwnPropertyDescriptor,Cl=(e,a,n,o)=>{for(var t=o>1?void 0:o?Ia(a,n):a,s=e.length-1,d;s>=0;s--)(d=e[s])&&(t=(o?d(a,n,t):d(t))||t);return o&&t&&Pa(a,n,t),t};class ml extends Ve{id;name;lgaId;lgaWardId}Cl([j({message:"Street name is required"}),ul(2,{message:"Street name cannot be less than 2 characters"}),dl(50,{message:"Street name cannot be more than 255 characters"})],ml.prototype,"name",2);Cl([j({message:"Select an Lga"})],ml.prototype,"lgaId",2);Cl([j({message:"Select an Lga ward"})],ml.prototype,"lgaWardId",2);const Ca={class:"flex row justify-between"},Ta={class:"q-gutter-xl"},Aa={class:"flex row justify-center q-mt-lg"},Va=U({__name:"AddStreet",emits:["addLga","addLgaWard"],setup(e){U({name:"add-street"});const a=S([]),n=S([]),o=ve("eventBus"),t=pe(),s=S(),d=S(!1);let c;const i=Se(new ml);Ne.handlePostStreet(o,{onSuccess:L,onError:b});const P=V(()=>a.value.map(g=>({label:g.name,value:g.id}))),x=V(()=>n.value.map(g=>({label:g.name,value:g.id})));$e(async()=>{await i.validate()});function T(){var g;if(!d.value){if(!Be(i)){(g=s.value)==null||g.validate();return}d.value=!0,t.loading.show({message:"Submitting ..."}),o.emit(N.POST_STREET,i),c=setTimeout(()=>{t.loading.hide()},Me)}}function L(){i.clearValues(),Y({loader:t.loading,timer:c})}function b(){Y({loader:t.loading,timer:c})}function q(g){o.emit(g)}return de(()=>i.lgaId,async g=>{n.value=await Ne.getLgaWards({lgaId:g})}),ne(async()=>{a.value=await Ne.getLgas()}),re(()=>{Y({loader:t.loading,timer:c})}),re(()=>{o.off(N.POST_STREET)}),(g,v)=>(A(),M(X,null,[l(W,null,{default:r(()=>[u("div",Ca,[l(xe,null,{default:r(()=>[ee("Add Street")]),_:1}),l(tl)])]),_:1}),l(W,null,{default:r(()=>[l(w(qe),{class:"q-px-lg",onSubmit:v[7]||(v[7]=te(()=>{},["prevent"])),ref_key:"addStreetForm",ref:s},{default:r(()=>[u("div",Ta,[l(H,{label:"Street Name",type:"text",modelValue:i.name,"onUpdate:modelValue":v[0]||(v[0]=B=>i.name=B),filled:"",outlined:"",color:"secondary","label-color":"dark",rules:[()=>g.$validateField(i,"name")]},null,8,["modelValue","rules"]),l(oe,{label:"Lga",filled:"",outlined:"",color:"secondary","label-color":"dark",options:P.value,rules:[()=>g.$validateField(i,"lgaId")],modelValue:i.lgaId,"onUpdate:modelValue":v[3]||(v[3]=B=>i.lgaId=B),"emit-value":"","map-options":"",clearable:""},{append:r(()=>[l(D,{round:"",flat:"",dense:"",icon:"add",onClick:v[1]||(v[1]=te(B=>q(w(N).TRIGGER_REMOTE_MODAL_LGA),["prevent","stop"]))})]),"no-option":r(()=>[l(Ce,null,{default:r(()=>[l(Te,{class:"text-grey"},{default:r(()=>[l(D,{label:"Add LGA",dense:"",flat:"",onClick:v[2]||(v[2]=B=>q(w(N).TRIGGER_REMOTE_MODAL_LGA))})]),_:1})]),_:1})]),_:1},8,["options","rules","modelValue"]),l(oe,{label:"LGA Ward",filled:"",outlined:"",color:"secondary","label-color":"dark",options:x.value,rules:[()=>g.$validateField(i,"lgaWardId")],modelValue:i.lgaWardId,"onUpdate:modelValue":v[6]||(v[6]=B=>i.lgaWardId=B),"emit-value":"","map-options":"",clearable:""},{append:r(()=>[l(D,{round:"",flat:"",dense:"",icon:"add",onClick:v[4]||(v[4]=te(B=>q(w(N).TRIGGER_REMOTE_MODAL_LGA_WARD),["prevent","stop"]))})]),"no-option":r(()=>[l(Ce,null,{default:r(()=>[l(Te,{class:"text-grey"},{default:r(()=>[l(D,{label:"Add LGA Ward",flat:"",dense:"",onClick:v[5]||(v[5]=B=>q(w(N).TRIGGER_REMOTE_MODAL_LGA_WARD))})]),_:1})]),_:1})]),_:1},8,["options","rules","modelValue"])]),u("div",Aa,[l(D,{style:{width:"40%"},label:"submit",type:"submit",color:"primary",rounded:"",onClick:T})])]),_:1},512)]),_:1})],64))}}),$a={class:"flex row justify-between"},xa={class:"q-gutter-md"},Ba={class:"flex row justify-center"},Ea=U({__name:"AddPropertyType",setup(e){const a=S(),n=ve("eventBus"),o=pe();let t;const s=Se(new Jl);$e(async()=>{await s.validate()});function d(){var P;Be(s)||(P=a.value)==null||P.validate(),o.loading.show({message:"Submitting ..."}),n.emit(N.POST_PROPERTY_TYPE,s),t=setTimeout(()=>{o.loading.hide()},2e3)}function c(){s.clearValues(),Y({loader:o.loading,timer:t})}function i(){Y({loader:o.loading,timer:t})}return ne(()=>{J.handlePostPropertyType(n,{onSuccess:c,onError:i})}),re(()=>{n.off(N.POST_PROPERTY_TYPE)}),(P,x)=>(A(),M(X,null,[l(W,null,{default:r(()=>[u("div",$a,[l(xe,null,{default:r(()=>[ee("Add Property Type")]),_:1}),l(tl)])]),_:1}),l(W,null,{default:r(()=>[l(w(qe),{class:"q-px-",onSubmit:x[2]||(x[2]=te(()=>{},["prevent"]))},{default:r(()=>[u("div",xa,[l(H,{label:"Name",type:"text",modelValue:s.name,"onUpdate:modelValue":x[0]||(x[0]=T=>s.name=T),filled:"",outlined:"",color:"secondary","label-color":"dark",rules:[()=>P.$validateField(s,"name")]},null,8,["modelValue","rules"]),l(H,{label:"Unit Price",type:"number",modelValue:s.unitPrice,"onUpdate:modelValue":x[1]||(x[1]=T=>s.unitPrice=T),filled:"",outlined:"",color:"secondary","label-color":"dark",rules:[()=>P.$validateField(s,"unitPrice")]},null,8,["modelValue","rules"])]),u("div",Ba,[l(D,{style:{width:"40%"},label:"submit",type:"submit",color:"primary",rounded:"",onClick:te(d,["prevent"])})])]),_:1})]),_:1})],64))}});var Oa=Object.defineProperty,La=Object.getOwnPropertyDescriptor,Da=(e,a,n,o)=>{for(var t=o>1?void 0:o?La(a,n):a,s=e.length-1,d;s>=0;s--)(d=e[s])&&(t=(o?d(a,n,t):d(t))||t);return o&&t&&Oa(a,n,t),t};class Wl extends Ve{id;name}Da([j({message:"LGA name is required"}),ul(2,{message:"LGA name must be at least 2 characters"}),dl(50,{message:"LGA name must be less than 50 characters"})],Wl.prototype,"name",2);const ka={class:"flex row justify-between"},Na={class:"flex row justify-center q-mt-lg"},Ra=U({__name:"AddLga",setup(e){U({name:"add-lga"});const a=ve("eventBus"),n=pe();let o;const t=Se(new Wl);Ne.handlePostLga(a,{onSuccess:d,onError:c}),$e(async()=>{await t.validate()});function s(){!Be(t)||(n.loading.show({message:"Submitting ..."}),a.emit(N.POST_LGA,t),o=setTimeout(()=>{n.loading.hide()},Me))}function d(){t.clearValues(),Y({loader:n.loading,timer:o})}function c(){Y({loader:n.loading,timer:o})}return re(()=>{Y({loader:n.loading,timer:o})}),re(()=>{a.off(N.POST_LGA)}),(i,P)=>(A(),M(X,null,[l(W,null,{default:r(()=>[u("div",ka,[l(xe,null,{default:r(()=>[ee("Add L.G.A.")]),_:1}),l(tl)])]),_:1}),l(W,null,{default:r(()=>[u("form",null,[u("div",null,[l(H,{label:"Name",filled:"",outlined:"","label-color":"dark",modelValue:t.name,"onUpdate:modelValue":P[0]||(P[0]=x=>t.name=x),rules:[()=>i.$validateField(t,"name")]},null,8,["modelValue","rules"])]),u("div",Na,[l(D,{style:{width:"40%"},label:"submit",type:"submit",color:"primary",rounded:"",onClick:te(s,["prevent"])})])])]),_:1})],64))}});var qa=Object.defineProperty,Ma=Object.getOwnPropertyDescriptor,Ql=(e,a,n,o)=>{for(var t=o>1?void 0:o?Ma(a,n):a,s=e.length-1,d;s>=0;s--)(d=e[s])&&(t=(o?d(a,n,t):d(t))||t);return o&&t&&qa(a,n,t),t};class Tl extends Ve{id;name;lgaId}Ql([j({message:"LGA ward name is required"}),ul(2,{message:"LGA ward name must be at least 2 characters"}),dl(50,{message:"LGA ward name must be less than 50 characters"})],Tl.prototype,"name",2);Ql([j({message:"Select an LGA"})],Tl.prototype,"lgaId",2);const Ua={class:"flex row justify-between"},Ga={class:"flex row justify-center q-mt-lg"},ja=U({__name:"AddLgaWard",setup(e){U({name:"add-lga-ward"});const a=S([]),n=S(),o=ve("eventBus"),t=pe();let s;const d=Se(new Tl);Ne.handlePostLgaWard(o,{onSuccess:P,onError:x}),$e(async()=>{console.log("this is the lgaWardId: ",d.lgaId),d.validate()});const c=V(()=>a.value.map(T=>({label:T.name,value:T.id})));function i(){if(!Be(d)){d.validate();return}t.loading.show({message:"Submitting ..."}),o.emit(N.POST_LGA_WARD,d),s=setTimeout(()=>{t.loading.hide()},Me)}function P(){d.clearValues(),Y({loader:t.loading,timer:s})}function x(){Y({loader:t.loading,timer:s})}return ne(async()=>{a.value=await Ne.getLgas()}),re(()=>{Y({loader:t.loading,timer:s})}),(T,L)=>(A(),M(X,null,[l(W,null,{default:r(()=>[u("div",Ua,[l(xe,null,{default:r(()=>[ee("Add L.G.A. Ward")]),_:1}),l(tl)])]),_:1}),l(W,null,{default:r(()=>[l(w(qe),{ref_key:"lgaWardForm",ref:n},{default:r(()=>[u("div",null,[l(H,{label:"Name",filled:"",outlined:"","label-color":"dark",modelValue:d.name,"onUpdate:modelValue":L[0]||(L[0]=b=>d.name=b),rules:[()=>T.$validateField(d,"name")]},null,8,["modelValue","rules"]),l(oe,{label:"Select L.G.A.",filled:"",outlined:"","label-color":"dark",modelValue:d.lgaId,"onUpdate:modelValue":L[1]||(L[1]=b=>d.lgaId=b),options:c.value,rules:[()=>T.$validateField(d,"lgaId")],"emit-value":"","map-options":"",clearable:""},{append:r(()=>[l(D,{flat:"",round:"",dense:"",icon:"add"})]),"no-option":r(()=>[l(Ce,null,{default:r(()=>[l(Te,null,{default:r(()=>[l(D,{label:"Create L.G.A.",flat:"",dense:""})]),_:1})]),_:1})]),_:1},8,["modelValue","options","rules"])]),u("div",Ga,[l(D,{style:{width:"40%"},label:"submit",type:"submit",color:"primary",rounded:"",onClick:te(i,["prevent"])})])]),_:1},512)]),_:1})],64))}});var le=(e=>(e.PROPERTIES="Properties",e.BILLINGS="Billings",e))(le||{}),he=(e=>(e[e.ADD_SUBSCRIBER=0]="ADD_SUBSCRIBER",e[e.ADD_STREET=1]="ADD_STREET",e[e.ADD_PROPERTY_TYPE=2]="ADD_PROPERTY_TYPE",e))(he||{}),Oe=(e=>(e[e.ADD_LGA=0]="ADD_LGA",e[e.ADD_LGA_WARD=1]="ADD_LGA_WARD",e))(Oe||{});const Fa=["top","right","bottom","left"],Hl={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>Fa.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function Yl(e,a){return{formClass:V(()=>`q-fab--form-${e.square===!0?"square":"rounded"}`),stacked:V(()=>e.externalLabel===!1&&["top","bottom"].includes(e.labelPosition)),labelProps:V(()=>{if(e.externalLabel===!0){const n=e.hideLabel===null?a.value===!1:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${e.labelPosition}`+(n===!0?" q-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${e.labelPosition}`+(e.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:e.labelStyle}}})}}const zl={start:"self-end",center:"self-center",end:"self-start"},Wa=Object.keys(zl);var Qa=Ae({name:"QFabAction",props:{...Hl,icon:{type:String,default:""},anchor:{type:String,validator:e=>Wa.includes(e)},to:[String,Object],replace:Boolean},emits:["click"],setup(e,{slots:a,emit:n}){const o=ve(Rl,()=>({showing:{value:!0},onChildClick:rt})),{formClass:t,labelProps:s}=Yl(e,o.showing),d=V(()=>{const T=zl[e.anchor];return t.value+(T!==void 0?` ${T}`:"")}),c=V(()=>e.disable===!0||o.showing.value!==!0);function i(T){o.onChildClick(T),n("click",T)}function P(){const T=[];return a.icon!==void 0?T.push(a.icon()):e.icon!==""&&T.push(G(cl,{name:e.icon})),(e.label!==""||a.label!==void 0)&&T[s.value.action](G("div",s.value.data,a.label!==void 0?a.label():[e.label])),ql(a.default,T)}const x=Je();return Object.assign(x.proxy,{click:i}),()=>G(D,{class:d.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:c.value,onClick:i},P)}});const Ha=["up","right","down","left"],Ya=["left","center","right"];var za=Ae({name:"QFab",props:{...Hl,...Ul,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{default:null},direction:{type:String,default:"right",validator:e=>Ha.includes(e)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>Ya.includes(e)}},emits:Gl,setup(e,{slots:a}){const n=S(null),o=S(e.modelValue===!0),t=ht(),{proxy:{$q:s}}=Je(),{formClass:d,labelProps:c}=Yl(e,o),i=V(()=>e.persistent!==!0),{hide:P,toggle:x}=jl({showing:o,hideOnRouteChange:i}),T=V(()=>({opened:o.value})),L=V(()=>`q-fab z-fab row inline justify-center q-fab--align-${e.verticalActionsAlign} ${d.value}`+(o.value===!0?" q-fab--opened":" q-fab--closed")),b=V(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${e.direction} q-fab__actions--${o.value===!0?"opened":"closed"}`),q=V(()=>{const y={id:t,role:"menu"};return o.value!==!0&&(y["aria-hidden"]="true"),y}),g=V(()=>`q-fab__icon-holder  q-fab__icon-holder--${o.value===!0?"opened":"closed"}`);function v(y,z){const k=a[y],C=`q-fab__${y} absolute-full`;return k===void 0?G(cl,{class:C,name:e[z]||s.iconSet.fab[z]}):G("div",{class:C},k(T.value))}function B(){const y=[];return e.hideIcon!==!0&&y.push(G("div",{class:g.value},[v("icon","icon"),v("active-icon","activeIcon")])),(e.label!==""||a.label!==void 0)&&y[c.value.action](G("div",c.value.data,a.label!==void 0?a.label(T.value):[e.label])),ql(a.tooltip,y)}return st(Rl,{showing:o,onChildClick(y){P(y),n.value!==null&&n.value.$el.focus()}}),()=>G("div",{class:L.value},[G(D,{ref:n,class:d.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":o.value===!0?"true":"false","aria-haspopup":"true","aria-controls":t,onClick:x},B),G("div",{class:b.value,...q.value},Ze(a.default))])}});const rl=U({__name:"AdvanceTableMenu",props:{menuItems:{default:()=>[]},padding:{default:"xs"}},emits:["menuItemClickHandler"],setup(e){return U({name:"advance-table-menu"}),(a,n)=>(A(),F(za,{color:"transparent","text-color":"black",icon:"keyboard_arrow_left",direction:"left",padding:"xs",margin:"xs"},{default:r(()=>[(A(!0),M(X,null,Ie(a.menuItems,o=>(A(),F(Qa,{key:o.label,icon:o.icon,color:o.color,"text-color":o.textColor,padding:"xs",onClick:t=>a.$emit("menuItemClickHandler",o)},{default:r(()=>[l(Pl,null,{default:r(()=>[ee(Re(o.label),1)]),_:2},1024)]),_:2},1032,["icon","color","text-color","onClick"]))),128))]),_:1}))}});function Xe(e,a=new WeakMap){if(Object(e)!==e)return e;if(a.has(e))return a.get(e);const n=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e instanceof Set?new Set:e instanceof Map?new Map:typeof e.constructor!="function"?Object.create(null):e.prototype!==void 0&&typeof e.prototype.constructor=="function"?e:new e.constructor;if(typeof e.constructor=="function"&&typeof e.valueOf=="function"){const o=e.valueOf();if(Object(o)!==o){const t=new e.constructor(o);return a.set(e,t),t}}return a.set(e,n),e instanceof Set?e.forEach(o=>{n.add(Xe(o,a))}):e instanceof Map&&e.forEach((o,t)=>{n.set(t,Xe(o,a))}),Object.assign(n,...Object.keys(e).map(o=>({[o]:Xe(e[o],a)})))}var Ka=Ae({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(e,{slots:a,emit:n}){const{proxy:o}=Je(),{$q:t}=o,s=S(null),d=S(""),c=S("");let i=!1;const P=V(()=>dt({initialValue:d.value,validate:e.validate,set:x,cancel:T,updatePosition:L},"value",()=>c.value,k=>{c.value=k}));function x(){e.validate(c.value)!==!1&&(b()===!0&&(n("save",c.value,d.value),n("update:modelValue",c.value)),q())}function T(){b()===!0&&n("cancel",c.value,d.value),q()}function L(){it(()=>{s.value.updatePosition()})}function b(){return ut(c.value,d.value)===!1}function q(){i=!0,s.value.hide()}function g(){i=!1,d.value=Xe(e.modelValue),c.value=Xe(e.modelValue),n("beforeShow")}function v(){n("show")}function B(){i===!1&&b()===!0&&(e.autoSave===!0&&e.validate(c.value)===!0?(n("save",c.value,d.value),n("update:modelValue",c.value)):n("cancel",c.value,d.value)),n("beforeHide")}function y(){n("hide")}function z(){const k=a.default!==void 0?[].concat(a.default(P.value)):[];return e.title&&k.unshift(G("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},e.title)),e.buttons===!0&&k.push(G("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[G(D,{flat:!0,color:e.color,label:e.labelCancel||t.lang.label.cancel,onClick:T}),G(D,{flat:!0,color:e.color,label:e.labelSet||t.lang.label.set,onClick:x})])),k}return Object.assign(o,{set:x,cancel:T,show(k){s.value!==null&&s.value.show(k)},hide(k){s.value!==null&&s.value.hide(k)},updatePosition:L}),()=>{if(e.disable!==!0)return G(Dt,{ref:s,class:"q-popup-edit",cover:e.cover,onBeforeShow:g,onShow:v,onBeforeHide:B,onHide:y,onEscapeKey:T},z)}}});async function Xa({process:e,onError:a,loader:n,useNotifer:o=!0,notifierType:t="positive",notifierMessage:s,loaderMessage:d="Please, wait!",showErrorNotifier:c=!0}){n&&n.show({message:d});try{await e(),o&&ue({type:t,...s?{message:s}:{}})}catch(i){const P=i;a==null||a(),c&&ue({type:"negative",...P.message?{message:P.message}:{}})}finally{n!=null&&n.isActive&&n.hide()}}var Za=Object.defineProperty,Ja=Object.getOwnPropertyDescriptor,Al=(e,a,n,o)=>{for(var t=o>1?void 0:o?Ja(a,n):a,s=e.length-1,d;s>=0;s--)(d=e[s])&&(t=(o?d(a,n,t):d(t))||t);return o&&t&&Za(a,n,t),t};class fl extends Ve{amount;propertySubscriptionId;reason}Al([j(),kt({},{message:"Please, enter a valid amount in numbers."})],fl.prototype,"amount",2);Al([j({message:"Property Subscription Reference not defined."})],fl.prototype,"propertySubscriptionId",2);Al([j()],fl.prototype,"reason",2);const eo=u("div",{class:"text-h4"},"Edit Arrears",-1),lo={class:"q-pa-md"},to=U({__name:"EditArrears",props:{amount:{},propertySubscriptionId:{}},emits:["updateAmount"],setup(e,{emit:a}){U({name:"edit-arrears"});const n=e,o=a,t=Se(new fl),s=pe();$e(()=>{t.validate()});async function d(){Xa({loader:s.loading,process:async()=>{if(t.validate(),!Be(t))throw console.log("Edit Areas model is invalid."),new Error("Edit Areas model is invalid.");await Il.updateArrears({arrears:t.amount,propertySubscriptionId:t.propertySubscriptionId,reason:t.reason})},onError:()=>{console.log("Error saving arrears!")},loaderMessage:"Saving ...",notifierType:"positive",notifierMessage:"Process successful",showErrorNotifier:!0})}function c(i){o("updateAmount",i),t.amount=i}return ne(()=>{t.amount=n.amount,t.propertySubscriptionId=n.propertySubscriptionId}),(i,P)=>(A(),M("div",null,[l(il,null,{default:r(()=>[l(W,null,{default:r(()=>[eo]),_:1}),l(W,null,{default:r(()=>[u("div",lo,[l(qe,null,{default:r(()=>[l(H,{"model-value":t.amount,"onUpdate:modelValue":c,label:"Amount",rules:[()=>i.$validateField(t,"amount")]},null,8,["model-value","rules"]),l(H,{modelValue:t.reason,"onUpdate:modelValue":P[0]||(P[0]=x=>t.reason=x),label:"Reason",rules:[()=>i.$validateField(t,"reason")]},null,8,["modelValue","rules"]),l(D,{label:"Save",onClick:d})]),_:1})])]),_:1})]),_:1})]))}}),Fe=U({__name:"BorderedCard",props:{bgColor:{default:"secondary"},borderColor:{default:"primary"},borderStyle:{default:"solid"},borderWidth:{default:"0.1rem"},height:{default:"100%"}},setup(e){return U({name:"bordered-card"}),(a,n)=>(A(),F(il,{style:se({borderColor:`${a.$getColor(a.borderColor)}`,borderStyle:`${a.borderStyle}`,borderWidth:`${a.borderWidth}`,backgroundColor:`${a.$getColor(a.bgColor)}`,height:a.height})},{default:r(()=>[l(W,null,{default:r(()=>[ct(a.$slots,"default")]),_:3})]),_:3},8,["style"]))}});const ao={class:"flex row justify-between q-mb-sm",style:{width:"100%",height:"12rem"}},oo={style:{width:"49.5%"}},no=u("div",{class:"text-center text-bolder text-h6"},[u("span",null,"Property")],-1),ro={class:"q-my-lg"},so=u("span",null,"Id",-1),io={class:"q-my-lg"},uo=u("span",null,"Name",-1),co={style:{width:"49.5%"}},po=u("div",{class:"text-center text-bolder text-h6"},[u("span",null,"Transaction")],-1),mo=u("span",null,"Arrears",-1),fo=u("span",null,"Last Payment",-1),vo=u("span",null,"Date of Payment",-1),bo={style:{width:"100%",height:"8rem"}},go=u("div",null,[u("p",null,[u("span",null,"Street")])],-1),yo={class:"flex row justify-evenly"},_o=u("span",null,"Number",-1),ho=u("span",null,"Name",-1),wo={style:{width:"100%",height:"8rem"}},So=u("div",null,[u("p",null,[u("span",null,"Custodian")])],-1),Po={class:"flex row justify-evenly q-mt-md"},Io=u("span",null,"Name",-1),Co=u("span",null,"Email",-1),To=u("span",null,"Phone",-1),Ao={style:{width:"100%",height:"auto"}},Vo={class:"flex row text-bolder text-h6 flex items-center"},$o=u("div",{class:"flex row justify-end",style:{width:"50%"}},[u("span",null,"Billing Details")],-1),xo={class:"flex row justify-end q-gutter-sm q-mb-sm",style:{width:"50%"}},Bo={key:0},Eo={key:1},Oo={key:2},Lo=u("div",null,null,-1),Do=U({__name:"ViewPropertyDetails",props:{dialogWidth:{default:30},propertySubscriptionId:{}},setup(e){const a=e;U({name:"view-property-details",components:{DialogCard:Ke}}),pe();const n=[{label:"Remove Row",icon:"remove",textColor:"black"}],o=[{field:"propertyTypeId",label:"Property Type Id",name:"propertyTypeId"},{field:"propertyType",label:"Property Type",name:"propertyType"},{field:"propertyUnit",label:"Property Units",name:"propertyUnit"},{field:"unitPrice",label:"Unit Price",name:"unitPrice"}],t=["propertyType","propertyUnit","unitPrice"],s=S([{propertyTypeId:"1",propertyType:"House",propertyUnit:"5",unitPrice:"N5000"}]),d=S([]),c=S(!1),i=S({}),P=S(-1),x=S(!1),T=S(""),L=S(!1),b=V(()=>d.value.map(E=>({label:`${E.name} - ${E.unitPrice}`,value:E.id})));V(()=>{if(i.value.billingAccount){const E=Number(w(i.value).billingAccount.totalBillings)-Number(w(i.value).billingAccount.totalPayments);return"N"+E}else return"N0"});const q=V(()=>{const E=i.value.payments;if(E&&E.length>0){const $=w(i.value).payments.sort((I,R)=>R.createdAt.getTime()-I.createdAt.getTime())[0];return console.log("This is the last payment --> ",$),{createdAt:$.createdAt.toDateString(),amount:$.amount}}else return{createdAt:"--/--/--",amount:"N0"}}),g=V(()=>{var I;let E={email:"",name:"",phone:""};const $=i.value.entitySubscriberProfile;return $&&(E={email:$.email,name:$.firstName+$.lastName,phone:(((I=$.phoneCode)==null?void 0:I.name)||"")+E.phone||""}),E}),v=V(()=>i.value.streetNumber?{num:w(i.value).streetNumber,name:w(i.value).street.name}:{});function B(E,$){console.log("the updated value is: -->",E);const I=d.value.find(R=>R.id===E.value);$.value=(I==null?void 0:I.name)||"",s.value[P.value].propertyTypeId=(I==null?void 0:I.id)||"",s.value[P.value].unitPrice=String((I==null?void 0:I.unitPrice)||"")}async function y(){d.value=await J.getPropertyTypes()}async function z(){x.value=!0;try{await J.savePropertyUnits({propertySubscriptionId:i.value.id,propertySubscriptionUnits:s.value}),ue({type:"positive"})}catch{ue({type:"negative"})}x.value=!1,c.value=!1}function k(){s.value.push({propertyTypeId:"",propertyType:"",propertyUnit:"",unitPrice:""})}function C(E){s.value.splice(E,1)}function p(E){P.value=E}async function f(){i.value=await J.getPropertySubscriptionDetails(a.propertySubscriptionId)}function O(){L.value=!L.value}return de(i,E=>{if(E){const $=Number(w(i.value).billingAccount.totalBillings)-Number(w(i.value).billingAccount.totalPayments);T.value=""+$}}),de(i,E=>{E&&(s.value=i.value.propertySubscriptionUnits.map($=>({propertyTypeId:$.entitySubscriberProperty.propertyType.id,propertyType:$.entitySubscriberProperty.propertyType.name,propertyUnit:$.propertyUnits,unitPrice:$.entitySubscriberProperty.propertyType.unitPrice})))}),ne(async()=>{await f()}),(E,$)=>(A(),F(Ke,{height:"auto",width:`${E.dialogWidth}rem`},{default:r(()=>[l(W,{class:"q-pa-lg flex column q-gutter-sm moderate-modal-font"},{default:r(()=>[u("div",ao,[u("div",oo,[l(Fe,null,{default:r(()=>[no,u("div",null,[u("p",ro,[so,l(ae,{class:"q-ml-sm q-pa-sm q-px-sm",label:i.value.id,rounded:""},null,8,["label"])]),u("p",io,[uo,l(ae,{class:"q-ml-sm q-pa-sm q-px-sm",label:i.value.propertySubscriptionName,rounded:""},null,8,["label"])])])]),_:1})]),u("div",co,[l(Fe,null,{default:r(()=>[po,u("div",null,[u("p",null,[mo,l(D,{flat:"",padding:"0",onClick:O},{default:r(()=>[l(wt,{class:"q-ml-sm q-pa-sm q-px-sm",label:"N"+T.value,rounded:"",color:"primary","text-color":"white","icon-right":"edit"},null,8,["label"])]),_:1}),l(He,{modelValue:L.value,"onUpdate:modelValue":$[1]||($[1]=I=>L.value=I)},{default:r(()=>[u("div",null,[l(to,{amount:T.value,"property-subscription-id":E.propertySubscriptionId,onUpdateAmount:$[0]||($[0]=I=>T.value=I)},null,8,["amount","property-subscription-id"])])]),_:1},8,["modelValue"])]),u("p",null,[fo,l(ae,{class:"q-ml-sm q-pa-sm q-px-sm",label:q.value.amount,rounded:""},null,8,["label"])]),u("p",null,[vo,l(ae,{class:"q-ml-sm q-pa-sm q-px-sm",label:q.value.createdAt,rounded:""},null,8,["label"])])])]),_:1})])]),u("div",bo,[l(Fe,null,{default:r(()=>[go,u("div",yo,[u("p",null,[_o,l(ae,{class:"q-ml-sm q-pa-sm q-px-sm",label:v.value.num,rounded:""},null,8,["label"])]),u("p",null,[ho,l(ae,{class:"q-ml-sm q-pa-sm q-px-sm",label:v.value.name,rounded:""},null,8,["label"])])])]),_:1})]),u("div",wo,[l(Fe,null,{default:r(()=>[So,u("div",Po,[u("p",null,[Io,l(ae,{class:"q-ml-sm q-pa-sm q-px-sm",label:g.value.name,rounded:""},null,8,["label"])]),u("p",null,[Co,l(ae,{class:"q-ml-sm q-pa-sm q-px-sm",label:g.value.email,rounded:""},null,8,["label"])]),u("p",null,[To,l(ae,{class:"q-ml-sm q-pa-sm q-px-sm",label:g.value.phone,rounded:""},null,8,["label"])])])]),_:1})]),u("div",Ao,[l(Fe,null,{default:r(()=>[u("div",Vo,[$o,u("div",xo,[c.value?ie("",!0):(A(),M("span",Bo,[l(D,{icon:"edit",round:"",onClick:$[2]||($[2]=I=>c.value=!0)})])),c.value?(A(),M("span",Eo,[l(D,{icon:"add",round:"",onClick:k})])):ie("",!0),c.value?(A(),M("span",Oo,[l(D,{icon:"save",round:"",onClick:z})])):ie("",!0)])]),u("div",null,[l(Qe,{bordered:"",column:o,rows:s.value,"visible-columns":t,"table-header-class":"text-bolder","table-header-style":{backgroundColor:`${E.$getColor("secondary")}`},loading:x.value,"sort-method":I=>I,onRowClick:$[4]||($[4]=I=>console.log("row with the following data was clicked: ",I))},{header:r(I=>[l(ke,{props:I},{default:r(()=>[(A(!0),M(X,null,Ie(I.cols,R=>(A(),F(It,{key:R.name,props:I,style:{textAlign:"left"}},{default:r(()=>[ee(Re(R.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:r(I=>[l(ke,{props:I,onMouseenter:R=>p(I.rowIndex)},{default:r(()=>[(A(!0),M(X,null,Ie(I.cols,(R,ce)=>(A(),F(Ye,{key:R.name,class:"text-left",style:{postion:"relative"}},{default:r(()=>[R.name==="propertyType"?(A(),M(X,{key:0},[ee(Re(I.row[R.name])+" ",1),l(Ka,{modelValue:I.row[R.name],"onUpdate:modelValue":Z=>I.row[R.name]=Z,title:"Edit the Property Type","auto-save":""},{default:r(Z=>[l(oe,{filled:"","model-value":Z.value,options:b.value,"use-input":"","input-debounce":"0",style:{width:"250px"},disable:!c.value,onKeyup:pt(Z.set,["enter"]),onPopupShow:y,"onUpdate:modelValue":ge=>B(ge,Z)},{"no-option":r(()=>[l(Ce,null,{default:r(()=>[l(Te,{class:"text-grey"},{default:r(()=>[ee(" No results ")]),_:1})]),_:1})]),_:2},1032,["model-value","options","disable","onKeyup","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])],64)):(A(),M(X,{key:1},[l(H,{modelValue:I.row[R.name],"onUpdate:modelValue":Z=>I.row[R.name]=Z,type:"text",dense:"",borderless:"",disable:!c.value},null,8,["modelValue","onUpdate:modelValue","disable"]),ce===I.cols.length-1?Le((A(),M("span",{key:0,style:se({position:"absolute",top:P.value===I.rowIndex?"0.5rem":"0",right:P.value===I.rowIndex?"0.5rem":"0",zIndex:P.value===I.rowIndex?"1":"0"})},[l(rl,{"menu-items":n,onMenuItemClickHandler:$[3]||($[3]=()=>C(P.value))})],4)),[[We,P.value===I.rowIndex]]):ie("",!0)],64))]),_:2},1024))),128))]),_:2},1032,["props","onMouseenter"])]),_:1},8,["rows","table-header-style","loading","sort-method"])]),Lo]),_:1})])]),_:1})]),_:1},8,["width"]))}});const ko={class:"row justify-between items-center"},No={class:"q-mt-xl"},Ro={class:"q-mt-lg",style:{height:"70vh"}},qo={class:"q-mb-lg",style:{width:"20rem"}},nl=80,sn=U({__name:"PropertyBillingPage",setup(e){const a=pe(),n=Rt("light-page")||"#ffffff",o=ve("eventBus"),t=[{label:"View Details",icon:"visibility",textColor:"black"},{label:"Get Defaulters",icon:"paid",textColor:"black"}],s=[{label:"View Details",icon:"visibility",textColor:"black"},{label:"View Payments",icon:"paid",textColor:"black"}],d=[{label:"Delete",icon:"remove",textColor:"black"}];J.handlePaginateSubscription(o,{onSuccess:yl,onError:_l});const c=sl[new Date().getMonth()+1],i=[{field:"propertySubscriptionId",label:"Property Subscription Id",name:"propertySubscriptionId",align:"left"},{field:"propertyName",label:"Property Name",name:"propertyName",align:"left"},{field:"oldCode",label:"Old Code",name:"oldCode",align:"left"},{field:"streetNumber",label:"Street Number",name:"streetNumber",align:"left"},{field:"streetName",label:"Street Name",name:"streetName",align:"left"},{field:"arrears",label:"Arrears",name:"arrears",align:"left"}],P=[{field:"streetId",name:"streetId",label:"streetId",align:"center"},{field:"streetName",label:"Street Name",name:"streetName",align:"center"},{field:"arrears",label:"Arrears",name:"arrears",align:"center"},{field:"totalBilling",label:"Total Billing",name:"totalBilling",align:"center"},{field:"actions",label:"Actions",name:"actions",align:"center"}],x=[{field:"streetName",label:"Street Name",name:"streetName",align:"center"},{field:"propertyName",label:"Property Name",name:"propertyName",align:"center"},{field:"currentBilling",label:"Current Billing",name:"currentBilling",align:"center"},{field:"currentBillingId",label:"Current Billing",name:"currentBillingId",align:"center"},{field:"arrears",label:"Arrears",name:"arrears",align:"center"}],T=[...x,{field:"totalBilling",label:"Total Billing",name:"totalBilling",align:"center"},{field:"lastPayment",label:"Last Payment",name:"lastPayment",align:"center"}],L=["streetName","arrears","totalBilling"],b=x.filter(h=>h.name!=="currentBillingId").map(h=>h.field),q=[...b,"totalBilling","lastPayment"],g={billing:"billing",billingDetails:"billingDetails",billingDefaulters:"defaulters"};ze.handleViewBillingDetails(o,{onSuccess:Kl}),ze.handleGetDefaulters(o,{onSuccess:Xl});const v=S(le.PROPERTIES),B=S(!1),y=S(c),z=S(!1),k=S(!1),C=S(he.ADD_SUBSCRIBER),p=S(Oe.ADD_LGA),f=S(),O=S(-1);let E=S([]);const $=S("billing"),I=S([]),R=S({page:1,rowsPerPage:3,rowsNumber:10}),ce=S(!0),Z=S(""),ge=S(!1);let ye=S();const vl=V(()=>Object.values(sl).map(h=>h)),bl=V(()=>({[le.PROPERTIES]:"Add New Property",[le.BILLINGS]:"Generate / Print Billing"})[v.value]),gl=V(()=>{var h;return(h=f.value)==null?void 0:h.map(m=>({propertySubscriptionId:m.propertySubscriptionId,propertyName:m.propertySubscriptionName,oldCode:m.oldCode,streetNumber:m.streetNumber,streetName:m.streetName,arrears:m.arrears}))}),al=V(()=>{var h;return(h=E.value)==null?void 0:h.map(m=>({streetName:m.streetName,arrears:m.arrears,streetId:m.streetId,totalBilling:m.totalBilling}))});function yl(h){ue({type:"positive"}),f.value=h==null?void 0:h.data,R.value=h==null?void 0:h.pagination}function _l(){ue({type:"negative",message:"Could not load more data!"})}async function K(h){ce.value=!0;const m=await J.getSubscriptionByPages(h);f.value=m==null?void 0:m.data,R.value=m==null?void 0:m.pagination,ce.value=!1}async function Ue(h,m){m==="View Details"?(ye.value=h,ge.value=!0):alert("This feature is under development.")}async function fe(h,m){try{h==="Delete"&&(a.loading.show({message:"Deleting ..."}),await Il.deleteBilling(m),ue({type:"positive",message:"Process successful!"}),a.loading.hide(),window.location.reload())}catch{ue({type:"negative"}),a.loading.hide()}}async function ol(h,m){m&&(console.log("payload",m),h==="View Details"?o.emit(N.VIEW_BILLING_DETAILS,{streetId:m,billingMonth:y.value}):h==="Get Defaulters"&&o.emit(N.GET_DEFAULTERS,{streetId:m}))}function Kl(h){$.value=g.billingDetails,I.value=h}function Xl(h){$.value=g.billingDefaulters,I.value=h}function _e(h){O.value=h}function Zl(){B.value=!B.value}function hl(h){z.value=!0,C.value=h}return o.on(N.TRIGGER_REMOTE_MODAL_LGA,()=>{p.value=Oe.ADD_LGA,k.value=!0}),o.on(N.TRIGGER_REMOTE_MODAL_LGA_WARD,()=>{p.value=Oe.ADD_LGA_WARD,k.value=!0}),de(Z,async h=>{if(h){ce.value=!0;const m=await J.getSubscriptionByPages({pagination:R.value,filter:Z.value});f.value=m==null?void 0:m.data,R.value=m==null?void 0:m.pagination,ce.value=!1}}),mt(async()=>{v.value===le.PROPERTIES&&(E.value=await ze.getBillingAccountArrears({page:1,limit:200}))}),de(y,async()=>{v.value===le.BILLINGS&&(E.value=await ze.getBillingAccountArrears({page:1,limit:200,month:y.value}))}),ft(()=>{a.loading.show({message:"Please, wait ..."})}),ne(()=>{a.loading.hide()}),ne(async()=>{const h=await J.getSubscriptions();f.value=h==null?void 0:h.data,R.value=h==null?void 0:h.pagination,ce.value=!1}),re(async()=>{o.off(N.VIEW_BILLING_DETAILS),o.off(N.GET_DEFAULTERS),o.off(N.PAGINATE_SUBSCRIPTION_TABLE)}),(h,m)=>(A(),F(Nt,null,{default:r(()=>[u("div",{style:se({backgroundColor:w(n),height:"100vh",padding:"0 1rem",width:"100%"})},[u("div",ko,[u("div",No,[l(et,{modelValue:v.value,"onUpdate:modelValue":m[0]||(m[0]=_=>v.value=_),dense:"","active-color":"dark","active-bg-color":"secondary"},{default:r(()=>[l(Vl,{name:w(le).PROPERTIES,icon:"house",label:w(le).PROPERTIES,style:{width:"15rem"}},null,8,["name","label"]),l(Vl,{name:w(le).BILLINGS,icon:"receipt",label:w(le).BILLINGS,style:{width:"15rem"}},null,8,["name","label"])]),_:1},8,["modelValue"])]),u("div",null,[l(D,{color:"primary",rounded:"","no-caps":"",onClick:Zl},{default:r(()=>[ee(Re(bl.value),1)]),_:1})])]),u("div",Ro,[l(lt,{modelValue:v.value,"onUpdate:modelValue":m[9]||(m[9]=_=>v.value=_),style:{"background-color":"inherit",height:"100%"}},{default:r(()=>[l($l,{name:w(le).PROPERTIES},{default:r(()=>[u("div",null,[l(il,{rounded:"",class:"bg-accent"},{default:r(()=>[l(W,null,{default:r(()=>[l(Qe,{class:"header-sticky",rows:gl.value,bordered:"",columns:i,"table-header-style":{backgroundColor:`${h.$getColor("secondary")}`},onRequest:K,pagination:R.value,"onUpdate:pagination":m[3]||(m[3]=_=>R.value=_),loading:ce.value,filter:Z.value},{"top-right":r(()=>[l(H,{borderless:"",dense:"",debounce:"300",modelValue:Z.value,"onUpdate:modelValue":m[1]||(m[1]=_=>Z.value=_),placeholder:"Search"},{append:r(()=>[l(cl,{name:"search"})]),_:1},8,["modelValue"])]),body:r(_=>[l(ke,{props:_,onMouseenter:Q=>_e(_.rowIndex),onMouseleave:m[2]||(m[2]=Q=>_e(-1))},{default:r(()=>[(A(!0),M(X,null,Ie(_.cols,(Q,Ge)=>(A(),F(Ye,{key:Q.name},{default:r(()=>[l(ae,{label:Q.value,class:"text-bold",style:se({backgroundColor:"transparent",color:`${h.$getColor("dark")}`})},null,8,["label","style"]),Ge===_.cols.length-1?Le((A(),M("span",{key:0,style:se({position:"absolute",top:O.value===_.rowIndex?"0.5rem":"0",right:O.value===_.rowIndex?"0.5rem":"0",zIndex:O.value===_.rowIndex?"1":"0"})},[l(rl,{"menu-items":s,onMenuItemClickHandler:je=>Ue(_.row.propertySubscriptionId,je.label)},null,8,["onMenuItemClickHandler"])],4)),[[We,O.value===_.rowIndex]]):ie("",!0)]),_:2},1024))),128))]),_:2},1032,["props","onMouseenter"])]),_:1},8,["rows","table-header-style","pagination","loading","filter"])]),_:1})]),_:1})])]),_:1},8,["name"]),l($l,{name:w(le).BILLINGS},{default:r(()=>[u("div",qo,[l(oe,{style:{width:"100%"},modelValue:y.value,"onUpdate:modelValue":m[4]||(m[4]=_=>y.value=_),label:"Month",filled:"",outlined:"","label-color":"dark",options:vl.value,clearable:"","map-options":"","emit-value":""},null,8,["modelValue","options"])]),u("div",null,[l(il,{rounded:"",class:"bg-accent"},{default:r(()=>[Le(l(W,null,{default:r(()=>[l(D,{icon:"arrow_back",flat:"",onClick:m[5]||(m[5]=_=>$.value=g.billing)})]),_:1},512),[[We,$.value!==g.billing]]),l(W,null,{default:r(()=>[$.value===g.billing?(A(),F(Qe,{key:0,bordered:"",columns:P,rows:al.value,"visible-columns":L,"table-header-class":"text-bolder","table-header-style":{backgroundColor:`${h.$getColor("secondary")}`}},{body:r(_=>[l(ke,{props:_,onMouseenter:Q=>_e(_.rowIndex),onMouseleave:m[6]||(m[6]=Q=>_e(-1))},{default:r(()=>[(A(!0),M(X,null,Ie(_.cols,(Q,Ge)=>(A(),F(Ye,{key:Q.name,class:"text-center",style:{postion:"relative"}},{default:r(()=>[l(ae,{label:Q.value,class:"text-bold",style:se({backgroundColor:"transparent",color:`${h.$getColor("dark")}`})},null,8,["label","style"]),Ge===_.cols.length-1?Le((A(),M("span",{key:0,style:se({position:"absolute",top:O.value===_.rowIndex?"0.5rem":"0",right:O.value===_.rowIndex?"0.5rem":"0",zIndex:O.value===_.rowIndex?"1":"0"})},[l(rl,{"menu-items":t,onMenuItemClickHandler:je=>ol(je.label,_.row.streetId)},null,8,["onMenuItemClickHandler"])],4)),[[We,O.value===_.rowIndex]]):ie("",!0)]),_:2},1024))),128))]),_:2},1032,["props","onMouseenter"])]),_:1},8,["rows","table-header-style"])):$.value===g.billingDefaulters?(A(),F(Qe,{key:1,bordered:"",columns:x,rows:I.value,"visible-columns":w(b),"table-header-class":"text-bolder","table-header-style":{backgroundColor:`${h.$getColor("secondary")}`},title:"Billings Payment Defaulters"},{body:r(_=>[l(ke,{props:_,onMouseenter:Q=>_e(_.rowIndex),onMouseleave:m[7]||(m[7]=Q=>_e(-1))},{default:r(()=>[(A(!0),M(X,null,Ie(_.cols,Q=>(A(),F(Ye,{key:Q.name,class:"text-center",style:{postion:"relative"}},{default:r(()=>[l(ae,{label:Q.value,class:"text-bold",style:se({backgroundColor:"transparent",color:`${h.$getColor("dark")}`})},null,8,["label","style"])]),_:2},1024))),128))]),_:2},1032,["props","onMouseenter"])]),_:1},8,["rows","visible-columns","table-header-style"])):$.value===g.billingDetails?(A(),F(Qe,{key:2,bordered:"",columns:T,rows:I.value,"visible-columns":q,"table-header-class":"text-bolder","table-header-style":{backgroundColor:`${h.$getColor("secondary")}`},title:"Billing Details"},{body:r(_=>[l(ke,{props:_,onMouseenter:Q=>_e(_.rowIndex),onMouseleave:m[8]||(m[8]=Q=>_e(-1))},{default:r(()=>[(A(!0),M(X,null,Ie(_.cols,(Q,Ge)=>(A(),F(Ye,{key:Q.name,class:"text-center",style:{postion:"relative"}},{default:r(()=>[l(ae,{label:Q.value,class:"text-bold",style:se({backgroundColor:"transparent",color:`${h.$getColor("dark")}`})},null,8,["label","style"]),Ge===_.cols.length-1?Le((A(),M("span",{key:0,style:se({position:"absolute",top:O.value===_.rowIndex?"0.5rem":"0",right:O.value===_.rowIndex?"0.5rem":"0",zIndex:O.value===_.rowIndex?"1":"0"})},[l(rl,{"menu-items":d,onMenuItemClickHandler:je=>fe(je.label,_.row.currentBillingId)},null,8,["onMenuItemClickHandler"])],4)),[[We,O.value===_.rowIndex]]):ie("",!0)]),_:2},1024))),128))]),_:2},1032,["props","onMouseenter"])]),_:1},8,["rows","table-header-style"])):ie("",!0)]),_:1})]),_:1})])]),_:1},8,["name"])]),_:1},8,["modelValue"])]),l(He,{modelValue:B.value,"onUpdate:modelValue":m[13]||(m[13]=_=>B.value=_)},{default:r(()=>[l(Ke,{height:"auto",width:`${nl}rem`},{default:r(()=>[v.value===w(le).PROPERTIES?(A(),F(la,{key:0,onAddSubscriber:m[10]||(m[10]=_=>hl(w(he).ADD_SUBSCRIBER)),onAddStreet:m[11]||(m[11]=_=>hl(w(he).ADD_STREET)),onAddPropertyType:m[12]||(m[12]=_=>hl(w(he).ADD_PROPERTY_TYPE))})):v.value===w(le).BILLINGS?(A(),F(ma,{key:1})):ie("",!0)]),_:1},8,["width"])]),_:1},8,["modelValue"]),l(He,{modelValue:z.value,"onUpdate:modelValue":m[14]||(m[14]=_=>z.value=_),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:r(()=>[l(Ke,{height:"auto",width:`${nl-30}rem`},{default:r(()=>[C.value===w(he).ADD_SUBSCRIBER?(A(),F(Sa,{key:0})):C.value===w(he).ADD_STREET?(A(),F(Va,{key:1})):C.value===w(he).ADD_PROPERTY_TYPE?(A(),F(Ea,{key:2})):ie("",!0)]),_:1},8,["width"])]),_:1},8,["modelValue"]),l(He,{modelValue:k.value,"onUpdate:modelValue":m[15]||(m[15]=_=>k.value=_),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:r(()=>[l(Ke,{height:"auto",width:`${nl}rem`},{default:r(()=>[p.value===w(Oe).ADD_LGA?(A(),F(Ra,{key:0})):p.value===w(Oe).ADD_LGA_WARD?(A(),F(ja,{key:1})):ie("",!0)]),_:1},8,["width"])]),_:1},8,["modelValue"]),l(He,{modelValue:ge.value,"onUpdate:modelValue":m[16]||(m[16]=_=>ge.value=_)},{default:r(()=>[l(Do,{dialogWidth:nl,"property-subscription-id":w(ye)},null,8,["property-subscription-id"])]),_:1},8,["modelValue"])],4)]),_:1}))}});export{sn as default};
