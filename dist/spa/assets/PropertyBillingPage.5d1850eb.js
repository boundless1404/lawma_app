import{i as Se,bW as It,r as A,c as S,aI as de,o as ye,cj as rl,bl as ht,ck as xl,h as R,bU as Qe,c5 as Vl,cl as El,c0 as xe,c1 as qt,g as Ve,cm as kl,bV as Pe,w as ue,aS as il,aK as Rl,aG as Dl,bY as Ce,bK as Ol,bL as Ze,bM as sl,bN as ql,bO as We,bP as At,bS as zt,bT as at,bo as ul,cn as Nl,aF as Ml,a3 as Gl,bX as Ul,cc as Fl,bJ as Wl,d as ee,b$ as dl,C as De,aQ as N,ae as fe,f as i,bj as d,F as me,al as ve,O as V,bH as se,af as L,co as j,cp as $t,b_ as jl,X as ot,W as Ue,U as Yt,ac as Z,cq as cl,aW as tt,bf as Ql,aH as Hl,bF as Kt,ad as et}from"./index.e818679f.js";import{u as fl,V as zl,g as Yl,a as Kl,b as Xl,c as Nt,d as Mt,B as Oe,I as Q,e as Ke,E as U,Q as rt,f as ae,h as Et,i as Jl,j as Zl,k as ea}from"./index.2361da89.js";import{Q as ta}from"./QResizeObserver.436041bd.js";import{u as yt,r as la,a as aa,b as na,c as oa,v as Xt,d as ra,e as ia,f as sa,g as ua,h as da,i as Jt,s as ca,p as Zt,j as fa,k as Ee,P as pe,l as vl,_ as qe,Q as be,m as Xe,n as nt,o as _t,y as va,C as ma,L as He,I as pa,q as mt,t as Lt,w as Bt}from"./ClosePopup.079a30b3.js";import{b as kt,c as Rt,u as ml,a as pl,d as bl,i as ze,j as Ye}from"./format.7f911c64.js";import{u as ba,a as ga,b as te,Q as el}from"./QCard.a95b73bb.js";import{g as tl,s as ll}from"./touch.3df10340.js";import{Q as xt}from"./QBadge.2fd600c3.js";import{Q as ya}from"./QPage.f94221c5.js";import{g as ha}from"./get-css-var.23548d6a.js";import{c as J,i as Je}from"./utils.01331f21.js";import{api as gl}from"./axios.3686490d.js";import{U as je}from"./urlPaths.enum.ec3fe997.js";import{r as pt}from"./default.request.d70d7076.js";import{u as _a}from"./billing-store.5d96ae8b.js";import{I as Sa}from"./IsEmail.904095e6.js";import"./storeforage.e1296138.js";let Pa=0;const wa=["click","keydown"],Ta={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${Pa++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function Ca(e,l,o,a){const t=Se(rl,It);if(t===It)return console.error("QTab/QRouteTab component needs to be child of QTabs"),It;const{proxy:n}=Ve(),r=A(null),v=A(null),s=A(null),$=S(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),P=S(()=>t.currentModel.value===e.name),C=S(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(P.value===!0?" q-tab--active"+(t.tabProps.value.activeClass?" "+t.tabProps.value.activeClass:"")+(t.tabProps.value.activeColor?` text-${t.tabProps.value.activeColor}`:"")+(t.tabProps.value.activeBgColor?` bg-${t.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&t.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||t.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(a!==void 0?a.linkClass.value:"")),I=S(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(t.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),f=S(()=>e.disable===!0||t.hasFocus.value===!0||P.value===!1&&t.hasActiveTab.value===!0?-1:e.tabindex||0);function B(w,D){if(D!==!0&&r.value!==null&&r.value.focus(),e.disable===!0){a!==void 0&&a.hasRouterLink.value===!0&&Qe(w);return}if(a===void 0){t.updateModel({name:e.name}),o("click",w);return}if(a.hasRouterLink.value===!0){const c=(u={})=>{let p;const F=u.to===void 0||kl(u.to,e.to)===!0?t.avoidRouteWatcher=fl():null;return a.navigateToRouterLink(w,{...u,returnRouterError:!0}).catch(Y=>{p=Y}).then(Y=>{if(F===t.avoidRouteWatcher&&(t.avoidRouteWatcher=!1,p===void 0&&(Y===void 0||Y.message.startsWith("Avoided redundant navigation")===!0)&&t.updateModel({name:e.name})),u.returnRouterError===!0)return p!==void 0?Promise.reject(p):Y})};o("click",w,c),w.defaultPrevented!==!0&&c();return}o("click",w)}function h(w){Vl(w,[13,32])?B(w,!0):El(w)!==!0&&w.keyCode>=35&&w.keyCode<=40&&w.altKey!==!0&&w.metaKey!==!0&&t.onKbdNavigate(w.keyCode,n.$el)===!0&&Qe(w),o("keydown",w)}function g(){const w=t.tabProps.value.narrowIndicator,D=[],c=R("div",{ref:s,class:["q-tab__indicator",t.tabProps.value.indicatorClass]});e.icon!==void 0&&D.push(R(xe,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&D.push(R("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&D.push(e.alertIcon!==void 0?R(xe,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):R("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),w===!0&&D.push(c);const u=[R("div",{class:"q-focus-helper",tabindex:-1,ref:r}),R("div",{class:I.value},qt(l.default,D))];return w===!1&&u.push(c),u}const b={name:S(()=>e.name),rootRef:v,tabIndicatorRef:s,routeData:a};de(()=>{t.unregisterTab(b)}),ye(()=>{t.registerTab(b)});function O(w,D){const c={ref:v,class:C.value,tabindex:f.value,role:"tab","aria-selected":P.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:B,onKeydown:h,...D};return ht(R(w,c,g()),[[xl,$.value]])}return{renderTab:O,$tabs:t}}var al=Pe({name:"QTab",props:Ta,emits:wa,setup(e,{slots:l,emit:o}){const{renderTab:a}=Ca(e,l,o);return()=>a("div")}});function Ia(e,l,o){const a=o===!0?["left","right"]:["top","bottom"];return`absolute-${l===!0?a[0]:a[1]}${e?` text-${e}`:""}`}const Aa=["left","center","right","justify"];var $a=Pe({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>Aa.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:l,emit:o}){const{proxy:a}=Ve(),{$q:t}=a,{registerTick:n}=yt(),{registerTick:r}=yt(),{registerTick:v}=yt(),{registerTimeout:s,removeTimeout:$}=kt(),{registerTimeout:P,removeTimeout:C}=kt(),I=A(null),f=A(null),B=A(e.modelValue),h=A(!1),g=A(!0),b=A(!1),O=A(!1),w=[],D=A(0),c=A(!1);let u=null,p=null,F;const Y=S(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:Ia(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),oe=S(()=>{const m=D.value,T=B.value;for(let k=0;k<m;k++)if(w[k].name.value===T)return!0;return!1}),ce=S(()=>`q-tabs__content--align-${h.value===!0?"left":O.value===!0?"justify":e.align}`),ge=S(()=>`q-tabs row no-wrap items-center q-tabs--${h.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),E=S(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+ce.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),M=S(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),K=S(()=>e.vertical!==!0&&t.lang.rtl===!0),le=S(()=>la===!1&&K.value===!0);ue(K,_e),ue(()=>e.modelValue,m=>{Re({name:m,setCurrent:!0,skipEmit:!0})}),ue(()=>e.outsideArrows,Ae);function Re({name:m,setCurrent:T,skipEmit:k}){B.value!==m&&(k!==!0&&e["onUpdate:modelValue"]!==void 0&&o("update:modelValue",m),(T===!0||e["onUpdate:modelValue"]===void 0)&&(Ge(B.value,m),B.value=m))}function Ae(){n(()=>{Me({width:I.value.offsetWidth,height:I.value.offsetHeight})})}function Me(m){if(M.value===void 0||f.value===null)return;const T=m[M.value.container],k=Math.min(f.value[M.value.scroll],Array.prototype.reduce.call(f.value.children,(z,G)=>z+(G[M.value.content]||0),0)),H=T>0&&k>T;h.value=H,H===!0&&r(_e),O.value=T<parseInt(e.breakpoint,10)}function Ge(m,T){const k=m!=null&&m!==""?w.find(z=>z.name.value===m):null,H=T!=null&&T!==""?w.find(z=>z.name.value===T):null;if(k&&H){const z=k.tabIndicatorRef.value,G=H.tabIndicatorRef.value;u!==null&&(clearTimeout(u),u=null),z.style.transition="none",z.style.transform="none",G.style.transition="none",G.style.transform="none";const q=z.getBoundingClientRect(),ne=G.getBoundingClientRect();G.style.transform=e.vertical===!0?`translate3d(0,${q.top-ne.top}px,0) scale3d(1,${ne.height?q.height/ne.height:1},1)`:`translate3d(${q.left-ne.left}px,0,0) scale3d(${ne.width?q.width/ne.width:1},1,1)`,v(()=>{u=setTimeout(()=>{u=null,G.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",G.style.transform="none"},70)})}H&&h.value===!0&&he(H.rootRef.value)}function he(m){const{left:T,width:k,top:H,height:z}=f.value.getBoundingClientRect(),G=m.getBoundingClientRect();let q=e.vertical===!0?G.top-H:G.left-T;if(q<0){f.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(q),_e();return}q+=e.vertical===!0?G.height-z:G.width-k,q>0&&(f.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(q),_e())}function _e(){const m=f.value;if(m===null)return;const T=m.getBoundingClientRect(),k=e.vertical===!0?m.scrollTop:Math.abs(m.scrollLeft);K.value===!0?(g.value=Math.ceil(k+T.width)<m.scrollWidth-1,b.value=k>0):(g.value=k>0,b.value=e.vertical===!0?Math.ceil(k+T.height)<m.scrollHeight:Math.ceil(k+T.width)<m.scrollWidth)}function W(m){p!==null&&clearInterval(p),p=setInterval(()=>{X(m)===!0&&_()},5)}function $e(){W(le.value===!0?Number.MAX_SAFE_INTEGER:0)}function re(){W(le.value===!0?0:Number.MAX_SAFE_INTEGER)}function _(){p!==null&&(clearInterval(p),p=null)}function y(m,T){const k=Array.prototype.filter.call(f.value.children,ne=>ne===T||ne.matches&&ne.matches(".q-tab.q-focusable")===!0),H=k.length;if(H===0)return;if(m===36)return he(k[0]),k[0].focus(),!0;if(m===35)return he(k[H-1]),k[H-1].focus(),!0;const z=m===(e.vertical===!0?38:37),G=m===(e.vertical===!0?40:39),q=z===!0?-1:G===!0?1:void 0;if(q!==void 0){const ne=K.value===!0?-1:1,Te=k.indexOf(T)+q*ne;return Te>=0&&Te<H&&(he(k[Te]),k[Te].focus({preventScroll:!0})),!0}}const x=S(()=>le.value===!0?{get:m=>Math.abs(m.scrollLeft),set:(m,T)=>{m.scrollLeft=-T}}:e.vertical===!0?{get:m=>m.scrollTop,set:(m,T)=>{m.scrollTop=T}}:{get:m=>m.scrollLeft,set:(m,T)=>{m.scrollLeft=T}});function X(m){const T=f.value,{get:k,set:H}=x.value;let z=!1,G=k(T);const q=m<G?-1:1;return G+=q*5,G<0?(z=!0,G=0):(q===-1&&G<=m||q===1&&G>=m)&&(z=!0,G=m),H(T,G),_e(),z}function ft(m,T){for(const k in m)if(m[k]!==T[k])return!1;return!0}function wt(){let m=null,T={matchedLen:0,queryDiff:9999,hrefLen:0};const k=w.filter(q=>q.routeData!==void 0&&q.routeData.hasRouterLink.value===!0),{hash:H,query:z}=a.$route,G=Object.keys(z).length;for(const q of k){const ne=q.routeData.exact.value===!0;if(q.routeData[ne===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:Te,query:Tt,matched:Ll,href:Bl}=q.routeData.resolvedLink.value,Ct=Object.keys(Tt).length;if(ne===!0){if(Te!==H||Ct!==G||ft(z,Tt)===!1)continue;m=q.name.value;break}if(Te!==""&&Te!==H||Ct!==0&&ft(Tt,z)===!1)continue;const Le={matchedLen:Ll.length,queryDiff:G-Ct,hrefLen:Bl.length-Te.length};if(Le.matchedLen>T.matchedLen){m=q.name.value,T=Le;continue}else if(Le.matchedLen!==T.matchedLen)continue;if(Le.queryDiff<T.queryDiff)m=q.name.value,T=Le;else if(Le.queryDiff!==T.queryDiff)continue;Le.hrefLen>T.hrefLen&&(m=q.name.value,T=Le)}m===null&&w.some(q=>q.routeData===void 0&&q.name.value===B.value)===!0||Re({name:m,setCurrent:!0})}function Cl(m){if($(),c.value!==!0&&I.value!==null&&m.target&&typeof m.target.closest=="function"){const T=m.target.closest(".q-tab");T&&I.value.contains(T)===!0&&(c.value=!0,h.value===!0&&he(T))}}function Il(){s(()=>{c.value=!1},30)}function vt(){jt.avoidRouteWatcher===!1?P(wt):C()}function Wt(){if(F===void 0){const m=ue(()=>a.$route.fullPath,vt);F=()=>{m(),F=void 0}}}function Al(m){w.push(m),D.value++,Ae(),m.routeData===void 0||a.$route===void 0?P(()=>{if(h.value===!0){const T=B.value,k=T!=null&&T!==""?w.find(H=>H.name.value===T):null;k&&he(k.rootRef.value)}}):(Wt(),m.routeData.hasRouterLink.value===!0&&vt())}function $l(m){w.splice(w.indexOf(m),1),D.value--,Ae(),F!==void 0&&m.routeData!==void 0&&(w.every(T=>T.routeData===void 0)===!0&&F(),vt())}const jt={currentModel:B,tabProps:Y,hasFocus:c,hasActiveTab:oe,registerTab:Al,unregisterTab:$l,verifyRouteModel:vt,updateModel:Re,onKbdNavigate:y,avoidRouteWatcher:!1};il(rl,jt);function Qt(){u!==null&&clearTimeout(u),_(),F!==void 0&&F()}let Ht;return de(Qt),Rl(()=>{Ht=F!==void 0,Qt()}),Dl(()=>{Ht===!0&&Wt(),Ae()}),()=>R("div",{ref:I,class:ge.value,role:"tablist",onFocusin:Cl,onFocusout:Il},[R(ta,{onResize:Me}),R("div",{ref:f,class:E.value,onScroll:_e},Ce(l.default)),R(xe,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(g.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||t.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:$e,onTouchstartPassive:$e,onMouseupPassive:_,onMouseleavePassive:_,onTouchendPassive:_}),R(xe,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(b.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||t.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:re,onTouchstartPassive:re,onMouseupPassive:_,onMouseleavePassive:_,onTouchendPassive:_})])}}),bt=Pe({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:l}){const o=Ve(),a=S(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return R("td",{class:a.value},Ce(l.default));const t=o.vnode.key,n=(e.props.colsMap!==void 0?e.props.colsMap[t]:null)||e.props.col;if(n===void 0)return;const{row:r}=e.props;return R("td",{class:a.value+n.__tdClass(r),style:n.__tdStyle(r)},Ce(l.default))}}}),gt=Pe({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:l}){const o=S(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>R("tr",{class:o.value},Ce(l.default))}});function La(e){const l=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((o,a)=>{const t=parseFloat(o);t&&(l[a]=t)}),l}var Ba=Ol({name:"touch-swipe",beforeMount(e,{value:l,arg:o,modifiers:a}){if(a.mouse!==!0&&Ze.has.touch!==!0)return;const t=a.mouseCapture===!0?"Capture":"",n={handler:l,sensitivity:La(o),direction:tl(a),noop:sl,mouseStart(r){ll(r,n)&&ql(r)&&(We(n,"temp",[[document,"mousemove","move",`notPassive${t}`],[document,"mouseup","end","notPassiveCapture"]]),n.start(r,!0))},touchStart(r){if(ll(r,n)){const v=r.target;We(n,"temp",[[v,"touchmove","move","notPassiveCapture"],[v,"touchcancel","end","notPassiveCapture"],[v,"touchend","end","notPassiveCapture"]]),n.start(r)}},start(r,v){Ze.is.firefox===!0&&At(e,!0);const s=zt(r);n.event={x:s.left,y:s.top,time:Date.now(),mouse:v===!0,dir:!1}},move(r){if(n.event===void 0)return;if(n.event.dir!==!1){Qe(r);return}const v=Date.now()-n.event.time;if(v===0)return;const s=zt(r),$=s.left-n.event.x,P=Math.abs($),C=s.top-n.event.y,I=Math.abs(C);if(n.event.mouse!==!0){if(P<n.sensitivity[1]&&I<n.sensitivity[1]){n.end(r);return}}else if(window.getSelection().toString()!==""){n.end(r);return}else if(P<n.sensitivity[2]&&I<n.sensitivity[2])return;const f=P/v,B=I/v;n.direction.vertical===!0&&P<I&&P<100&&B>n.sensitivity[0]&&(n.event.dir=C<0?"up":"down"),n.direction.horizontal===!0&&P>I&&I<100&&f>n.sensitivity[0]&&(n.event.dir=$<0?"left":"right"),n.direction.up===!0&&P<I&&C<0&&P<100&&B>n.sensitivity[0]&&(n.event.dir="up"),n.direction.down===!0&&P<I&&C>0&&P<100&&B>n.sensitivity[0]&&(n.event.dir="down"),n.direction.left===!0&&P>I&&$<0&&I<100&&f>n.sensitivity[0]&&(n.event.dir="left"),n.direction.right===!0&&P>I&&$>0&&I<100&&f>n.sensitivity[0]&&(n.event.dir="right"),n.event.dir!==!1?(Qe(r),n.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Rt(),n.styleCleanup=h=>{n.styleCleanup=void 0,document.body.classList.remove("non-selectable");const g=()=>{document.body.classList.remove("no-pointer-events--children")};h===!0?setTimeout(g,50):g()}),n.handler({evt:r,touch:n.event.mouse!==!0,mouse:n.event.mouse,direction:n.event.dir,duration:v,distance:{x:P,y:I}})):n.end(r)},end(r){n.event!==void 0&&(at(n,"temp"),Ze.is.firefox===!0&&At(e,!1),n.styleCleanup!==void 0&&n.styleCleanup(!0),r!==void 0&&n.event.dir!==!1&&Qe(r),n.event=void 0)}};if(e.__qtouchswipe=n,a.mouse===!0){const r=a.mouseCapture===!0||a.mousecapture===!0?"Capture":"";We(n,"main",[[e,"mousedown","mouseStart",`passive${r}`]])}Ze.has.touch===!0&&We(n,"main",[[e,"touchstart","touchStart",`passive${a.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,l){const o=e.__qtouchswipe;o!==void 0&&(l.oldValue!==l.value&&(typeof l.value!="function"&&o.end(),o.handler=l.value),o.direction=tl(l.modifiers))},beforeUnmount(e){const l=e.__qtouchswipe;l!==void 0&&(at(l,"main"),at(l,"temp"),Ze.is.firefox===!0&&At(e,!1),l.styleCleanup!==void 0&&l.styleCleanup(),delete e.__qtouchswipe)}});const xa={name:{required:!0},disable:Boolean},nl={setup(e,{slots:l}){return()=>R("div",{class:"q-panel scroll",role:"tabpanel"},Ce(l.default))}},Va={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Ea=["update:modelValue","beforeTransition","transition"];function ka(){const{props:e,emit:l,proxy:o}=Ve(),{getCacheWithFn:a}=aa();let t,n;const r=A(null),v=A(null);function s(E){const M=e.vertical===!0?"up":"left";p((o.$q.lang.rtl===!0?-1:1)*(E.direction===M?1:-1))}const $=S(()=>[[Ba,s,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),P=S(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),C=S(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),I=S(()=>`--q-transition-duration: ${e.transitionDuration}ms`),f=S(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),B=S(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),h=S(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);ue(()=>e.modelValue,(E,M)=>{const K=w(E)===!0?D(E):-1;n!==!0&&u(K===-1?0:K<D(M)?-1:1),r.value!==K&&(r.value=K,l("beforeTransition",E,M),Ml(()=>{l("transition",E,M)}))});function g(){p(1)}function b(){p(-1)}function O(E){l("update:modelValue",E)}function w(E){return E!=null&&E!==""}function D(E){return t.findIndex(M=>M.props.name===E&&M.props.disable!==""&&M.props.disable!==!0)}function c(){return t.filter(E=>E.props.disable!==""&&E.props.disable!==!0)}function u(E){const M=E!==0&&e.animated===!0&&r.value!==-1?"q-transition--"+(E===-1?P.value:C.value):null;v.value!==M&&(v.value=M)}function p(E,M=r.value){let K=M+E;for(;K>-1&&K<t.length;){const le=t[K];if(le!==void 0&&le.props.disable!==""&&le.props.disable!==!0){u(E),n=!0,l("update:modelValue",le.props.name),setTimeout(()=>{n=!1});return}K+=E}e.infinite===!0&&t.length!==0&&M!==-1&&M!==t.length&&p(E,E===-1?t.length:-1)}function F(){const E=D(e.modelValue);return r.value!==E&&(r.value=E),!0}function Y(){const E=w(e.modelValue)===!0&&F()&&t[r.value];return e.keepAlive===!0?[R(Gl,B.value,[R(h.value===!0?a(f.value,()=>({...nl,name:f.value})):nl,{key:f.value,style:I.value},()=>E)])]:[R("div",{class:"q-panel scroll",style:I.value,key:f.value,role:"tabpanel"},[E])]}function oe(){if(t.length!==0)return e.animated===!0?[R(ul,{name:v.value},Y)]:Y()}function ce(E){return t=Nl(Ce(E.default,[])).filter(M=>M.props!==null&&M.props.slot===void 0&&w(M.props.name)===!0),t.length}function ge(){return t}return Object.assign(o,{next:g,previous:b,goTo:O}),{panelIndex:r,panelDirectives:$,updatePanelsList:ce,updatePanelIndex:F,getPanelContent:oe,getEnabledPanels:c,getPanels:ge,isValidPanelName:w,keepAliveProps:B,needsUniqueKeepAliveWrapper:h,goToPanelByOffset:p,goToPanel:O,nextPanel:g,previousPanel:b}}var ol=Pe({name:"QTabPanel",props:xa,setup(e,{slots:l}){return()=>R("div",{class:"q-tab-panel",role:"tabpanel"},Ce(l.default))}}),Ra=Pe({name:"QTabPanels",props:{...Va,...ba},emits:Ea,setup(e,{slots:l}){const o=Ve(),a=ga(e,o.proxy.$q),{updatePanelsList:t,getPanelContent:n,panelDirectives:r}=ka(),v=S(()=>"q-tab-panels q-panel-parent"+(a.value===!0?" q-tab-panels--dark q-dark":""));return()=>(t(l),Ul("div",{class:v.value},n(),"pan",e.swipeable,()=>r.value))}}),Dt=Pe({name:"QTooltip",inheritAttrs:!1,props:{...na,...ml,...oa,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:Xt},self:{type:String,default:"top middle",validator:Xt},offset:{type:Array,default:()=>[14,14],validator:ra},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...pl],setup(e,{slots:l,emit:o,attrs:a}){let t,n;const r=Ve(),{proxy:{$q:v}}=r,s=A(null),$=A(!1),P=S(()=>Zt(e.anchor,v.lang.rtl)),C=S(()=>Zt(e.self,v.lang.rtl)),I=S(()=>e.persistent!==!0),{registerTick:f,removeTick:B}=yt(),{registerTimeout:h}=kt(),{transitionProps:g,transitionStyle:b}=ia(e),{localScrollTarget:O,changeScrollEvent:w,unconfigureScrollTarget:D}=sa(e,Ge),{anchorEl:c,canShow:u,anchorEvents:p}=ua({showing:$,configureAnchorEl:Me}),{show:F,hide:Y}=bl({showing:$,canShow:u,handleShow:E,handleHide:M,hideOnRouteChange:I,processOnMount:!0});Object.assign(p,{delayShow:Re,delayHide:Ae});const{showPortal:oe,hidePortal:ce,renderPortal:ge}=da(r,s,_e,"tooltip");if(v.platform.is.mobile===!0){const W={anchorEl:c,innerRef:s,onClickOutside(re){return Y(re),re.target.classList.contains("q-dialog__backdrop")&&Qe(re),!0}},$e=S(()=>e.modelValue===null&&e.persistent!==!0&&$.value===!0);ue($e,re=>{(re===!0?fa:Jt)(W)}),de(()=>{Jt(W)})}function E(W){oe(),f(()=>{n=new MutationObserver(()=>le()),n.observe(s.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),le(),Ge()}),t===void 0&&(t=ue(()=>v.screen.width+"|"+v.screen.height+"|"+e.self+"|"+e.anchor+"|"+v.lang.rtl,le)),h(()=>{oe(!0),o("show",W)},e.transitionDuration)}function M(W){B(),ce(),K(),h(()=>{ce(!0),o("hide",W)},e.transitionDuration)}function K(){n!==void 0&&(n.disconnect(),n=void 0),t!==void 0&&(t(),t=void 0),D(),at(p,"tooltipTemp")}function le(){ca({targetEl:s.value,offset:e.offset,anchorEl:c.value,anchorOrigin:P.value,selfOrigin:C.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function Re(W){if(v.platform.is.mobile===!0){Rt(),document.body.classList.add("non-selectable");const $e=c.value,re=["touchmove","touchcancel","touchend","click"].map(_=>[$e,_,"delayHide","passiveCapture"]);We(p,"tooltipTemp",re)}h(()=>{F(W)},e.delay)}function Ae(W){v.platform.is.mobile===!0&&(at(p,"tooltipTemp"),Rt(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),h(()=>{Y(W)},e.hideDelay)}function Me(){if(e.noParentEvent===!0||c.value===null)return;const W=v.platform.is.mobile===!0?[[c.value,"touchstart","delayShow","passive"]]:[[c.value,"mouseenter","delayShow","passive"],[c.value,"mouseleave","delayHide","passive"]];We(p,"anchor",W)}function Ge(){if(c.value!==null||e.scrollTarget!==void 0){O.value=Fl(c.value,e.scrollTarget);const W=e.noParentEvent===!0?le:Y;w(O.value,W)}}function he(){return $.value===!0?R("div",{...a,ref:s,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",a.class],style:[a.style,b.value],role:"tooltip"},Ce(l.default)):null}function _e(){return R(ul,g.value,he)}return de(K),Object.assign(r.proxy,{updatePosition:le}),ge}});function it(e){return function(l,o){var a={type:zl.CONDITIONAL_VALIDATION,target:l.constructor,propertyName:o,constraints:[function(t,n){return t[o]!==null&&t[o]!==void 0}],validationOptions:e};Yl().addValidationMetadata(new Kl(a))}}var Ot={exports:{}};(function(e,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=n;var o=a(Xl.exports);function a(r){return r&&r.__esModule?r:{default:r}}function t(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(s){return typeof s}:t=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},t(r)}function n(r,v){(0,o.default)(r);var s,$;t(v)==="object"?(s=v.min||0,$=v.max):(s=arguments[1]||0,$=arguments[2]);var P=r.match(/(\uFE0F|\uFE0E)/g)||[],C=r.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g)||[],I=r.length-P.length-C.length;return I>=s&&(typeof $>"u"||I<=$)}e.exports=l.default,e.exports.default=l.default})(Ot,Ot.exports);var yl=Wl(Ot.exports),Da="maxLength";function Oa(e,l){return typeof e=="string"&&yl(e,{min:0,max:l})}function st(e,l){return Nt({name:Da,constraints:[e],validator:{validate:function(o,a){return Oa(o,a==null?void 0:a.constraints[0])},defaultMessage:Mt(function(o){return o+"$property must be shorter than or equal to $constraint1 characters"},l)}},l)}var qa="minLength";function Na(e,l){return typeof e=="string"&&yl(e,{min:l})}function ut(e,l){return Nt({name:qa,constraints:[e],validator:{validate:function(o,a){return Na(o,a==null?void 0:a.constraints[0])},defaultMessage:Mt(function(o){return o+"$property must be longer than or equal to $constraint1 characters"},l)}},l)}var Ma="isBoolean";function Ga(e){return e instanceof Boolean||typeof e=="boolean"}function Ua(e){return Nt({name:Ma,validator:{validate:function(l,o){return Ga(l)},defaultMessage:Mt(function(l){return l+"$property must be a boolean value"},e)}},e)}var Fa=Object.defineProperty,Wa=Object.getOwnPropertyDescriptor,Ie=(e,l,o,a)=>{for(var t=a>1?void 0:a?Wa(l,o):l,n=e.length-1,r;n>=0;n--)(r=e[n])&&(t=(a?r(l,o,t):r(t))||t);return a&&t&&Fa(l,o,t),t};class we extends Oe{id;propertyName;propertyUnit;expectedMonthlyCost;propertyTypeId;streetId;streetNumber;oldCode;propertySubscriberProfileId;isOwner=!1}Ie([Q({message:"Please, enter the property name"})],we.prototype,"propertyName",2);Ie([Q({message:"Please, enter the property unit"})],we.prototype,"propertyUnit",2);Ie([it()],we.prototype,"expectedMonthlyCost",2);Ie([Q({message:"Please, select the property type"})],we.prototype,"propertyTypeId",2);Ie([Q({message:"Please, select the street"})],we.prototype,"streetId",2);Ie([Q({message:"Please, enter the street number"})],we.prototype,"streetNumber",2);Ie([it()],we.prototype,"oldCode",2);Ie([Q({message:"Please, select a custiodian"})],we.prototype,"propertySubscriberProfileId",2);Ie([Ua()],we.prototype,"isOwner",2);const ja={class:"row justify-between"},Qa={class:"q-gutter-xl"},Ha={class:"q-gutter-xl"},za={style:{width:"20rem"}},Ya={class:"row justify-center q-mt-xl",style:{width:"100%"}},Ka=ee({__name:"NewPropertySubscription",emits:["addSubscriber","addPropertyType","addStreet"],setup(e,{emit:l}){ee({name:"new-property-subscription"});const o=l,a=Se("eventBus"),t={width:"35rem"},n={width:"30rem"},r=Ee();pe.handlePostSubscription(a,{onSuccess:O,onError:w});const v=vl();let s;const $=A(),P=A([]),C=A([]),{streets:I}=dl(v),f=De(new we),B=S(()=>P.value.map(c=>({label:c.firstName+" "+c.lastName,value:c.id}))),h=S(()=>C.value.map(c=>({label:`${c.name} - ${c.unitPrice}`,value:c.id}))),g=S(()=>{var c;return(c=I==null?void 0:I.value)==null?void 0:c.map(u=>({label:u.name,value:u.id}))});Ke(async()=>{f.validate()});async function b(){var c;if(f.validate(),!Je(f)){console.log("the following errors exist",f.errors),await((c=$.value)==null?void 0:c.validate());return}r.loading.show({message:"Submitting ..."}),a.emit(U.NEW_PROPERTY_SUBSCRIPTION,f),s=setTimeout(()=>{r.loading.hide()},Xe)}function O(){f.clearValues(),J({loader:r.loading,timer:s})}function w(){J({loader:r.loading,timer:s})}function D(c){o(c)}return ue([()=>f.propertyTypeId,()=>f.propertyUnit],([c,u])=>{if(c&&u){const p=C.value.find(F=>F.id===c);return f.expectedMonthlyCost=String(Number(p==null?void 0:p.unitPrice)*u),f.expectedMonthlyCost}}),ye(async()=>{try{I!=null&&I.value||v.fetchServerData({type:"street"}),C.value=await pe.getPropertyTypes(),P.value=await pe.getSubscriberUsers()}catch(c){console.log(c)}}),de(()=>{a.off(U.NEW_PROPERTY_SUBSCRIPTION)}),(c,u)=>(N(),fe(me,null,[i(te,{class:"text-center"},{default:d(()=>[i(qe,null,{default:d(()=>[ve("New Property Subscription")]),_:1})]),_:1}),i(te,null,{default:d(()=>[i(V(rt),{class:"q-pa-md",style:{height:"100%"},onSubmit:u[15]||(u[15]=se(()=>{},["prevent"])),ref_key:"propertySubscriptionForm",ref:$},{default:d(()=>[L("div",ja,[L("div",Qa,[i(ae,{style:n,label:"Property Name",type:"text",modelValue:f.propertyName,"onUpdate:modelValue":u[0]||(u[0]=p=>f.propertyName=p),filled:"",outlined:"",color:"secondary","label-color":"dark",rules:[()=>c.$validateField(f,"propertyName")]},null,8,["modelValue","rules"]),i(ae,{style:n,label:"Property Unit",type:"text",modelValue:f.propertyUnit,"onUpdate:modelValue":u[1]||(u[1]=p=>f.propertyUnit=p),filled:"",outlined:"",color:"secondary","label-color":"dark",rules:[()=>c.$validateField(f,"propertyUnit")]},null,8,["modelValue","rules"]),i(ae,{style:n,label:"Expected Monthly Cost",type:"text",modelValue:f.expectedMonthlyCost,"onUpdate:modelValue":u[2]||(u[2]=p=>f.expectedMonthlyCost=p),filled:"",outlined:"",color:"secondary","label-color":"dark"},{default:d(()=>[i(Dt,null,{default:d(()=>[ve("Expected Monthly Cost")]),_:1})]),_:1},8,["modelValue"]),i(ae,{style:n,label:"Old Code",type:"text",modelValue:f.oldCode,"onUpdate:modelValue":u[3]||(u[3]=p=>f.oldCode=p),filled:"",outlined:"",color:"secondary","label-color":"dark"},null,8,["modelValue"])]),L("div",Ha,[L("div",{class:"row",style:t},[i(V(be),{style:{width:"70%"},label:"Street",filled:"",outlined:"",modelValue:f.streetId,"onUpdate:modelValue":u[6]||(u[6]=p=>f.streetId=p),color:"secondary","label-color":"dark",options:g.value,rules:[()=>c.$validateField(f,"streetId")],clearable:"","emit-value":"","map-options":""},{append:d(()=>[i(V(j),{round:"",flat:"",dense:"",icon:"add",onClick:u[4]||(u[4]=se(p=>D("addStreet"),["prevent","stop"]))})]),"no-option":d(()=>[i(ze,null,{default:d(()=>[i(Ye,{class:"text-grey"},{default:d(()=>[i(V(j),{flat:"",dense:"",label:"Add Street",onClick:u[5]||(u[5]=p=>D("addStreet"))})]),_:1})]),_:1})]),_:1},8,["modelValue","options","rules"]),i(ae,{style:{width:"30%"},label:"Number",type:"text",modelValue:f.streetNumber,"onUpdate:modelValue":u[7]||(u[7]=p=>f.streetNumber=p),filled:"",outlined:"",color:"secondary","label-color":"dark"},{default:d(()=>[i(Dt,null,{default:d(()=>[ve("Street Number")]),_:1})]),_:1},8,["modelValue"])]),L("div",{style:t},[i(V(be),{style:{width:"100%"},label:"Property Type",filled:"",outlined:"",modelValue:f.propertyTypeId,"onUpdate:modelValue":u[10]||(u[10]=p=>f.propertyTypeId=p),color:"secondary","label-color":"dark",options:h.value,clearable:"",rules:[()=>c.$validateField(f,"propertyTypeId")],"emit-value":"","map-options":""},{append:d(()=>[i(V(j),{round:"",dense:"",flat:"",icon:"add",onClick:u[8]||(u[8]=se(p=>D("addPropertyType"),["prevent","stop"]))})]),"no-option":d(()=>[i(ze,null,{default:d(()=>[i(Ye,{class:"text-grey"},{default:d(()=>[i(V(j),{dense:"",flat:"",label:"Add Property Type",onClick:u[9]||(u[9]=p=>D("addPropertyType"))})]),_:1})]),_:1})]),_:1},8,["modelValue","options","rules"])]),L("div",{style:t},[i(V(be),{style:{width:"100%"},label:"Custodian",filled:"",outlined:"",modelValue:f.propertySubscriberProfileId,"onUpdate:modelValue":u[13]||(u[13]=p=>f.propertySubscriberProfileId=p),color:"secondary","label-color":"dark",clearable:"",options:B.value,rules:[()=>c.$validateField(f,"propertySubscriberProfileId")],"emit-value":"","map-options":""},{append:d(()=>[i(V(j),{round:"",dense:"",flat:"",icon:"add",onClick:u[11]||(u[11]=se(p=>D("addSubscriber"),["prevent","stop"]))})]),"no-option":d(()=>[i(ze,null,{default:d(()=>[i(Ye,{class:"text-grey"},{default:d(()=>[i(V(j),{dense:"",flat:"",label:"Add Subscriber",onClick:u[12]||(u[12]=p=>D("addSubscriber"))})]),_:1})]),_:1})]),_:1},8,["modelValue","options","rules"])]),L("div",za,[i(Et,{label:"Is Owner",modelValue:f.isOwner,"onUpdate:modelValue":u[14]||(u[14]=p=>f.isOwner=p),color:"primary"},null,8,["modelValue"])])])]),L("div",Ya,[i(V(j),{style:{width:"40%"},label:"Submit",rounded:"",color:"primary",type:"submit",onClick:se(b,["prevent"])})])]),_:1},512)]),_:1})],64))}});var Xa=Pe({name:"QToggle",props:{...Jl,icon:String,iconColor:String},emits:Zl,setup(e){function l(o,a){const t=S(()=>(o.value===!0?e.checkedIcon:a.value===!0?e.indeterminateIcon:e.uncheckedIcon)||e.icon),n=S(()=>o.value===!0?e.iconColor:null);return()=>[R("div",{class:"q-toggle__track"}),R("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},t.value!==void 0?[R(xe,{name:t.value,color:n.value})]:void 0)]}return ea("toggle",l)}}),Ja=Object.defineProperty,Za=Object.getOwnPropertyDescriptor,St=(e,l,o,a)=>{for(var t=a>1?void 0:a?Za(l,o):l,n=e.length-1,r;n>=0;n--)(r=e[n])&&(t=(a?r(l,o,t):r(t))||t);return a&&t&&Ja(l,o,t),t};class dt extends Oe{streetId;propertySuscriptionId;month;year;type;forAllProperties;forPropertiesOnStreet}St([it()],dt.prototype,"streetId",2);St([Q({message:"Please, select the property subscsription"})],dt.prototype,"propertySuscriptionId",2);St([Q({message:"Please, select the month"})],dt.prototype,"month",2);St([Q({message:"Please, select the year"})],dt.prototype,"year",2);async function en(e){const l=await gl.post(je.BILLING,e);if(l.status===201)return l.data;throw new Error("Attempt to generate billing failed",{cause:l.data})}async function tn(e){const l=await gl.get(je.BILLING,{params:e});if(l.status===200)return l.data;throw new Error("Could not fetch billings")}class ln{static async handGenerateBilling(l,{onSuccess:o,onError:a}={}){l.on(U.GENERATE_BILLING,async t=>{try{await en(t),o==null||o(),$t.create({message:"Process was successful",color:"positive"})}catch(n){a==null||a(),$t.create({message:n.message,color:"negative",icon:"warning",timeout:5e3})}})}static async getBilling(l){try{return await tn(l)}catch(o){$t.create({message:o.message,color:"negative",icon:"warning",timeout:5e3})}}}class lt{static async getBillingAccountArrears(l){try{const o=l.limit,a=l.page;return await pt(je.BILLING_ACCOUNT_ARREARS,"get",{params:{limit:o,page:a,month:l.month}})}catch{nt({type:"negative"})}}static async handleViewBillingDetails(l,{onSuccess:o,onError:a}={}){l.on(U.VIEW_BILLING_DETAILS,async({streetId:t,billingMonth:n})=>{try{const r=await pt(je.BILLING_ACCOUNT_DETAILS.replace(":streetId",t),"get",{params:{billingMonth:n}});o==null||o(r)}catch(r){a==null||a(r),nt({type:"negative"})}})}static async handleGetDefaulters(l,{onSuccess:o,onError:a}={}){l.on(U.GET_DEFAULTERS,async({streetId:t})=>{try{const n=await pt(je.BILLING_ACCOUNT_DEFAULTER.replace(":streetId",t),"get");o==null||o(n)}catch(n){a==null||a(n),nt({type:"negative"})}})}static async getBillingsForPrinting(l,o){const a=await pt(je.BILLING_ACCOUNT_DETAILS.replace(":streetId",l),"get",{params:{billingMonth:o}});return _a().updateBilling({type:"billingDetail",data:a}),a}}const an={class:"row justify-between q-my-lg"},nn={class:"q-gutter-xl",style:{width:"40%"}},on={class:"q-gutter-xl",style:{width:"50%"}},rn={class:"row justify-between q-mt-md",style:{height:"7rem"}},sn={class:"column"},un={class:"column justify-end",style:{height:"100%"}},dn=ee({__name:"GenerateBill",setup(e){ee({name:"generate-bill"});const l=vl(),o=_t[new Date().getMonth()+1],a=Se("eventBus"),t=Ee(),n=jl();let r;ln.handGenerateBilling(a,{onSuccess:w,onError:D});const v=A("generate"),{streets:s}=dl(l),$=A(),P=A(),C=S(()=>v.value==="print"?"Print Bill":"Generate Bill"),I=S(()=>va),f=S(()=>Object.values(_t).map(c=>c)),B=S(()=>v.value==="print"?"Print":"Generate"),h=S(()=>{var c;return(c=s==null?void 0:s.value)==null?void 0:c.map(u=>({label:u.name,value:u.id}))}),g=S(()=>{var c;return(c=$.value)==null?void 0:c.map(u=>({label:u.propertySubscriptionName,value:u.propertySubscriptionId}))}),b=De(new dt);async function O(){if(t.loading.show({message:"Please, wait ..."}),b.type==="print"){await lt.getBillingsForPrinting(b.streetId,b.month),n.push("/print");return}else a.emit(U.GENERATE_BILLING,b);r=setTimeout(()=>{t.loading.show()},Xe)}function w(){b.clearValues(),J({loader:t.loading,timer:r})}function D(){J({loader:t.loading,timer:r})}return ue(v,c=>{c&&(b.type=c)}),ue(()=>b.forAllProperties,c=>{c&&(b.forPropertiesOnStreet=!1)}),ue(()=>b.streetId,async c=>{if(console.log("this is the new val from watch on streetId",c),c){b.propertySuscriptionId="";const u=await pe.getSubscriptions({streetId:c});$.value=u==null?void 0:u.data}}),ye(()=>{b.month=o,b.year=String(new Date().getFullYear()),b.type=v.value}),ye(async()=>{s!=null&&s.value||await l.fetchServerData({type:"street"})}),ye(async()=>{const c=await pe.getSubscriptions();$.value=c==null?void 0:c.data}),de(()=>{J({loader:t.loading,timer:r})}),(c,u)=>(N(),fe(me,null,[i(te,{class:"row justify-between"},{default:d(()=>[L("div",{style:Ue({color:`${c.$getColor("primary")}`})},[i(qe,{"header-text-size":"h5"},{default:d(()=>[ve(ot(C.value),1)]),_:1})],4),L("div",null,[L("span",{class:Yt([v.value==="print"?"text-primary":""])},"Print Bill",2),i(Xa,{"toggle-indeterminate":!1,"toggle-order":"tf","true-value":"generate","false-value":"print",modelValue:v.value,"onUpdate:modelValue":u[0]||(u[0]=p=>v.value=p),"keep-color":""},null,8,["modelValue"]),L("span",{class:Yt([v.value!=="print"?"text-primary":""])},"Generate Bill",2)])]),_:1}),i(te,null,{default:d(()=>[L("form",{class:"q-pa-md",style:{height:"100%"},onSubmit:u[7]||(u[7]=se(()=>{},["prevent"])),ref_key:"billingModelForm",ref:P},[L("div",an,[L("div",nn,[i(be,{label:"Street",modelValue:b.streetId,"onUpdate:modelValue":u[1]||(u[1]=p=>b.streetId=p),filled:"",outlined:"",color:"secondary","label-color":"dark",options:h.value,"emit-value":"","map-options":""},null,8,["modelValue","options"]),i(be,{modelValue:b.month,"onUpdate:modelValue":u[2]||(u[2]=p=>b.month=p),label:"Month",type:"text",filled:"",outlined:"",color:"secondary","label-color":"dark",options:f.value},null,8,["modelValue","options"])]),L("div",on,[i(be,{modelValue:b.propertySuscriptionId,"onUpdate:modelValue":u[3]||(u[3]=p=>b.propertySuscriptionId=p),label:"Property Subscription Id",type:"text",filled:"",outlined:"",color:"secondary","label-color":"dark",options:g.value,"emit-value":"","map-options":""},null,8,["modelValue","options"]),i(be,{modelValue:b.year,"onUpdate:modelValue":u[4]||(u[4]=p=>b.year=p),label:"Year",type:"text",filled:"",outlined:"",options:I.value,color:"secondary","label-color":"dark","emit-value":"","map-options":""},null,8,["modelValue","options"])])]),L("div",rn,[L("div",sn,[i(Et,{label:`${B.value} for properties on street.`,modelValue:b.forPropertiesOnStreet,"onUpdate:modelValue":u[5]||(u[5]=p=>b.forPropertiesOnStreet=p),disable:b.forAllProperties},null,8,["label","modelValue","disable"]),i(Et,{label:`${B.value} all bills.`,modelValue:b.forAllProperties,"onUpdate:modelValue":u[6]||(u[6]=p=>b.forAllProperties=p)},null,8,["label","modelValue"])]),L("div",un,[i(j,{rounded:"",color:"primary",onClick:O},{default:d(()=>[ve(ot(v.value==="print"?"Print":"Generate"),1)]),_:1})])])],544)]),_:1})],64))}});var cn=Object.defineProperty,fn=Object.getOwnPropertyDescriptor,Ne=(e,l,o,a)=>{for(var t=a>1?void 0:a?fn(l,o):l,n=e.length-1,r;n>=0;n--)(r=e[n])&&(t=(a?r(l,o,t):r(t))||t);return a&&t&&cn(l,o,t),t};class ke extends Oe{id;firstName;lastName;email;oldCode;phone;phoneCodeId;password}Ne([Q({message:"First name is required"}),ut(2,{message:"First name must be at least 2 characters"}),st(50,{message:"First name must be less than 50 characters"})],ke.prototype,"firstName",2);Ne([Q({message:"Last name is required"})],ke.prototype,"lastName",2);Ne([Q({message:"Email is required"}),Sa({},{message:"Email is invalid"})],ke.prototype,"email",2);Ne([it()],ke.prototype,"oldCode",2);Ne([Q({message:"Phone number is required"})],ke.prototype,"phone",2);Ne([Q({message:"Phone code is required"})],ke.prototype,"phoneCodeId",2);Ne([it()],ke.prototype,"password",2);const ct=ee({__name:"ModalPopupClose",setup(e){return ee({name:"modal-popup-close"}),(l,o)=>ht((N(),Z(j,{round:"",dense:"",icon:"close"},null,512)),[[ma]])}}),vn={class:"row justify-between q-py-sm"},mn={class:"row justify-between"},pn={class:"q-gutter-xl"},bn={class:"q-gutter-xl"},gn={class:"flex row"},yn={class:"flex row justify-center"},hn=ee({__name:"AddSubscriber",setup(e){var f,B;ee({name:"add-subscriber"});const l=Se("eventBus"),o=Ee(),a=A(),t=A();(f=a.value)==null||f.focus(),(B=t.value)==null||B.focus();const n=A([]),r=A();pe.handlePostSubscriberUser(l,{onSuccess:C,onError:I});let v;const s=De(new ke);Ke(async()=>{await s.validate()});const $=S(()=>{var h;return(h=n.value)==null?void 0:h.map(g=>({label:g.name,value:g.id}))});function P(){var h;if(!Je(s)){(h=r.value)==null||h.validate();return}l.emit(U.POST_SUBSCRIBER,s),o.loading.show({message:"Submitting ..."}),v=setTimeout(()=>{o.loading.hide()},Xe)}function C(){s.clearValues(),J({loader:o.loading,timer:v})}function I(){J({loader:o.loading,timer:v})}return ye(async()=>{var h,g;console.log((h=t.value)==null?void 0:h.focus),(g=a.value)==null||g.focus(),n.value=await pe.getPhoneCodes()}),de(()=>{J({loader:o.loading,timer:v}),l.off(U.POST_SUBSCRIBER)}),(h,g)=>(N(),fe(me,null,[i(te,{class:"q-px-md"},{default:d(()=>[L("div",vn,[i(qe,null,{default:d(()=>[ve(" Add Subscriber ")]),_:1}),L("div",null,[i(ct)])])]),_:1}),i(te,{class:"q-px-md"},{default:d(()=>[i(V(rt),{onSubmit:g[6]||(g[6]=se(()=>{},["prevent"])),ref_key:"subscriberForm",ref:r},{default:d(()=>[L("div",mn,[L("div",pn,[i(V(ae),{label:"First Name",filled:"",outlined:"",modelValue:s.firstName,"onUpdate:modelValue":g[0]||(g[0]=b=>s.firstName=b),"lazy-rules":"",rules:[()=>h.$validateField(s,"firstName")],ref_key:"inputRef",ref:t},null,8,["modelValue","rules"]),i(V(ae),{label:"Email",filled:"",outlined:"",modelValue:s.email,"onUpdate:modelValue":g[1]||(g[1]=b=>s.email=b),"lazy-rules":"",rules:[()=>h.$validateField(s,"email")]},null,8,["modelValue","rules"]),i(V(ae),{label:"Old Code",filled:"",outlined:"",modelValue:s.oldCode,"onUpdate:modelValue":g[2]||(g[2]=b=>s.oldCode=b),"lazy-rules":"",rules:[()=>h.$validateField(s,"oldCode")]},null,8,["modelValue","rules"])]),L("div",bn,[i(V(ae),{label:"Last Name",filled:"",outlined:"",modelValue:s.lastName,"onUpdate:modelValue":g[3]||(g[3]=b=>s.lastName=b),"lazy-rules":"",rules:[()=>h.$validateField(s,"lastName")]},null,8,["modelValue","rules"]),L("div",gn,[i(be,{label:"Country Phone Code",filled:"",outlined:"","label-color":"dark",modelValue:s.phoneCodeId,"onUpdate:modelValue":g[4]||(g[4]=b=>s.phoneCodeId=b),options:$.value,"emit-value":"","map-options":"",clearable:""},null,8,["modelValue","options"]),i(V(ae),{label:"Phone",filled:"",outlined:"",modelValue:s.phone,"onUpdate:modelValue":g[5]||(g[5]=b=>s.phone=b),"lazy-rules":"",rules:[()=>h.$validateField(s,"phone")]},null,8,["modelValue","rules"])])])]),L("div",yn,[i(j,{style:{width:"40%"},label:"Submit",rounded:"",color:"primary",type:"submit",onClick:P})])]),_:1},512)]),_:1})],64))}});var _n=Object.defineProperty,Sn=Object.getOwnPropertyDescriptor,Gt=(e,l,o,a)=>{for(var t=a>1?void 0:a?Sn(l,o):l,n=e.length-1,r;n>=0;n--)(r=e[n])&&(t=(a?r(l,o,t):r(t))||t);return a&&t&&_n(l,o,t),t};class Pt extends Oe{id;name;lgaId;lgaWardId}Gt([Q({message:"Street name is required"}),ut(2,{message:"Street name cannot be less than 2 characters"}),st(50,{message:"Street name cannot be more than 255 characters"})],Pt.prototype,"name",2);Gt([Q({message:"Select an Lga"})],Pt.prototype,"lgaId",2);Gt([Q({message:"Select an Lga ward"})],Pt.prototype,"lgaWardId",2);const Pn={class:"flex row justify-between"},wn={class:"q-gutter-xl"},Tn={class:"flex row justify-center q-mt-lg"},Cn=ee({__name:"AddStreet",emits:["addLga","addLgaWard"],setup(e){ee({name:"add-street"});const l=A([]),o=A([]),a=Se("eventBus"),t=Ee(),n=A(),r=A(!1);let v;const s=De(new Pt);He.handlePostStreet(a,{onSuccess:I,onError:f});const $=S(()=>l.value.map(h=>({label:h.name,value:h.id}))),P=S(()=>o.value.map(h=>({label:h.name,value:h.id})));Ke(async()=>{await s.validate()});function C(){var h;if(!r.value){if(!Je(s)){(h=n.value)==null||h.validate();return}r.value=!0,t.loading.show({message:"Submitting ..."}),a.emit(U.POST_STREET,s),v=setTimeout(()=>{t.loading.hide()},Xe)}}function I(){s.clearValues(),J({loader:t.loading,timer:v})}function f(){J({loader:t.loading,timer:v})}function B(h){a.emit(h)}return ue(()=>s.lgaId,async h=>{o.value=await He.getLgaWards({lgaId:h})}),ye(async()=>{l.value=await He.getLgas()}),de(()=>{J({loader:t.loading,timer:v})}),de(()=>{a.off(U.POST_STREET)}),(h,g)=>(N(),fe(me,null,[i(te,null,{default:d(()=>[L("div",Pn,[i(qe,null,{default:d(()=>[ve("Add Street")]),_:1}),i(ct)])]),_:1}),i(te,null,{default:d(()=>[i(V(rt),{class:"q-px-lg",onSubmit:g[7]||(g[7]=se(()=>{},["prevent"])),ref_key:"addStreetForm",ref:n},{default:d(()=>[L("div",wn,[i(ae,{label:"Street Name",type:"text",modelValue:s.name,"onUpdate:modelValue":g[0]||(g[0]=b=>s.name=b),filled:"",outlined:"",color:"secondary","label-color":"dark",rules:[()=>h.$validateField(s,"name")]},null,8,["modelValue","rules"]),i(be,{label:"Lga",filled:"",outlined:"",color:"secondary","label-color":"dark",options:$.value,rules:[()=>h.$validateField(s,"lgaId")],modelValue:s.lgaId,"onUpdate:modelValue":g[3]||(g[3]=b=>s.lgaId=b),"emit-value":"","map-options":"",clearable:""},{append:d(()=>[i(j,{round:"",flat:"",dense:"",icon:"add",onClick:g[1]||(g[1]=se(b=>B(V(U).TRIGGER_REMOTE_MODAL_LGA),["prevent","stop"]))})]),"no-option":d(()=>[i(ze,null,{default:d(()=>[i(Ye,{class:"text-grey"},{default:d(()=>[i(j,{label:"Add LGA",dense:"",flat:"",onClick:g[2]||(g[2]=b=>B(V(U).TRIGGER_REMOTE_MODAL_LGA))})]),_:1})]),_:1})]),_:1},8,["options","rules","modelValue"]),i(be,{label:"LGA Ward",filled:"",outlined:"",color:"secondary","label-color":"dark",options:P.value,rules:[()=>h.$validateField(s,"lgaWardId")],modelValue:s.lgaWardId,"onUpdate:modelValue":g[6]||(g[6]=b=>s.lgaWardId=b),"emit-value":"","map-options":"",clearable:""},{append:d(()=>[i(j,{round:"",flat:"",dense:"",icon:"add",onClick:g[4]||(g[4]=se(b=>B(V(U).TRIGGER_REMOTE_MODAL_LGA_WARD),["prevent","stop"]))})]),"no-option":d(()=>[i(ze,null,{default:d(()=>[i(Ye,{class:"text-grey"},{default:d(()=>[i(j,{label:"Add LGA Ward",flat:"",dense:"",onClick:g[5]||(g[5]=b=>B(V(U).TRIGGER_REMOTE_MODAL_LGA_WARD))})]),_:1})]),_:1})]),_:1},8,["options","rules","modelValue"])]),L("div",Tn,[i(j,{style:{width:"40%"},label:"submit",type:"submit",color:"primary",rounded:"",onClick:C})])]),_:1},512)]),_:1})],64))}});var In=Object.defineProperty,An=Object.getOwnPropertyDescriptor,hl=(e,l,o,a)=>{for(var t=a>1?void 0:a?An(l,o):l,n=e.length-1,r;n>=0;n--)(r=e[n])&&(t=(a?r(l,o,t):r(t))||t);return a&&t&&In(l,o,t),t};class Ut extends Oe{id;name;unitPrice}hl([Q({message:"Property type name is required"}),ut(2),st(50)],Ut.prototype,"name",2);hl([Q({message:"Property type unit price is required"}),pa({},{message:"Please, type in numeric value."})],Ut.prototype,"unitPrice",2);const $n={class:"flex row justify-between"},Ln={class:"q-gutter-md"},Bn={class:"flex row justify-center"},xn=ee({__name:"AddPropertyType",setup(e){const l=A(),o=Se("eventBus"),a=Ee();let t;const n=De(new Ut);Ke(async()=>{await n.validate()});function r(){var $;Je(n)||($=l.value)==null||$.validate(),a.loading.show({message:"Submitting ..."}),o.emit(U.POST_PROPERTY_TYPE,n),t=setTimeout(()=>{a.loading.hide()},2e3)}function v(){n.clearValues(),J({loader:a.loading,timer:t})}function s(){J({loader:a.loading,timer:t})}return ye(()=>{pe.handlePostPropertyType(o,{onSuccess:v,onError:s})}),de(()=>{o.off(U.POST_PROPERTY_TYPE)}),($,P)=>(N(),fe(me,null,[i(te,null,{default:d(()=>[L("div",$n,[i(qe,null,{default:d(()=>[ve("Add Property Type")]),_:1}),i(ct)])]),_:1}),i(te,null,{default:d(()=>[i(V(rt),{class:"q-px-",onSubmit:P[2]||(P[2]=se(()=>{},["prevent"]))},{default:d(()=>[L("div",Ln,[i(ae,{label:"Name",type:"text",modelValue:n.name,"onUpdate:modelValue":P[0]||(P[0]=C=>n.name=C),filled:"",outlined:"",color:"secondary","label-color":"dark",rules:[()=>$.$validateField(n,"name")]},null,8,["modelValue","rules"]),i(ae,{label:"Unit Price",type:"number",modelValue:n.unitPrice,"onUpdate:modelValue":P[1]||(P[1]=C=>n.unitPrice=C),filled:"",outlined:"",color:"secondary","label-color":"dark",rules:[()=>$.$validateField(n,"unitPrice")]},null,8,["modelValue","rules"])]),L("div",Bn,[i(j,{style:{width:"40%"},label:"submit",type:"submit",color:"primary",rounded:"",onClick:se(r,["prevent"])})])]),_:1})]),_:1})],64))}});var Vn=Object.defineProperty,En=Object.getOwnPropertyDescriptor,kn=(e,l,o,a)=>{for(var t=a>1?void 0:a?En(l,o):l,n=e.length-1,r;n>=0;n--)(r=e[n])&&(t=(a?r(l,o,t):r(t))||t);return a&&t&&Vn(l,o,t),t};class _l extends Oe{id;name}kn([Q({message:"LGA name is required"}),ut(2,{message:"LGA name must be at least 2 characters"}),st(50,{message:"LGA name must be less than 50 characters"})],_l.prototype,"name",2);const Rn={class:"flex row justify-between"},Dn={class:"flex row justify-center q-mt-lg"},On=ee({__name:"AddLga",setup(e){ee({name:"add-lga"});const l=Se("eventBus"),o=Ee();let a;const t=De(new _l);He.handlePostLga(l,{onSuccess:r,onError:v}),Ke(async()=>{t.validate()});function n(){!Je(t)||(o.loading.show({message:"Submitting ..."}),l.emit(U.POST_LGA,t),a=setTimeout(()=>{o.loading.hide()},Xe))}function r(){t.clearValues(),J({loader:o.loading,timer:a})}function v(){J({loader:o.loading,timer:a})}return de(()=>{J({loader:o.loading,timer:a})}),de(()=>{l.off(U.POST_LGA)}),(s,$)=>(N(),fe(me,null,[i(te,null,{default:d(()=>[L("div",Rn,[i(qe,null,{default:d(()=>[ve("Add L.G.A.")]),_:1}),i(ct)])]),_:1}),i(te,null,{default:d(()=>[L("form",null,[L("div",null,[i(ae,{label:"Name",filled:"",outlined:"","label-color":"dark",modelValue:t.name,"onUpdate:modelValue":$[0]||($[0]=P=>t.name=P),rules:[()=>s.$validateField(t,"name")]},null,8,["modelValue","rules"])]),L("div",Dn,[i(j,{style:{width:"40%"},label:"submit",type:"submit",color:"primary",rounded:"",onClick:se(n,["prevent"])})])])]),_:1})],64))}});var qn=Object.defineProperty,Nn=Object.getOwnPropertyDescriptor,Sl=(e,l,o,a)=>{for(var t=a>1?void 0:a?Nn(l,o):l,n=e.length-1,r;n>=0;n--)(r=e[n])&&(t=(a?r(l,o,t):r(t))||t);return a&&t&&qn(l,o,t),t};class Ft extends Oe{id;name;lgaId}Sl([Q({message:"LGA ward name is required"}),ut(2,{message:"LGA ward name must be at least 2 characters"}),st(50,{message:"LGA ward name must be less than 50 characters"})],Ft.prototype,"name",2);Sl([Q({message:"Select an LGA"})],Ft.prototype,"lgaId",2);const Mn={class:"flex row justify-between"},Gn={class:"flex row justify-center q-mt-lg"},Un=ee({__name:"AddLgaWard",setup(e){ee({name:"add-lga-ward"});const l=A([]),o=A(),a=Se("eventBus"),t=Ee();let n;const r=De(new Ft);He.handlePostLgaWard(a,{onSuccess:$,onError:P}),Ke(async()=>{console.log("this is the lgaWardId: ",r.lgaId),r.validate()});const v=S(()=>l.value.map(C=>({label:C.name,value:C.id})));function s(){if(!Je(r)){r.validate();return}t.loading.show({message:"Submitting ..."}),a.emit(U.POST_LGA_WARD,r),n=setTimeout(()=>{t.loading.hide()},Xe)}function $(){r.clearValues(),J({loader:t.loading,timer:n})}function P(){J({loader:t.loading,timer:n})}return ye(async()=>{l.value=await He.getLgas()}),de(()=>{J({loader:t.loading,timer:n})}),(C,I)=>(N(),fe(me,null,[i(te,null,{default:d(()=>[L("div",Mn,[i(qe,null,{default:d(()=>[ve("Add L.G.A. Ward")]),_:1}),i(ct)])]),_:1}),i(te,null,{default:d(()=>[i(V(rt),{ref_key:"lgaWardForm",ref:o},{default:d(()=>[L("div",null,[i(ae,{label:"Name",filled:"",outlined:"","label-color":"dark",modelValue:r.name,"onUpdate:modelValue":I[0]||(I[0]=f=>r.name=f),rules:[()=>C.$validateField(r,"name")]},null,8,["modelValue","rules"]),i(be,{label:"Select L.G.A.",filled:"",outlined:"","label-color":"dark",modelValue:r.lgaId,"onUpdate:modelValue":I[1]||(I[1]=f=>r.lgaId=f),options:v.value,rules:[()=>C.$validateField(r,"lgaId")],"emit-value":"","map-options":"",clearable:""},{append:d(()=>[i(j,{flat:"",round:"",dense:"",icon:"add"})]),"no-option":d(()=>[i(ze,null,{default:d(()=>[i(Ye,null,{default:d(()=>[i(j,{label:"Create L.G.A.",flat:"",dense:""})]),_:1})]),_:1})]),_:1},8,["modelValue","options","rules"])]),L("div",Gn,[i(j,{style:{width:"40%"},label:"submit",type:"submit",color:"primary",rounded:"",onClick:se(s,["prevent"])})])]),_:1},512)]),_:1})],64))}});var ie=(e=>(e.PROPERTIES="Properties",e.BILLINGS="Billings",e))(ie||{}),Be=(e=>(e[e.ADD_SUBSCRIBER=0]="ADD_SUBSCRIBER",e[e.ADD_STREET=1]="ADD_STREET",e[e.ADD_PROPERTY_TYPE=2]="ADD_PROPERTY_TYPE",e))(Be||{}),Fe=(e=>(e[e.ADD_LGA=0]="ADD_LGA",e[e.ADD_LGA_WARD=1]="ADD_LGA_WARD",e))(Fe||{});const Fn=["top","right","bottom","left"],Pl={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>Fn.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function wl(e,l){return{formClass:S(()=>`q-fab--form-${e.square===!0?"square":"rounded"}`),stacked:S(()=>e.externalLabel===!1&&["top","bottom"].includes(e.labelPosition)),labelProps:S(()=>{if(e.externalLabel===!0){const o=e.hideLabel===null?l.value===!1:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${e.labelPosition}`+(o===!0?" q-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${e.labelPosition}`+(e.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:e.labelStyle}}})}}const Tl={start:"self-end",center:"self-center",end:"self-start"},Wn=Object.keys(Tl);var jn=Pe({name:"QFabAction",props:{...Pl,icon:{type:String,default:""},anchor:{type:String,validator:e=>Wn.includes(e)},to:[String,Object],replace:Boolean},emits:["click"],setup(e,{slots:l,emit:o}){const a=Se(cl,()=>({showing:{value:!0},onChildClick:sl})),{formClass:t,labelProps:n}=wl(e,a.showing),r=S(()=>{const C=Tl[e.anchor];return t.value+(C!==void 0?` ${C}`:"")}),v=S(()=>e.disable===!0||a.showing.value!==!0);function s(C){a.onChildClick(C),o("click",C)}function $(){const C=[];return l.icon!==void 0?C.push(l.icon()):e.icon!==""&&C.push(R(xe,{name:e.icon})),(e.label!==""||l.label!==void 0)&&C[n.value.action](R("div",n.value.data,l.label!==void 0?l.label():[e.label])),qt(l.default,C)}const P=Ve();return Object.assign(P.proxy,{click:s}),()=>R(j,{class:r.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:v.value,onClick:s},$)}});const Qn=["up","right","down","left"],Hn=["left","center","right"];var zn=Pe({name:"QFab",props:{...Pl,...ml,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{default:null},direction:{type:String,default:"right",validator:e=>Qn.includes(e)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>Hn.includes(e)}},emits:pl,setup(e,{slots:l}){const o=A(null),a=A(e.modelValue===!0),t=fl(),{proxy:{$q:n}}=Ve(),{formClass:r,labelProps:v}=wl(e,a),s=S(()=>e.persistent!==!0),{hide:$,toggle:P}=bl({showing:a,hideOnRouteChange:s}),C=S(()=>({opened:a.value})),I=S(()=>`q-fab z-fab row inline justify-center q-fab--align-${e.verticalActionsAlign} ${r.value}`+(a.value===!0?" q-fab--opened":" q-fab--closed")),f=S(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${e.direction} q-fab__actions--${a.value===!0?"opened":"closed"}`),B=S(()=>{const O={id:t,role:"menu"};return a.value!==!0&&(O["aria-hidden"]="true"),O}),h=S(()=>`q-fab__icon-holder  q-fab__icon-holder--${a.value===!0?"opened":"closed"}`);function g(O,w){const D=l[O],c=`q-fab__${O} absolute-full`;return D===void 0?R(xe,{class:c,name:e[w]||n.iconSet.fab[w]}):R("div",{class:c},D(C.value))}function b(){const O=[];return e.hideIcon!==!0&&O.push(R("div",{class:h.value},[g("icon","icon"),g("active-icon","activeIcon")])),(e.label!==""||l.label!==void 0)&&O[v.value.action](R("div",v.value.data,l.label!==void 0?l.label(C.value):[e.label])),qt(l.tooltip,O)}return il(cl,{showing:a,onChildClick(O){$(O),o.value!==null&&o.value.$el.focus()}}),()=>R("div",{class:I.value},[R(j,{ref:o,class:r.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":a.value===!0?"true":"false","aria-haspopup":"true","aria-controls":t,onClick:P},b),R("div",{class:f.value,...B.value},Ce(l.default))])}});const Yn=ee({__name:"AdvanceTableMenu",props:{menuItems:{default:()=>[]},padding:{default:"xs"}},emits:["menuItemClickHandler"],setup(e){return ee({name:"advance-table-menu"}),(l,o)=>(N(),Z(zn,{color:"transparent","text-color":"black",icon:"keyboard_arrow_left",direction:"left",padding:"xs",margin:"xs"},{default:d(()=>[(N(!0),fe(me,null,tt(l.menuItems,a=>(N(),Z(jn,{key:a.label,icon:a.icon,color:a.color,"text-color":a.textColor,padding:"xs",onClick:t=>l.$emit("menuItemClickHandler",a)},{default:d(()=>[i(Dt,null,{default:d(()=>[ve(ot(a.label),1)]),_:2},1024)]),_:2},1032,["icon","color","text-color","onClick"]))),128))]),_:1}))}});const Kn={class:"row justify-between items-center"},Xn={class:"q-mt-xl"},Jn={class:"q-mt-lg",style:{height:"70vh"}},Zn={class:"q-mb-lg",style:{width:"20rem"}},Vt=80,yo=ee({__name:"PropertyBillingPage",setup(e){const l=Ee(),o=ha("light-page")||"#ffffff",a=Se("eventBus"),t=[{label:"View Details",icon:"visibility",textColor:"black"},{label:"Get Defaulters",icon:"paid",textColor:"black"}];pe.handlePaginateSubscription(a,{onSuccess:Re,onError:Ae});const n=_t[new Date().getMonth()+1],r=[{field:"propertySubscriptionId",label:"Property Subscription Id",name:"propertySubscriptionId",align:"left"},{field:"propertyName",label:"Property Name",name:"propertyName",align:"left"},{field:"oldCode",label:"Old Code",name:"oldCode",align:"left"},{field:"streetNumber",label:"Street Number",name:"streetNumber",align:"left"},{field:"streetName",label:"Street Name",name:"streetName",align:"left"},{field:"arrears",label:"Arrears",name:"arrears",align:"left"}],v=[{field:"streetId",name:"streetId",label:"streetId",align:"center"},{field:"streetName",label:"Street Name",name:"streetName",align:"center"},{field:"arrears",label:"Arrears",name:"arrears",align:"center"},{field:"totalBilling",label:"Total Billing",name:"totalBilling",align:"center"},{field:"actions",label:"Actions",name:"actions",align:"center"}],s=[{field:"streetName",label:"Street Name",name:"streetName",align:"center"},{field:"propertyName",label:"Property Name",name:"propertyName",align:"center"},{field:"currentBilling",label:"Current Billing",name:"currentBilling",align:"center"},{field:"arrears",label:"Arrears",name:"arrears",align:"center"}],$=[...s,{field:"totalBilling",label:"Total Billing",name:"totalBilling",align:"center"},{field:"lastPayment",label:"Last Payment",name:"lastPayment",align:"center"}],P=["streetName","arrears","totalBilling"],C=s.map(_=>_.field),I=[...C,"totalBilling","lastPayment"],f={billing:"billing",billingDetails:"billingDetails",billingDefaulters:"defaulters"};lt.handleViewBillingDetails(a,{onSuccess:he}),lt.handleGetDefaulters(a,{onSuccess:_e});const B=A(ie.PROPERTIES),h=A(!1),g=A(n),b=A(!1),O=A(!1),w=A(Be.ADD_SUBSCRIBER),D=A(Fe.ADD_LGA),c=A(),u=A(-1);let p=A([]);const F=A("billing"),Y=A([]),oe=A({page:1,rowsPerPage:3,rowsNumber:10}),ce=A(!0),ge=A(""),E=S(()=>Object.values(_t).map(_=>_)),M=S(()=>({[ie.PROPERTIES]:"Add New Property",[ie.BILLINGS]:"Generate / Print Billing"})[B.value]),K=S(()=>{var _;return(_=c.value)==null?void 0:_.map(y=>({propertySubscriptionId:y.propertySubscriptionId,propertyName:y.propertySubscriptionName,oldCode:y.oldCode,streetNumber:y.streetNumber,streetName:y.streetName,arrears:y.arrears}))}),le=S(()=>{var _;return(_=p.value)==null?void 0:_.map(y=>({streetName:y.streetName,arrears:y.arrears,streetId:y.streetId,totalBilling:y.totalBilling}))});function Re(_){nt({type:"positive"}),c.value=_==null?void 0:_.data,oe.value=_==null?void 0:_.pagination}function Ae(){nt({type:"negative",message:"Could not load more data!"})}async function Me(_){ce.value=!0;const y=await pe.getSubscriptionByPages(_);c.value=y==null?void 0:y.data,oe.value=y==null?void 0:y.pagination,ce.value=!1}function Ge(_,y){y&&(console.log("payload",y),_==="View Details"?a.emit(U.VIEW_BILLING_DETAILS,{streetId:y,billingMonth:g.value}):_==="Get Defaulters"&&a.emit(U.GET_DEFAULTERS,{streetId:y}))}function he(_){F.value=f.billingDetails,Y.value=_}function _e(_){F.value=f.billingDefaulters,Y.value=_}function W(_){u.value=_}function $e(){h.value=!h.value}function re(_){b.value=!0,w.value=_}return a.on(U.TRIGGER_REMOTE_MODAL_LGA,()=>{D.value=Fe.ADD_LGA,O.value=!0}),a.on(U.TRIGGER_REMOTE_MODAL_LGA_WARD,()=>{D.value=Fe.ADD_LGA_WARD,O.value=!0}),ue(ge,async _=>{if(_){ce.value=!0;const y=await pe.getSubscriptionByPages({pagination:oe.value,filter:ge.value});c.value=y==null?void 0:y.data,oe.value=y==null?void 0:y.pagination,ce.value=!1}}),Ql(async()=>{B.value===ie.PROPERTIES&&(p.value=await lt.getBillingAccountArrears({page:1,limit:5}))}),ue(g,async()=>{B.value===ie.BILLINGS&&(p.value=await lt.getBillingAccountArrears({page:1,limit:5,month:g.value}))}),Hl(()=>{l.loading.show({message:"Please, wait ..."})}),ye(()=>{l.loading.hide()}),ye(async()=>{const _=await pe.getSubscriptions();c.value=_==null?void 0:_.data,oe.value=_==null?void 0:_.pagination,ce.value=!1}),de(async()=>{a.off(U.VIEW_BILLING_DETAILS),a.off(U.GET_DEFAULTERS),a.off(U.PAGINATE_SUBSCRIPTION_TABLE)}),(_,y)=>(N(),Z(ya,null,{default:d(()=>[L("div",{style:Ue({backgroundColor:V(o),height:"100vh",padding:"0 1rem",width:"100%"})},[L("div",Kn,[L("div",Xn,[i($a,{modelValue:B.value,"onUpdate:modelValue":y[0]||(y[0]=x=>B.value=x),dense:"","active-color":"dark","active-bg-color":"secondary"},{default:d(()=>[i(al,{name:V(ie).PROPERTIES,icon:"house",label:V(ie).PROPERTIES,style:{width:"15rem"}},null,8,["name","label"]),i(al,{name:V(ie).BILLINGS,icon:"receipt",label:V(ie).BILLINGS,style:{width:"15rem"}},null,8,["name","label"])]),_:1},8,["modelValue"])]),L("div",null,[i(j,{color:"primary",rounded:"",onClick:$e},{default:d(()=>[ve(ot(M.value),1)]),_:1})])]),L("div",Jn,[i(Ra,{modelValue:B.value,"onUpdate:modelValue":y[8]||(y[8]=x=>B.value=x),style:{"background-color":"inherit",height:"100%"}},{default:d(()=>[i(ol,{name:V(ie).PROPERTIES},{default:d(()=>[L("div",null,[i(el,{rounded:"",class:"bg-accent"},{default:d(()=>[i(te,null,{default:d(()=>[i(mt,{class:"header-sticky",rows:K.value,bordered:"",columns:r,"table-header-style":{backgroundColor:`${_.$getColor("secondary")}`},onRequest:Me,pagination:oe.value,"onUpdate:pagination":y[2]||(y[2]=x=>oe.value=x),loading:ce.value,filter:ge.value},{"top-right":d(()=>[i(ae,{borderless:"",dense:"",debounce:"300",modelValue:ge.value,"onUpdate:modelValue":y[1]||(y[1]=x=>ge.value=x),placeholder:"Search"},{append:d(()=>[i(xe,{name:"search"})]),_:1},8,["modelValue"])]),body:d(x=>[i(gt,{props:x},{default:d(()=>[(N(!0),fe(me,null,tt(x.cols,X=>(N(),Z(bt,{key:X.name},{default:d(()=>[ve(ot(X.value),1)]),_:2},1024))),128))]),_:2},1032,["props"])]),_:1},8,["rows","table-header-style","pagination","loading","filter"])]),_:1})]),_:1})])]),_:1},8,["name"]),i(ol,{name:V(ie).BILLINGS},{default:d(()=>[L("div",Zn,[i(be,{style:{width:"100%"},modelValue:g.value,"onUpdate:modelValue":y[3]||(y[3]=x=>g.value=x),label:"Month",filled:"",outlined:"","label-color":"dark",options:E.value,clearable:"","map-options":"","emit-value":""},null,8,["modelValue","options"])]),L("div",null,[i(el,{rounded:"",class:"bg-accent"},{default:d(()=>[ht(i(te,null,{default:d(()=>[i(j,{icon:"arrow_back",flat:"",onClick:y[4]||(y[4]=x=>F.value=f.billing)})]),_:1},512),[[Kt,F.value!==f.billing]]),i(te,null,{default:d(()=>[F.value===f.billing?(N(),Z(mt,{key:0,bordered:"",columns:v,rows:le.value,"visible-columns":P,"table-header-class":"text-bolder","table-header-style":{backgroundColor:`${_.$getColor("secondary")}`}},{body:d(x=>[i(gt,{props:x,onMouseenter:X=>W(x.rowIndex),onMouseleave:y[5]||(y[5]=X=>W(-1))},{default:d(()=>[(N(!0),fe(me,null,tt(x.cols,(X,ft)=>(N(),Z(bt,{key:X.name,class:"text-center",style:{postion:"relative"}},{default:d(()=>[i(xt,{label:X.value,class:"text-bold",style:Ue({backgroundColor:"transparent",color:`${_.$getColor("dark")}`})},null,8,["label","style"]),ft===x.cols.length-1?ht((N(),fe("span",{key:0,style:Ue({position:"absolute",top:u.value===x.rowIndex?"0.5rem":"0",right:u.value===x.rowIndex?"0.5rem":"0",zIndex:u.value===x.rowIndex?"1":"0"})},[i(Yn,{"menu-items":t,onMenuItemClickHandler:wt=>Ge(wt.label,x.row.streetId)},null,8,["onMenuItemClickHandler"])],4)),[[Kt,u.value===x.rowIndex]]):et("",!0)]),_:2},1024))),128))]),_:2},1032,["props","onMouseenter"])]),_:1},8,["rows","table-header-style"])):F.value===f.billingDefaulters?(N(),Z(mt,{key:1,bordered:"",columns:s,rows:Y.value,"visible-columns":V(C),"table-header-class":"text-bolder","table-header-style":{backgroundColor:`${_.$getColor("secondary")}`},title:"Billings Payment Defaulters"},{body:d(x=>[i(gt,{props:x,onMouseenter:X=>W(x.rowIndex),onMouseleave:y[6]||(y[6]=X=>W(-1))},{default:d(()=>[(N(!0),fe(me,null,tt(x.cols,X=>(N(),Z(bt,{key:X.name,class:"text-center",style:{postion:"relative"}},{default:d(()=>[i(xt,{label:X.value,class:"text-bold",style:Ue({backgroundColor:"transparent",color:`${_.$getColor("dark")}`})},null,8,["label","style"])]),_:2},1024))),128))]),_:2},1032,["props","onMouseenter"])]),_:1},8,["rows","visible-columns","table-header-style"])):F.value===f.billingDetails?(N(),Z(mt,{key:2,bordered:"",columns:$,rows:Y.value,"visible-columns":I,"table-header-class":"text-bolder","table-header-style":{backgroundColor:`${_.$getColor("secondary")}`},title:"Billing Details"},{body:d(x=>[i(gt,{props:x,onMouseenter:X=>W(x.rowIndex),onMouseleave:y[7]||(y[7]=X=>W(-1))},{default:d(()=>[(N(!0),fe(me,null,tt(x.cols,X=>(N(),Z(bt,{key:X.name,class:"text-center",style:{postion:"relative"}},{default:d(()=>[i(xt,{label:X.value,class:"text-bold",style:Ue({backgroundColor:"transparent",color:`${_.$getColor("dark")}`})},null,8,["label","style"])]),_:2},1024))),128))]),_:2},1032,["props","onMouseenter"])]),_:1},8,["rows","table-header-style"])):et("",!0)]),_:1})]),_:1})])]),_:1},8,["name"])]),_:1},8,["modelValue"])]),i(Bt,{modelValue:h.value,"onUpdate:modelValue":y[12]||(y[12]=x=>h.value=x)},{default:d(()=>[i(Lt,{height:"auto",width:`${Vt}rem`},{default:d(()=>[B.value===V(ie).PROPERTIES?(N(),Z(Ka,{key:0,onAddSubscriber:y[9]||(y[9]=x=>re(V(Be).ADD_SUBSCRIBER)),onAddStreet:y[10]||(y[10]=x=>re(V(Be).ADD_STREET)),onAddPropertyType:y[11]||(y[11]=x=>re(V(Be).ADD_PROPERTY_TYPE))})):B.value===V(ie).BILLINGS?(N(),Z(dn,{key:1})):et("",!0)]),_:1},8,["width"])]),_:1},8,["modelValue"]),i(Bt,{modelValue:b.value,"onUpdate:modelValue":y[13]||(y[13]=x=>b.value=x),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:d(()=>[i(Lt,{height:"auto",width:`${Vt-30}rem`},{default:d(()=>[w.value===V(Be).ADD_SUBSCRIBER?(N(),Z(hn,{key:0})):w.value===V(Be).ADD_STREET?(N(),Z(Cn,{key:1})):w.value===V(Be).ADD_PROPERTY_TYPE?(N(),Z(xn,{key:2})):et("",!0)]),_:1},8,["width"])]),_:1},8,["modelValue"]),i(Bt,{modelValue:O.value,"onUpdate:modelValue":y[14]||(y[14]=x=>O.value=x),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:d(()=>[i(Lt,{height:"auto",width:`${Vt}rem`},{default:d(()=>[D.value===V(Fe).ADD_LGA?(N(),Z(On,{key:0})):D.value===V(Fe).ADD_LGA_WARD?(N(),Z(Un,{key:1})):et("",!0)]),_:1},8,["width"])]),_:1},8,["modelValue"])],4)]),_:1}))}});export{yo as default};
